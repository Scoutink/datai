import{g4 as g,gL as h,ga as j,gt as I,gu as Z,gm as A,gp as F}from"./index-BI8deSNo.js";function L(e){e===void 0&&(e={});var n=e.connector,a=n===void 0?function(){return new A}:n,r=e.resetOnError,t=r===void 0?!0:r,o=e.resetOnComplete,s=o===void 0?!0:o,c=e.resetOnRefCountZero,w=c===void 0?!0:c;return function(x){var i,u,v,l=0,b=!1,f=!1,m=function(){u?.unsubscribe(),u=void 0},y=function(){m(),i=v=void 0,b=f=!1},E=function(){var d=i;y(),d?.unsubscribe()};return g(function(d,R){l++,!f&&!b&&m();var p=v=v??a();R.add(function(){l--,l===0&&!f&&!b&&(u=_(E,w))}),p.subscribe(R),!i&&l>0&&(i=new h({next:function(C){return p.next(C)},error:function(C){f=!0,m(),u=_(y,t,C),p.error(C)},complete:function(){b=!0,m(),u=_(y,s),p.complete()}}),j(d).subscribe(i))})(x)}}function _(e,n){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];if(n===!0){e();return}if(n!==!1){var t=new h({next:function(){t.unsubscribe(),e()}});return j(n.apply(void 0,I([],Z(a)))).subscribe(t)}}function U(e,n,a){var r,t,o,s,c=!1;return e&&typeof e=="object"?(r=e.bufferSize,s=r===void 0?1/0:r,t=e.windowTime,n=t===void 0?1/0:t,o=e.refCount,c=o===void 0?!1:o,a=e.scheduler):s=e??1/0,L({connector:function(){return new F(s,n,a)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}export{U as a,L as s};
