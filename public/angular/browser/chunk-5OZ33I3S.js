import{a as Fe}from"./chunk-SW6QPDNJ.js";import{a as _,b as E,c as R,d as ce,e as ue,f as ye,g as he,h as _e}from"./chunk-5BJUJSQ2.js";import{a as ge,b as Re,c as De,d as xe,e as Ee}from"./chunk-UQDQDCM7.js";import{a as fe,b as ve}from"./chunk-5OA3UTKR.js";import{j as le,k as de}from"./chunk-VNAU6AHI.js";import{C as G,D as V,G as U,H as W,J as H,L as ae}from"./chunk-3XAX4OT5.js";import{ia as ne,ma as se,na as pe}from"./chunk-NF46UI75.js";import{t as oe,u as me}from"./chunk-SIUWMJOE.js";import{B as ie,D as re,c as $,e as D,h as j,i as J,o as L,r as P,s as K,t as z,u as X,v as Z,w as ee,x as te}from"./chunk-TMWBOQE5.js";import{Ab as m,Ac as p,Ea as A,Kb as n,Lb as r,Mb as v,Na as q,Nb as F,Oa as M,Ob as C,Qb as w,Tb as S,Vb as y,Yb as I,Yc as B,Zc as Q,a as N,ec as T,gc as d,hc as f,ib as i,ic as c,jb as x,jd as Y,rc as k,tb as O,wb as u,zc as s}from"./chunk-EOQA7B6X.js";function Ce(t,l){if(t&1&&(n(0,"option",28),d(1),s(2,"translate"),r()),t&2){let e=l.$implicit;m("value",e==null?null:e.id),i(),c(" ",p(2,2,e==null?null:e.name.toUpperCase())," ")}}function Se(t,l){t&1&&(n(0,"div")(1,"div",29),d(2),s(3,"translate"),r()()),t&2&&(i(2),c(" ",p(3,1,"FREQUENCY_IS_REQUIRED")," "))}function Ie(t,l){if(t&1){let e=w();n(0,"div",8)(1,"div",22)(2,"label",23),d(3),s(4,"translate"),r(),n(5,"select",24),S("change",function(){q(e);let o=y();return M(o.onFrequencyChange())}),n(6,"option",25),d(7),s(8,"translate"),r(),u(9,Ce,3,4,"option",26),r(),u(10,Se,4,3,"div",27),r()()}if(t&2){let e,a=y();i(3),c(" ",p(4,4,"FREQUENCY"),""),i(4),c("--",p(8,6,"NONE"),"--"),i(2),m("ngForOf",a.reminderFrequencies),i(),m("ngIf",(e=a.reminderForm.get("frequency").errors)==null?null:e.required)}}function Te(t,l){if(t&1&&(n(0,"div",36),F(1,37),n(2,"mat-checkbox",38),d(3),s(4,"translate"),r(),C(),r()),t&2){let e=l.$implicit,a=l.index;i(),m("formGroupName",a),i(2),c(" ",p(4,2,e.get("name").value.toUpperCase())," ")}}function be(t,l){if(t&1&&(n(0,"div",32)(1,"label",33),d(2),s(3,"translate"),r(),n(4,"div",34),u(5,Te,5,4,"div",35),r()()),t&2){let e=y(2);i(2),f(p(3,2,"WEEK_DAYS")),i(3),m("ngForOf",e.dailyRemindersArray.controls)}}function Ne(t,l){if(t&1&&(n(0,"mat-radio-button",43),d(1),s(2,"translate"),r()),t&2){let e=l.$implicit;m("value",e.id),i(),f(p(2,2,e.name))}}function Ae(t,l){if(t&1&&(n(0,"div",32)(1,"label",39),d(2),s(3,"translate"),r(),n(4,"div",40)(5,"mat-radio-group",41),u(6,Ne,3,4,"mat-radio-button",42),r()()()),t&2){let e=y(2);i(2),f(p(3,2,"WEEK_DAYS")),i(4),m("ngForOf",e.dayOfWeek)}}function qe(t,l){if(t&1&&(n(0,"option",28),d(1),s(2,"translate"),r()),t&2){let e=l.$implicit;m("value",e.id),i(),c(" ",p(2,2,e.name.toUpperCase())," ")}}function Me(t,l){if(t&1&&(n(0,"option",28),d(1),r()),t&2){let e=l.$implicit;m("value",e),i(),c(" ",e," ")}}function Oe(t,l){if(t&1&&(n(0,"tr"),F(1,37),n(2,"td"),d(3),s(4,"translate"),r(),n(5,"td")(6,"select",49),u(7,qe,3,4,"option",26),r()(),n(8,"td")(9,"select",50),u(10,Me,2,2,"option",26),r()(),C(),r()),t&2){let e=l.$implicit,a=l.index,o=y(3);i(),m("formGroupName",a),i(2),f(p(4,4,e.get("name").value.toUpperCase())),i(4),m("ngForOf",e.get("monthValues").value),i(3),m("ngForOf",o.days)}}function we(t,l){if(t&1&&(n(0,"div",32)(1,"label",44),d(2),s(3,"translate"),r(),n(4,"div",45)(5,"table",46)(6,"thead")(7,"tr"),v(8,"th"),n(9,"th"),d(10),s(11,"translate"),r(),n(12,"th"),d(13),s(14,"translate"),r()()(),n(15,"tbody",47),u(16,Oe,11,6,"tr",48),r()()()()),t&2){let e=y(2);i(2),f(p(3,4,"SELECT_QUARTER_DATE")),i(8),f(p(11,6,"MONTH")),i(3),f(p(14,8,"DAY")),i(3),m("ngForOf",e.quarterlyRemindersArray.controls)}}function ke(t,l){if(t&1&&(n(0,"option",28),d(1),s(2,"translate"),r()),t&2){let e=l.$implicit;m("value",e.id),i(),c(" ",p(2,2,e.name)," ")}}function Be(t,l){if(t&1&&(n(0,"option",28),d(1),r()),t&2){let e=l.$implicit;m("value",e),i(),c(" ",e," ")}}function Qe(t,l){if(t&1&&(n(0,"tr"),F(1,37),n(2,"td"),d(3),s(4,"translate"),r(),n(5,"td")(6,"select",49),u(7,ke,3,4,"option",26),r()(),n(8,"td")(9,"select",50),u(10,Be,2,2,"option",26),r()(),C(),r()),t&2){let e=l.$implicit,a=l.index,o=y(3);i(),m("formGroupName",a),i(2),f(p(4,4,e.get("name").value)),i(4),m("ngForOf",e.get("monthValues").value),i(3),m("ngForOf",o.days)}}function Ye(t,l){if(t&1&&(n(0,"div",32)(1,"label",51),d(2),s(3,"translate"),r(),n(4,"div",52)(5,"table",46)(6,"thead")(7,"tr"),v(8,"th"),n(9,"th"),d(10),s(11,"translate"),r(),n(12,"th"),d(13),s(14,"translate"),r()()(),n(15,"tbody",53),u(16,Qe,11,6,"tr",48),r()()()()),t&2){let e=y(2);i(2),f(p(3,4,"SELECT_DATE")),i(8),f(p(11,6,"MONTH")),i(3),f(p(14,8,"DAY")),i(3),m("ngForOf",e.halfYearlyRemindersArray.controls)}}function Ge(t,l){if(t&1&&(n(0,"div",8)(1,"div",30),u(2,be,6,4,"div",31)(3,Ae,7,4,"div",31)(4,we,17,10,"div",31)(5,Ye,17,10,"div",31),r()()),t&2){let e=y();i(2),m("ngIf",e.reminderForm.get("frequency").value=="0"),i(),m("ngIf",e.reminderForm.get("frequency").value=="1"),i(),m("ngIf",e.reminderForm.get("frequency").value=="3"),i(),m("ngIf",e.reminderForm.get("frequency").value=="4")}}function Ve(t,l){if(t&1&&(n(0,"div",22)(1,"label"),d(2),s(3,"translate"),r(),v(4,"input",54),s(5,"translate"),v(6,"owl-date-time",null,0),r()),t&2){let e=T(7),a=y();i(2),c(" ",p(3,5,"REMINDER_DATE"),""),i(2),I("placeholder",p(5,7,"DATE")),m("owlDateTimeTrigger",e)("min",a.minDate)("owlDateTime",e)}}function Ue(t,l){if(t&1&&(n(0,"div",22)(1,"label"),d(2),s(3,"translate"),r(),v(4,"input",54),s(5,"translate"),v(6,"owl-date-time",null,1),r()),t&2){let e=T(7),a=y();i(2),c(" ",p(3,5,"REMINDER_START_DATE"),""),i(2),I("placeholder",p(5,7,"START_DATE")),m("owlDateTimeTrigger",e)("min",a.minDate)("owlDateTime",e)}}function We(t,l){if(t&1&&(n(0,"div",22)(1,"label"),d(2),s(3,"translate"),r(),v(4,"input",55),s(5,"translate"),v(6,"owl-date-time",null,2),r()),t&2){let e=T(7);i(2),f(p(3,4,"REMINDER_END_DATE")),i(2),I("placeholder",p(5,6,"END_DATE")),m("owlDateTimeTrigger",e)("owlDateTime",e)}}var yt=(()=>{class t extends ne{get dailyRemindersArray(){return this.reminderForm.get("dailyReminders")}get quarterlyRemindersArray(){return this.reminderForm.get("quarterlyReminders")}get halfYearlyRemindersArray(){return this.reminderForm.get("halfYearlyReminders")}constructor(e,a,o,h){super(),this.fb=e,this.commonService=a,this.data=o,this.dialogRef=h,this.reminderFrequencies=[],this.minDate=new Date,this.users=[],this.selectedUsers=[],this.dayOfWeek=ce,this.months=ue,this.days=[]}ngOnInit(){for(let e=1;e<=31;e++)this.days.push(e);this.getReminderFrequency(),this.createReminderForm(),this.getReminder()}closeDialog(){this.dialogRef.close()}getReminder(){this.sub$.sink=this.commonService.getMyReminder(this.data).subscribe(e=>{this.reminder=N({},e),this.reminder.dailyReminders&&(this.reminder.dailyReminders=this.reminder.dailyReminders.sort((a,o)=>a.dayOfWeek-o.dayOfWeek)),this.reminder.quarterlyReminders&&(this.reminder.quarterlyReminders=this.reminder.quarterlyReminders.sort((a,o)=>a.quarter-o.quarter)),this.reminder.halfYearlyReminders&&(this.reminder.halfYearlyReminders=this.reminder.halfYearlyReminders.sort((a,o)=>a.quarter-o.quarter)),this.reminderForm.patchValue(this.reminder),this.onFrequencyChange(),this.reminderForm.patchValue(this.reminder),this.reminderForm.get("isRepeated").value&&(this.reminderForm.get("frequency").setValidators([D.required]),this.reminderForm.updateValueAndValidity())})}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(e=>this.reminderFrequencies=[...e])}createReminderForm(){let e=new Date;this.reminderForm=this.fb.group({id:[""],subject:[{value:"",disabled:!0},[D.required]],message:[{value:"",disabled:!0},[D.required]],frequency:[{value:"",disabled:!0}],isRepeated:[{value:!1,disabled:!0}],isEmailNotification:[{value:!1,disabled:!0}],startDate:[{value:e,disabled:!0},[D.required]],endDate:[{value:null,disabled:!0}],dayOfWeek:[{value:null,disabled:!0}],documentId:[{value:null,disabled:!0}]})}checkData(e){e.checked?this.reminderForm.get("frequency").setValidators([D.required]):this.reminderForm.get("frequency").setValidators([]),this.reminderForm.updateValueAndValidity()}getUsers(){this.sub$.sink=this.commonService.getUsersForDropdown().subscribe(e=>{if(this.users=e,this.reminder){let a=this.reminder.reminderUsers.map(o=>o.userId);this.selectedUsers=this.users.filter(o=>a.indexOf(o.id)>=0)}})}onFrequencyChange(){let e=this.reminderForm.get("frequency").value;e=e==0?"0":e,e==E.Daily.toString()?(this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.addDailReminders(),this.reminderForm.get("dayOfWeek").setValue("")):e==E.Weekly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(new Date().getDay())):e==E.Quarterly.toString()?(this.removeDailReminders(),this.removeHalfYearlyReminders(),this.addQuarterlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):e==E.HalfYearly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.addHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(""))}addDailReminders(){if(!this.reminderForm.contains("dailyReminders")){let e=this.fb.array([]);e.push(this.createDailyReminderFormGroup(_.Sunday)),e.push(this.createDailyReminderFormGroup(_.Monday)),e.push(this.createDailyReminderFormGroup(_.Tuesday)),e.push(this.createDailyReminderFormGroup(_.Wednesday)),e.push(this.createDailyReminderFormGroup(_.Thursday)),e.push(this.createDailyReminderFormGroup(_.Friday)),e.push(this.createDailyReminderFormGroup(_.Saturday)),this.reminderForm.addControl("dailyReminders",e)}}addQuarterlyReminders(){if(!this.reminderForm.contains("quarterlyReminders")){let e=this.fb.array([]),a=this.months.filter(g=>[1,2,3].indexOf(g.id)>=0),o=this.months.filter(g=>[4,5,6].indexOf(g.id)>=0),h=this.months.filter(g=>[7,8,9].indexOf(g.id)>=0),b=this.months.filter(g=>[10,11,12].indexOf(g.id)>=0);e.push(this.createQuarterlyReminderFormGroup(R.Quarter1,"JAN_MAR",a)),e.push(this.createQuarterlyReminderFormGroup(R.Quarter2,"APR_JUN",o)),e.push(this.createQuarterlyReminderFormGroup(R.Quarter3,"JUL_SEPT",h)),e.push(this.createQuarterlyReminderFormGroup(R.Quarter4,"OCT_DEC",b)),this.reminderForm.addControl("quarterlyReminders",e)}}addHalfYearlyReminders(){if(!this.reminderForm.contains("halfYearlyReminders")){let e=this.fb.array([]),a=this.months.filter(h=>[1,2,3,4,5,6].indexOf(h.id)>=0),o=this.months.filter(h=>[7,8,9,10,11,12].indexOf(h.id)>=0);e.push(this.createHalfYearlyReminderFormGroup(R.Quarter1,"JAN_JUN",a)),e.push(this.createHalfYearlyReminderFormGroup(R.Quarter2,"JUL_DEC",o)),this.reminderForm.addControl("halfYearlyReminders",e)}}removeDailReminders(){this.reminderForm.contains("dailyReminders")&&this.reminderForm.removeControl("dailyReminders")}removeQuarterlyReminders(){this.reminderForm.contains("quarterlyReminders")&&this.reminderForm.removeControl("quarterlyReminders")}removeHalfYearlyReminders(){this.reminderForm.contains("halfYearlyReminders")&&this.reminderForm.removeControl("halfYearlyReminders")}createDailyReminderFormGroup(e){return this.fb.group({id:[""],reminderId:[""],dayOfWeek:[e],isActive:[{value:!0,disabled:!0}],name:[_[e]]})}createQuarterlyReminderFormGroup(e,a,o){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[{value:this.getCurrentDay(),disabled:!0}],month:[{value:o[0],disabled:!0}],name:[a],monthValues:[o]})}createHalfYearlyReminderFormGroup(e,a,o){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[{value:this.getCurrentDay(),disabled:!0}],month:[{value:o[0],disabled:!0}],name:[a],monthValues:[o]})}getCurrentDay(){return new Date().getDate()}onDateChange(e){let a=e.get("day").value,o=e.get("month").value,h=new Date(new Date().getFullYear(),Number.parseInt(o),0).getDate();a>h&&(e.setErrors({invalidDate:"Invalid Date"}),e.markAllAsTouched())}static{this.\u0275fac=function(a){return new(a||t)(x(ie),x(ae),x(V),x(G))}}static{this.\u0275cmp=A({type:t,selectors:[["app-reminder-detail"]],standalone:!0,features:[O,k],decls:39,vars:21,consts:[["dt2",""],["dt3",""],["dt4",""],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],["mat-icon-button","",1,"close-button","ms-auto",3,"click"],["color","warn",1,"close-icon"],["mat-dialog-content",""],[1,"row"],[1,"col-sm-12"],[3,"formGroup"],[1,"form-group","col-md-12"],["for","subject"],["formControlName","subject","type","text","id","subject",1,"form-control"],["for","message"],["formControlName","message","id","message","cols","30",1,"form-control"],[1,"col-md-4"],["color","primary","formControlName","isRepeated",3,"change"],[1,"col-md-2"],["color","primary","formControlName","isEmailNotification"],["class","row",4,"ngIf"],["class","form-group col-md-6",4,"ngIf"],[1,"form-group","col-md-6"],["for","frequency"],["formControlName","frequency","id","frequency",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"text-danger"],[1,"col-md-12"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","weekDays"],["id","weekDays",1,"row"],["class","col-sm-auto mr-1","formArrayName","dailyReminders",4,"ngFor","ngForOf"],["formArrayName","dailyReminders",1,"col-sm-auto","mr-1"],[3,"formGroupName"],["color","primary","formControlName","isActive",1,"mr-1"],["for","weekDay"],["id","weekDay"],["formControlName","dayOfWeek"],["class","mr-2","color","primary",3,"value",4,"ngFor","ngForOf"],["color","primary",1,"mr-2",3,"value"],["for","Quarterly"],["id","Quarterly",1,"row"],[1,"table"],["formArrayName","quarterlyReminders"],[4,"ngFor","ngForOf"],["formControlName","month",1,"form-control"],["formControlName","day",1,"form-control"],["for","HalfYearly"],["id","HalfYearly",1,"row"],["formArrayName","halfYearlyReminders"],["formControlName","startDate",1,"form-control",3,"owlDateTimeTrigger","min","owlDateTime","placeholder"],["formControlName","endDate",1,"form-control",3,"owlDateTimeTrigger","owlDateTime","placeholder"]],template:function(a,o){a&1&&(n(0,"div",3)(1,"span",4),d(2),s(3,"translate"),r(),n(4,"button",5),S("click",function(){return o.closeDialog()}),n(5,"mat-icon",6),d(6,"close"),r()()(),n(7,"div",7)(8,"div",8)(9,"div",9)(10,"form",10)(11,"div",8)(12,"div",11)(13,"label",12),d(14),s(15,"translate"),r(),v(16,"input",13),r()(),n(17,"div",8)(18,"div",11)(19,"label",14),d(20),s(21,"translate"),r(),v(22,"textarea",15),r()(),n(23,"div",8)(24,"div",16)(25,"mat-checkbox",17),S("change",function(b){return o.checkData(b)}),d(26),s(27,"translate"),r()(),n(28,"div",18)(29,"mat-checkbox",19),d(30),s(31,"translate"),r()(),v(32,"div",16),r(),u(33,Ie,11,8,"div",20)(34,Ge,6,4,"div",20),n(35,"div",8),u(36,Ve,8,9,"div",21)(37,Ue,8,9,"div",21)(38,We,8,8,"div",21),r()()()()()),a&2&&(i(2),c("",p(3,11,"REMINDER_DETAIL")," "),i(8),m("formGroup",o.reminderForm),i(4),c(" ",p(15,13,"SUBJECT"),""),i(6),c(" ",p(21,15,"MESSAGE"),""),i(6),c(" ",p(27,17,"REPEATE_REMINDER")," "),i(4),f(p(31,19,"SEND_EMAIL")),i(3),m("ngIf",o.reminderForm.get("isRepeated").value),i(),m("ngIf",o.reminderForm.get("isRepeated").value),i(2),m("ngIf",!o.reminderForm.get("isRepeated").value),i(),m("ngIf",o.reminderForm.get("isRepeated").value),i(),m("ngIf",o.reminderForm.get("isRepeated").value))},dependencies:[xe,ge,De,Re,Ee,Fe,me,oe,ve,fe,_e,ye,he,re,L,ee,te,$,Z,j,J,P,X,K,z,de,le,Y,B,Q,H,U,W,pe,se]})}}return t})();export{yt as a};
