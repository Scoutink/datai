import{a as x,b as Te}from"./chunk-UGUAXRVF.js";import{a as ue}from"./chunk-EJJES6DV.js";import{a as h}from"./chunk-GRNAKYI3.js";import{e as de}from"./chunk-HUQBVWNM.js";import{a as Fe}from"./chunk-SW6QPDNJ.js";import{a as ve,b as _e,c as Ee,d as ge,e as Re}from"./chunk-UQDQDCM7.js";import{a as ce,b as fe}from"./chunk-5OA3UTKR.js";import{a as Ie,b as xe}from"./chunk-TNLJ7CAF.js";import{J as pe,K as me,k as oe,w as se}from"./chunk-VNAU6AHI.js";import{a as ae,b as re}from"./chunk-YTVNRIZ3.js";import{ca as U,fa as A,ia as K,ja as ne,na as le}from"./chunk-NF46UI75.js";import{p as ee,t as te,u as ie}from"./chunk-SIUWMJOE.js";import{A as Z,C as H,D as J,c as j,e as I,h as z,i as Q,o as X,p as $,r as W,u as G,y as Y}from"./chunk-TMWBOQE5.js";import{Ab as l,Ac as p,Ea as S,Ed as O,Gd as B,Hd as P,Jd as V,Kb as r,Lb as n,Mb as f,Na as q,Oa as y,Qb as b,Tb as T,Vb as v,Yb as R,Yc as L,Zc as N,ec as C,gc as m,hc as E,ib as i,ic as c,jb as _,jd as k,rc as w,sc as D,tb as M,wb as u,zc as s}from"./chunk-EOQA7B6X.js";var qe=()=>["/file-request"];function ye(e,d){e&1&&(r(0,"span",32),m(1),s(2,"translate"),f(3,"app-page-help-text",33),n()),e&2&&(i(),c(" ",p(2,1,"ADD_FILE_REQUEST")," "))}function Me(e,d){e&1&&(r(0,"span",32),m(1),s(2,"translate"),f(3,"app-page-help-text",33),n()),e&2&&(i(),c(" ",p(2,1,"EDIT_FILE_REQUEST")," "))}function be(e,d){e&1&&(r(0,"div",34),m(1),s(2,"translate"),n()),e&2&&(i(),c(" ",p(2,1,"SUBJECT_IS_REQUIRED")," "))}function Ce(e,d){if(e&1&&(r(0,"div"),u(1,be,3,3,"div",25),n()),e&2){let t,o=v();i(),l("ngIf",(t=o.fileRequestForm.get("subject").errors)==null?null:t.required)}}function we(e,d){e&1&&(r(0,"div",34),m(1),s(2,"translate"),n()),e&2&&(i(),c(" ",p(2,1,"PLEASE_ENTER_VALID_EMAIL")," "))}function De(e,d){if(e&1&&(r(0,"div"),u(1,we,3,3,"div",25),n()),e&2){let t,o=v();i(),l("ngIf",(t=o.fileRequestForm.get("email").errors)==null?null:t.email)}}function Le(e,d){if(e&1&&(r(0,"mat-option",35),m(1),s(2,"translate"),n()),e&2){let t=d.$implicit;l("value",t.value),i(),c(" ",p(2,2,t.key)," ")}}function Ne(e,d){e&1&&(r(0,"div",34),m(1),s(2,"translate"),n()),e&2&&(i(),c(" ",p(2,1,"ALLOW_FILE_EXTENSION_IS_REQUIRED")," "))}function ke(e,d){if(e&1&&(r(0,"div"),u(1,Ne,3,3,"div",25),n()),e&2){let t,o=v();i(),l("ngIf",(t=o.fileRequestForm.get("fileType").errors)==null?null:t.required)}}function Ue(e,d){e&1&&(r(0,"div",34),m(1),s(2,"translate"),n()),e&2&&(i(),c(" ",p(2,1,"MAXIMUM_DOCUMENT_UPLOAD_IS_REQUIRED")," "))}function Ae(e,d){e&1&&(r(0,"div",34),m(1),s(2,"translate"),n()),e&2&&(i(),c(" ",p(2,1,"MAXIMUM_DOCUMENT_UPLOAD_MIN_VALUE")," "))}function Oe(e,d){if(e&1&&(r(0,"div"),u(1,Ue,3,3,"div",25)(2,Ae,3,3,"div",25),n()),e&2){let t,o,a=v();i(),l("ngIf",(t=a.fileRequestForm.get("maxDocument").errors)==null?null:t.required),i(),l("ngIf",(o=a.fileRequestForm.get("maxDocument").errors)==null?null:o.min)}}function Be(e,d){if(e&1&&(r(0,"mat-option",35),f(1,"span",36),n()),e&2){let t=d.$implicit;l("value",t.value),i(),l("appFileSizeLabel",t.value)}}function Pe(e,d){e&1&&(r(0,"div",34),m(1),s(2,"translate"),n()),e&2&&(i(),c(" ",p(2,1,"FILE_SIZE_IS_REQUIRED")," "))}function Ve(e,d){if(e&1&&(r(0,"div"),u(1,Pe,3,3,"div",25),n()),e&2){let t,o=v();i(),l("ngIf",(t=o.fileRequestForm.get("sizeInMb").errors)==null?null:t.required)}}function je(e,d){if(e&1&&(f(0,"input",37),s(1,"translate")),e&2){let t=v();R("placeholder",p(1,2,"ENTER_PASSWORD")),l("type",t.passwordFieldType)}}function ze(e,d){if(e&1){let t=b();r(0,"button",38),T("click",function(){q(t);let a=v();return y(a.togglePasswordVisibility())}),f(1,"i-feather",39),n()}if(e&2){let t=v();i(),l("name",t.passwordFieldType==="password"?"eye":"eye-off")}}function Qe(e,d){e&1&&(r(0,"div",34),m(1),s(2,"translate"),n()),e&2&&(i(),c(" ",p(2,1,"PASSWORD_IS_REQUIRED")," "))}function Xe(e,d){e&1&&(r(0,"mat-error",34),m(1),s(2,"translate"),n()),e&2&&(i(),c(" ",p(2,1,"EXPIRY_DATE_IS_REQURED")," "))}function $e(e,d){if(e&1&&(r(0,"div")(1,"div",40),f(2,"input",41),s(3,"translate"),f(4,"owl-date-time",null,0),u(6,Xe,3,3,"mat-error",25),n()()),e&2){let t=C(5),o=v();i(2),R("placeholder",p(3,4,"CHOOSE_A_START_DATE")),l("owlDateTimeTrigger",t)("owlDateTime",t),i(4),l("ngIf",o.fileRequestForm.get("linkExpiryTime").touched&&o.fileRequestForm.get("linkExpiryTime").hasError("required"))}}var qt=(()=>{class e extends K{get extensions(){return this.fileRequestForm.get("extensions")}togglePasswordVisibility(){this.passwordFieldType=this.passwordFieldType==="password"?"text":"password"}constructor(t,o,a,g,he,Se){super(),this.router=t,this.fb=o,this.activeRoute=a,this.fileRequestService=g,this.toastrService=he,this.translationService=Se,this.baseUrl=`${window.location.protocol}//${window.location.host}/file-requests/preview/`,this.isEditMode=!1,this.minDate=new Date,this.fileTypes=[],this.passwordFieldType="password",this.fileSizeOptions=Object.keys(x).filter(F=>isNaN(Number(F))).map(F=>({label:"",value:x[F]}))}createFileRequestForm(){this.fileRequestForm=this.fb.group({id:[""],isLinkExpiryTime:[!1],linkExpiryTime:[""],hasPassword:[!1],password:[""],subject:["",I.required],email:["",I.email],maxDocument:[1,I.required],sizeInMb:[x.LessThan5MB],fileType:[[],I.required],baseUrl:[this.baseUrl]},{validators:[this.checkData]})}checkData(t){let o=t.get("hasPassword").value,a=t.get("password").value,g={};return o&&!a&&(g.passwordValidator=!0),g}ngOnInit(){this.fileTypes=this.getEnumValues(h),this.createFileRequestForm(),this.sub$.sink=this.activeRoute.data.subscribe(t=>{if(t.fileRequest){this.isEditMode=!0;let o=t.fileRequest.allowExtension?t.fileRequest.allowExtension.split(",").filter(a=>a).map(a=>a&&h[a.trim()]):[];o=[...new Set(o)],this.fileRequestForm.patchValue({id:t.fileRequest.id,subject:t.fileRequest.subject,email:t.fileRequest.email,maxDocument:t.fileRequest.maxDocument,sizeInMb:t.fileRequest.sizeInMb,isLinkExpiryTime:!!t.fileRequest.linkExpiryTime,linkExpiryTime:t.fileRequest.linkExpiryTime?new Date(t.fileRequest.linkExpiryTime):null,hasPassword:t.fileRequest.hasPassword,password:t.fileRequest.password,fileType:o,baseUrl:this.baseUrl})}})}getEnumValues(t){return Object.keys(t).filter(o=>isNaN(Number(o))).map(o=>({key:o,value:t[o]}))}saveFileRequest(){if(this.fileRequestForm.valid){let t=this.createBuildObject();this.isEditMode?this.sub$.sink=this.fileRequestService.updateFileRequest(t).subscribe(()=>{this.toastrService.success(this.translationService.getValue("FILE_REQUEST_UPDATED_SUCCESSFULLY")),this.router.navigate(["/file-request"])}):this.sub$.sink=this.fileRequestService.addFileRequest(t).subscribe(()=>{this.toastrService.success(this.translationService.getValue("FILE_REQUEST_CREATED_SUCCESSFULLY")),this.router.navigate(["/file-request"])})}else this.fileRequestForm.markAllAsTouched()}createBuildObject(){let t=this.fileRequestForm.get("id").value,o=this.fileRequestForm.get("fileType").value;return{id:t,subject:this.fileRequestForm.get("subject").value,email:this.fileRequestForm.get("email").value,maxDocument:this.fileRequestForm.get("maxDocument").value,sizeInMb:this.fileRequestForm.get("sizeInMb").value,isLinkExpired:!1,hasPassword:!1,password:this.fileRequestForm.get("hasPassword").value?this.fileRequestForm.get("password").value:"",linkExpiryTime:this.fileRequestForm.get("isLinkExpiryTime").value?this.fileRequestForm.get("linkExpiryTime").value:null,fileExtension:o,baseUrl:this.baseUrl}}static{this.\u0275fac=function(o){return new(o||e)(_(B),_(Z),_(O),_(ue),_(ee),_(ne))}}static{this.\u0275cmp=S({type:e,selectors:[["app-manage-file-request"]],standalone:!0,features:[M,w],decls:82,vars:55,consts:[["date1",""],[1,"content"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-6","mb-2"],["class","mb-0 page-title",4,"ngIf"],[1,"card"],[1,"body"],[3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["formControlName","subject","type","text",1,"form-control"],[4,"ngIf"],[1,"col-md-3"],["formControlName","email","type","email",1,"form-control"],["panelClass","mat-select-control","formControlName","fileType","multiple","",1,"form-control",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","maxDocument","type","number","min","1",1,"form-control"],["panelClass","mat-select-control","formControlName","sizeInMb",1,"form-control",3,"placeholder"],["color","primary","formControlName","hasPassword"],[1,"input-group"],["autocomplete","new-password","class","form-control","formControlName","password",3,"type","placeholder",4,"ngIf"],[1,"input-group-append"],["type","button","class","btn btn-primary calendar-button",3,"click",4,"ngIf"],["class","text-danger",4,"ngIf"],["color","primary","formControlName","isLinkExpiryTime"],[1,"m-top-10","col-md-12"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],["name","x-circle",1,"small-icon"],[1,"mb-0","page-title"],["code","MANAGE_FILE_REQUEST"],[1,"text-danger"],[3,"value"],[3,"appFileSizeLabel"],["autocomplete","new-password","formControlName","password",1,"form-control",3,"type","placeholder"],["type","button",1,"btn","btn-primary","calendar-button",3,"click"],[1,"small-icon",3,"name"],[1,"col-md-6"],["formControlName","linkExpiryTime",1,"form-control",3,"placeholder","owlDateTimeTrigger","owlDateTime"]],template:function(o,a){o&1&&(r(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4),u(4,ye,4,3,"span",5)(5,Me,4,3,"span",5),n()(),r(6,"div",6)(7,"div",7)(8,"form",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"label"),m(13),s(14,"translate"),n(),f(15,"input",12),u(16,Ce,2,1,"div",13),n()(),r(17,"div",14)(18,"div",11)(19,"label"),m(20),s(21,"translate"),n(),f(22,"input",15),u(23,De,2,1,"div",13),n()(),r(24,"div",14)(25,"div",11)(26,"label"),m(27),s(28,"translate"),n(),r(29,"mat-select",16),s(30,"translate"),u(31,Le,3,4,"mat-option",17),n(),u(32,ke,2,1,"div",13),n()(),r(33,"div",14)(34,"div",11)(35,"label"),m(36),s(37,"translate"),n(),f(38,"input",18),u(39,Oe,3,2,"div",13),n()(),r(40,"div",14)(41,"div",11)(42,"label"),m(43),s(44,"translate"),n(),r(45,"mat-select",19),s(46,"translate"),u(47,Be,2,2,"mat-option",17),n(),u(48,Ve,2,1,"div",13),n()(),r(49,"div",14)(50,"div",11)(51,"label"),m(52),s(53,"translate"),n(),r(54,"p")(55,"mat-checkbox",20),m(56),s(57,"translate"),n()(),r(58,"div",21),u(59,je,2,4,"input",22),r(60,"div",23),u(61,ze,2,1,"button",24),n()(),u(62,Qe,3,3,"div",25),n()(),r(63,"div",14)(64,"div",11)(65,"label"),m(66),s(67,"translate"),n(),r(68,"p")(69,"mat-checkbox",26),m(70),s(71,"translate"),n()(),u(72,$e,7,6,"div",13),n()()(),r(73,"div",27)(74,"button",28),T("click",function(){return a.saveFileRequest()}),f(75,"i-feather",29),m(76),s(77,"translate"),n(),r(78,"button",30),f(79,"i-feather",31),m(80),s(81,"translate"),n()()()()()()()),o&2&&(i(4),l("ngIf",!a.isEditMode),i(),l("ngIf",a.isEditMode),i(3),l("formGroup",a.fileRequestForm),i(5),c(" ",p(14,28,"SUBJECT"),""),i(3),l("ngIf",a.fileRequestForm.get("subject").touched&&a.fileRequestForm.get("subject").errors),i(4),E(p(21,30,"EMAIL")),i(3),l("ngIf",a.fileRequestForm.get("email").touched&&a.fileRequestForm.get("email").errors),i(4),E(p(28,32,"ALLOW_FILE_EXTENSION")),i(2),R("placeholder",p(30,34,"SELECT_FILE_EXTENSION")),i(2),l("ngForOf",a.fileTypes),i(),l("ngIf",a.fileRequestForm.get("fileType").touched&&a.fileRequestForm.get("fileType").errors),i(4),E(p(37,36,"MAXIMUM_DOCUMENT_UPLOAD")),i(3),l("ngIf",a.fileRequestForm.get("maxDocument").touched&&a.fileRequestForm.get("maxDocument").errors),i(4),E(p(44,38,"MAXIMUM_FILE_SIZE_UPLOAD")),i(2),R("placeholder",p(46,40,"SELECT_MAX_FILE_SIZE")),i(2),l("ngForOf",a.fileSizeOptions),i(),l("ngIf",a.fileRequestForm.get("sizeInMb").touched&&a.fileRequestForm.get("sizeInMb").errors),i(4),c(" ",p(53,42,"PASSWORD_PROTECTION"),""),i(4),c(" ",p(57,44,"IS_PASSWORD_REQUIRED")," "),i(3),l("ngIf",a.fileRequestForm.get("hasPassword").value),i(2),l("ngIf",a.fileRequestForm.get("hasPassword").value),i(),l("ngIf",a.fileRequestForm.get("hasPassword").touched&&a.fileRequestForm.hasError("passwordValidator")),i(4),E(p(67,46,"LINK_EXPIRATION")),i(4),c(" ",p(71,48,"IS_LINK_VALID_UNTIL")," "),i(2),l("ngIf",a.fileRequestForm.get("isLinkExpiryTime").value),i(4),c(" ",p(77,50,"SAVE")," "),i(2),l("routerLink",D(54,qe)),i(2),c(" ",p(81,52,"CANCEL")," "))},dependencies:[H,X,j,$,z,Q,Y,ie,te,k,L,N,V,P,le,J,W,G,xe,se,Ie,U,A,re,ae,oe,de,fe,ce,Fe,ge,ve,Ee,_e,Re,Te,me,pe]})}}return e})();export{qt as a};
