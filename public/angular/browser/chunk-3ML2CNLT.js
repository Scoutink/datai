import{a as oi,b as pi,c as mi}from"./chunk-45RKJMIF.js";import{a as x,b as li}from"./chunk-TRK6XBCE.js";import{a as ii,b as ai,c as ni,d as ri}from"./chunk-GWG44RMY.js";import{a as Zt}from"./chunk-EDFYBFRY.js";import{a as he,b as pt,c as mt}from"./chunk-MDTWJNMV.js";import{a as ye,b as we,c as Le,d as Re,e as Ae}from"./chunk-UQDQDCM7.js";import{a as H,b as ke}from"./chunk-FUBOQZYU.js";import{a as lt,b as st}from"./chunk-5OA3UTKR.js";import{a as Fe,b as Be,c as Ne,e as Oe,f as Ve,h as Ue,i as He,k as $e,l as je,n as Ye,p as Ge,q as vt}from"./chunk-ZQ2PWCHX.js";import{b as ct}from"./chunk-54YXYWWQ.js";import{b as dt}from"./chunk-JB4URTUB.js";import{b as ut}from"./chunk-SLA72EXZ.js";import"./chunk-PSHPNFJ6.js";import"./chunk-EST3G7IM.js";import{a as ei,b as ti}from"./chunk-TNLJ7CAF.js";import{a as ft,b as _t,c as ht}from"./chunk-UX7VFZY4.js";import{a as ot}from"./chunk-DXCWD2WZ.js";import"./chunk-5HUZTPPR.js";import{A as ee,B as at,C as te,D as nt,E as Jt,F as Xt,G as ie,K as F,a as Xe,i as Yt,j as A,k as J,l as Gt,m as Qt,n as Wt,o as zt,p as qt,q as Kt,v as Z,w as _e,x as it}from"./chunk-VNAU6AHI.js";import"./chunk-2GYG6N64.js";import{a as tt,c as rt}from"./chunk-YTVNRIZ3.js";import{C as xe,D as Ie,F as Te,H as be,I as Je,J as Pe,L as jt,f as Ot}from"./chunk-3XAX4OT5.js";import{ca as Vt,ia as y,ja as V,ka as X,ma as k,na as fe}from"./chunk-NF46UI75.js";import{p as O,t as w,u as L}from"./chunk-SIUWMJOE.js";import"./chunk-GTE6R5NX.js";import"./chunk-FGSJTZPD.js";import"./chunk-73F4PDV3.js";import{A as Ht,B as Me,C as $t,D as K,c as me,e as le,h as se,i as de,m as q,o as et,r as ce,u as ue}from"./chunk-TMWBOQE5.js";import{$ as At,$b as ne,Ab as d,Ac as l,B as xt,Bb as kt,Bc as Q,Ea as P,Ed as Ze,Fa as Ke,Gd as De,Hd as Ut,Jd as Pt,Kb as a,L as wt,Lb as n,Ma as pe,Mb as g,Na as C,Nb as I,O as Lt,Oa as E,Ob as T,Qb as b,Ra as Y,S as It,Tb as v,Vb as S,Vc as Bt,W as Rt,Yb as j,Yc as W,Zc as N,a as Qe,ac as re,b as We,ba as Tt,bc as oe,dd as Nt,ec as G,gc as o,gd as z,hc as u,ib as i,ic as c,jb as B,jc as Ft,jd as M,p as ze,qa as bt,rc as R,sc as Se,tb as D,wa as qe,wb as _,za as h,zc as m}from"./chunk-EOQA7B6X.js";var St=class{constructor(s){this.paperService=s,this.paperSubject=new ze([]),this.responseHeaderSubject=new ze(null),this.loadingSubject=new ze(!1),this.loading$=this.loadingSubject.asObservable(),this.responseHeader$=this.responseHeaderSubject.asObservable()}connect(){return this.paperSubject.asObservable()}disconnect(){this.paperSubject.complete(),this.loadingSubject.complete(),this.responseHeaderSubject.complete()}loadPapers(s){this.loadingSubject.next(!0),this.paperService.getPapers(s).pipe(It(()=>xt([])),Tt(()=>this.loadingSubject.next(!1))).subscribe(t=>{if(t&&t.headers){let p={totalCount:t.headers.get("totalCount"),pageSize:t.headers.get("pageSize"),skip:t.headers.get("skip")};this.responseHeaderSubject.next(p),this.paperSubject.next(t.body)}})}loadAssignedPapers(s){this.loadingSubject.next(!0),this.paperService.getAssignedPapers(s).pipe(It(()=>xt([])),Tt(()=>this.loadingSubject.next(!1))).subscribe(t=>{if(t&&t.headers){let p={totalCount:t.headers.get("totalCount"),pageSize:t.headers.get("pageSize"),skip:t.headers.get("skip")};this.responseHeaderSubject.next(p),this.paperSubject.next(t.body)}})}};var gt=class extends Zt{constructor(){super(...arguments),this.id="",this.createdBy="",this.categoryId="",this.clientId="",this.statusId="",this.paperId="",this.metaTags=""}};var bi=["input"],Pi=()=>["/dashboard"],Di=()=>[5,10,20,50];function Mi(e,s){if(e&1){let t=b();a(0,"button",43),v("click",function(){C(t);let r=S();return E(r.addPaper())}),a(1,"mat-icon"),o(2,"add"),n(),o(3),m(4,"translate"),n()}e&2&&(i(3),c(" ",l(4,1,"ADD_PAPER")," "))}function yi(e,s){if(e&1&&(a(0,"mat-option",44),o(1),n()),e&2){let t=s.$implicit;d("value",t.id),i(),c(" ",t.name," ")}}function wi(e,s){if(e&1&&(a(0,"mat-option",44),o(1),n()),e&2){let t=s.$implicit;d("value",t.id),i(),c(" ",t.companyName," ")}}function Li(e,s){if(e&1&&(a(0,"mat-option",44),o(1),n()),e&2){let t=s.$implicit;d("value",t.id),i(),c(" ",t.name," ")}}function Ri(e,s){e&1&&(a(0,"th",45),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"ACTION")," "))}function Ai(e,s){if(e&1){let t=b();a(0,"button",48),v("click",function(){C(t);let r=S().$implicit,f=S();return E(f.editPaper(r))}),a(1,"mat-icon"),o(2,"edit"),n(),o(3),m(4,"translate"),n()}e&2&&(i(3),c(" ",l(4,1,"EDIT")," "))}function ki(e,s){if(e&1){let t=b();a(0,"button",48),v("click",function(){C(t);let r=S().$implicit,f=S();return E(f.deletePaper(r))}),a(1,"mat-icon"),o(2,"delete"),n(),o(3),m(4,"translate"),n()}e&2&&(i(3),c(" ",l(4,1,"DELETE")," "))}function Fi(e,s){if(e&1){let t=b();a(0,"td",46)(1,"button",47),v("click",function(r){return C(t),E(r.stopPropagation())}),a(2,"mat-icon"),o(3,"more_vert"),n()(),a(4,"mat-menu",null,1)(6,"button",48),v("click",function(){let r=C(t).$implicit,f=S();return E(f.viewPaper(r))}),a(7,"mat-icon"),o(8,"visibility"),n(),o(9),m(10,"translate"),n(),_(11,Ai,5,3,"button",49)(12,ki,5,3,"button",49),g(13,"mat-divider"),a(14,"button",48),v("click",function(){let r=C(t).$implicit,f=S();return E(f.onPermission(r))}),a(15,"mat-icon"),o(16,"security"),n(),o(17),m(18,"translate"),n(),a(19,"button",48),v("click",function(){let r=C(t).$implicit,f=S();return E(f.onVersionHistory(r))}),a(20,"mat-icon"),o(21,"history"),n(),o(22),m(23,"translate"),n(),a(24,"button",48),v("click",function(){let r=C(t).$implicit,f=S();return E(f.onComment(r))}),a(25,"mat-icon"),o(26,"chat"),n(),o(27),m(28,"translate"),n(),a(29,"button",48),v("click",function(){let r=C(t).$implicit,f=S();return E(f.onAuditTrail(r))}),a(30,"mat-icon"),o(31,"assessment"),n(),o(32),m(33,"translate"),n(),a(34,"button",48),v("click",function(){let r=C(t).$implicit,f=S();return E(f.onShareLink(r))}),a(35,"mat-icon"),o(36,"share"),n(),o(37),m(38,"translate"),n()()()}if(e&2){let t=G(5);i(),d("matMenuTriggerFor",t),i(8),c(" ",l(10,9,"VIEW")," "),i(2),d("appHasClaim","ALL_PAPERS_EDIT_PAPER"),i(),d("appHasClaim","ALL_PAPERS_DELETE_PAPER"),i(5),c(" ",l(18,11,"PERMISSIONS")," "),i(5),c(" ",l(23,13,"VERSION_HISTORY")," "),i(5),c(" ",l(28,15,"COMMENT")," "),i(5),c(" ",l(33,17,"AUDIT_TRAIL")," "),i(5),c(" ",l(38,19,"SHAREABLE_LINK")," ")}}function Bi(e,s){e&1&&(a(0,"th",50),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"NAME")," "))}function Ni(e,s){if(e&1&&(a(0,"td",46),o(1),n()),e&2){let t=s.$implicit;i(),c(" ",t.name," ")}}function Oi(e,s){e&1&&(a(0,"th",50),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"CATEGORY")," "))}function Vi(e,s){if(e&1&&(a(0,"td",46),o(1),n()),e&2){let t=s.$implicit;i(),c(" ",t.categoryName," ")}}function Ui(e,s){e&1&&(a(0,"th",50),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"CREATED_DATE")," "))}function Hi(e,s){if(e&1&&(a(0,"td",46),o(1),m(2,"date"),n()),e&2){let t=s.$implicit;i(),c(" ",Q(2,1,t.createdDate,"dd/MM/yyyy HH:mm")," ")}}function $i(e,s){e&1&&(a(0,"th",50),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"CLIENT")," "))}function ji(e,s){if(e&1&&(a(0,"td",46),o(1),n()),e&2){let t=s.$implicit;i(),c(" ",t.companyName," ")}}function Yi(e,s){e&1&&(a(0,"th",50),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"STATUS")," "))}function Gi(e,s){if(e&1&&(a(0,"td",46)(1,"span",51),o(2),n()()),e&2){let t=s.$implicit;i(),kt("background-color",t.colorCode),i(),u(t.statusName)}}function Qi(e,s){e&1&&(a(0,"th",50),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"CREATED_BY")," "))}function Wi(e,s){if(e&1&&(a(0,"td",46),o(1),n()),e&2){let t=s.$implicit;i(),c(" ",t.createdByName," ")}}function zi(e,s){e&1&&g(0,"tr",52)}function qi(e,s){if(e&1){let t=b();a(0,"tr",53),v("click",function(){let r=C(t).$implicit,f=S();return E(f.viewPaper(r))}),n()}}function Ki(e,s){e&1&&(a(0,"div",54),g(1,"mat-spinner"),n())}var Mt=(()=>{class e extends y{constructor(t,p,r,f,U,$,Ii){super(),this.paperService=t,this.translationService=p,this.toastrService=r,this.dialog=f,this.commonDialogService=U,this.router=$,this.route=Ii,this.displayedColumns=["action","name","categoryName","createdDate","companyName","statusName","createdBy"],this.selection=new Ot(!0,[]),this.isAssigned=!1,this.categoryStore=h(ut),this.clientStore=h(dt),this.documentStatusStore=h(ct),this.paperResource=new gt,this.paperResource.pageSize=10,this.paperResource.orderBy="createdDate desc"}ngOnInit(){this.isAssigned=this.route.snapshot.data.isAssigned||!1,this.dataSource=new St(this.paperService),this.loadData(),this.sub$.sink=this.translationService.lanDir$.subscribe(t=>this.direction=t)}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=Lt(this.sort.sortChange,this.paginator.page).pipe(bt(()=>{this.paperResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.paperResource.pageSize=this.paginator.pageSize,this.paperResource.orderBy=this.sort.active+" "+this.sort.direction,this.loadData()})).subscribe(),this.sub$.sink=wt(this.input.nativeElement,"keyup").pipe(Rt(1e3),At(),bt(()=>{this.paginator.pageIndex=0,this.paperResource.skip=0,this.paperResource.name=this.input.nativeElement.value,this.loadData()})).subscribe()}loadData(){this.isAssigned?this.dataSource.loadAssignedPapers(this.paperResource):this.dataSource.loadPapers(this.paperResource)}onCategoryChange(t){this.paperResource.categoryId=t==="0"?"":t,this.paginator.pageIndex=0,this.paperResource.skip=0,this.loadData()}onClientChange(t){this.paperResource.clientId=t==="0"?"":t,this.paginator.pageIndex=0,this.paperResource.skip=0,this.loadData()}onStatusChange(t){this.paperResource.statusId=t==="0"?"":t,this.paginator.pageIndex=0,this.paperResource.skip=0,this.loadData()}onComment(t){this.router.navigate(["/papers",t.id],{queryParams:{tab:"comment"}})}addPaper(){this.router.navigate(["/papers/manage"])}editPaper(t){this.router.navigate(["/papers/manage",t.id])}viewPaper(t){this.router.navigate(["/papers",t.id])}deletePaper(t){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`Are you sure you want to delete ${t.name}?`).subscribe(p=>{p&&(this.sub$.sink=this.paperService.deletePaper(t.id).subscribe(()=>{this.toastrService.success("Paper deleted successfully"),this.loadData()}))})}onShareLink(t){}onPermission(t){}onVersionHistory(t){}onAuditTrail(t){}static{this.\u0275fac=function(p){return new(p||e)(B(x),B(V),B(O),B(Te),B(ie),B(De),B(Ze))}}static{this.\u0275cmp=P({type:e,selectors:[["app-paper-list"]],viewQuery:function(p,r){if(p&1&&(ne(H,5),ne(he,5),ne(bi,5)),p&2){let f;re(f=oe())&&(r.paginator=f.first),re(f=oe())&&(r.sort=f.first),re(f=oe())&&(r.input=f.first)}},features:[D],decls:94,vars:48,consts:[["input",""],["menu","matMenu"],[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"page-title"],[1,"breadcrumb-list","list-unstyled"],[1,"breadcrumb-item","bcrumb-1"],[3,"routerLink"],[1,"fas","fa-home"],[1,"breadcrumb-item","active"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"row","margin-bottom-10"],[1,"col-md-3"],["mat-raised-button","","color","primary",3,"click",4,"appHasClaim"],[1,"col-md-9","text-right"],["appearance","outline",1,"example-full-width"],["matInput","",3,"placeholder"],["matSuffix",""],[3,"selectionChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","categoryName"],["matColumnDef","createdDate"],["matColumnDef","companyName"],["matColumnDef","statusName"],["matColumnDef","createdBy"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","cursor-pointer",3,"click",4,"matRowDef","matRowDefColumns"],["class","table-loading-shade",4,"ngIf"],[3,"length","pageSize","pageSizeOptions"],["mat-raised-button","","color","primary",3,"click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"appHasClaim"],["mat-header-cell","","mat-sort-header",""],[1,"label"],["mat-header-row",""],["mat-row","",1,"cursor-pointer",3,"click"],[1,"table-loading-shade"]],template:function(p,r){if(p&1){let f=b();a(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"h4",8),o(7),m(8,"translate"),n()(),a(9,"div",7)(10,"ul",9)(11,"li",10)(12,"a",11),g(13,"i",12),n()(),a(14,"li",13),o(15),m(16,"translate"),n()()()()()(),a(17,"div",6)(18,"div",14)(19,"div",15)(20,"div",16)(21,"div",17)(22,"div",18),_(23,Mi,5,3,"button",19),n(),a(24,"div",20)(25,"mat-form-field",21)(26,"mat-label"),o(27),m(28,"translate"),n(),g(29,"input",22,0),m(31,"translate"),a(32,"mat-icon",23),o(33,"search"),n()()()(),a(34,"div",17)(35,"div",18)(36,"mat-form-field",21)(37,"mat-label"),o(38),m(39,"translate"),n(),a(40,"mat-select",24),v("selectionChange",function($){return C(f),E(r.onCategoryChange($.value))}),a(41,"mat-option",25),o(42),m(43,"translate"),n(),_(44,yi,2,2,"mat-option",26),n()()(),a(45,"div",18)(46,"mat-form-field",21)(47,"mat-label"),o(48),m(49,"translate"),n(),a(50,"mat-select",24),v("selectionChange",function($){return C(f),E(r.onClientChange($.value))}),a(51,"mat-option",25),o(52),m(53,"translate"),n(),_(54,wi,2,2,"mat-option",26),n()()(),a(55,"div",18)(56,"mat-form-field",21)(57,"mat-label"),o(58),m(59,"translate"),n(),a(60,"mat-select",24),v("selectionChange",function($){return C(f),E(r.onStatusChange($.value))}),a(61,"mat-option",25),o(62),m(63,"translate"),n(),_(64,Li,2,2,"mat-option",26),n()()()(),a(65,"div",27)(66,"table",28),I(67,29),_(68,Ri,3,3,"th",30)(69,Fi,39,21,"td",31),T(),I(70,32),_(71,Bi,3,3,"th",33)(72,Ni,2,1,"td",31),T(),I(73,34),_(74,Oi,3,3,"th",33)(75,Vi,2,1,"td",31),T(),I(76,35),_(77,Ui,3,3,"th",33)(78,Hi,3,4,"td",31),T(),I(79,36),_(80,$i,3,3,"th",33)(81,ji,2,1,"td",31),T(),I(82,37),_(83,Yi,3,3,"th",33)(84,Gi,3,3,"td",31),T(),I(85,38),_(86,Qi,3,3,"th",33)(87,Wi,2,1,"td",31),T(),_(88,zi,1,0,"tr",39)(89,qi,1,0,"tr",40),n(),_(90,Ki,2,0,"div",41),m(91,"async"),g(92,"mat-paginator",42),m(93,"async"),n()()()()()()()}if(p&2){let f;i(7),u(l(8,22,r.isAssigned?"MY_PAPERS":"ALL_PAPERS")),i(5),d("routerLink",Se(46,Pi)),i(3),u(l(16,24,r.isAssigned?"MY_PAPERS":"ALL_PAPERS")),i(8),d("appHasClaim","ALL_PAPERS_CREATE_PAPER"),i(4),u(l(28,26,"SEARCH_PAPER")),i(2),j("placeholder",l(31,28,"SEARCH_PAPER")),i(9),u(l(39,30,"CATEGORY")),i(4),u(l(43,32,"ALL")),i(2),d("ngForOf",r.categoryStore.categories()),i(4),u(l(49,34,"CLIENT")),i(4),u(l(53,36,"ALL")),i(2),d("ngForOf",r.clientStore.clients()),i(4),u(l(59,38,"STATUS")),i(4),u(l(63,40,"ALL")),i(2),d("ngForOf",r.documentStatusStore.statusList()),i(2),d("dataSource",r.dataSource),i(22),d("matHeaderRowDef",r.displayedColumns),i(),d("matRowDefColumns",r.displayedColumns),i(),d("ngIf",l(91,42,r.dataSource.loading$)),i(2),d("length",(f=l(93,44,r.dataSource.responseHeader$))==null?null:f.totalCount)("pageSize",10)("pageSizeOptions",Se(47,Di))}},dependencies:[W,N,Ut,X,k,te,ee,Z,it,Gt,A,zt,Wt,qt,Fe,Ne,He,Oe,Be,$e,Ve,Ue,je,Ye,H,he,pt,ei,Vt,ni,Nt,z,w]})}}return e})();function Ji(e,s){e&1&&(a(0,"mat-error"),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"COMMENT_IS_REQUIRED")," "))}function Xi(e,s){if(e&1){let t=b();a(0,"tr")(1,"td"),o(2),n(),a(3,"td"),o(4),n(),a(5,"td"),o(6),m(7,"date"),n(),a(8,"td")(9,"button",13),v("click",function(){let r=C(t).$implicit,f=S();return E(f.onDelete(r.id))}),a(10,"mat-icon"),o(11,"delete"),n()()()()}if(e&2){let t=s.$implicit;i(2),u(t.comment),i(2),u(t.createdBy),i(2),u(Q(7,3,t.createdAt,"dd/MM/yyyy HH:mm"))}}function Zi(e,s){e&1&&(a(0,"tr")(1,"td",14),o(2),m(3,"translate"),n()()),e&2&&(i(2),u(l(3,1,"NO_DATA_FOUND")))}var ci=(()=>{class e extends y{constructor(){super(...arguments),this.paperId="",this.shouldLoad=!1,this.paperComments=[],this.fb=h(Ht),this.paperService=h(x),this.commonDialogService=h(ie),this.translationService=h(V),this.toastrService=h(O)}ngOnInit(){this.createForm()}ngOnChanges(t){t.shouldLoad&&this.shouldLoad&&this.paperId&&this.getPaperComments()}createForm(){this.commentForm=this.fb.group({comment:["",[le.required]]})}getPaperComments(){this.paperService.getComments(this.paperId).subscribe(t=>{this.paperComments=t})}addComment(){if(this.commentForm.invalid){this.commentForm.markAllAsTouched();return}let t={paperId:this.paperId,comment:this.commentForm.get("comment").value};this.paperService.addComment(t).subscribe(()=>{this.commentForm.patchValue({comment:""}),this.commentForm.markAsUntouched(),this.getPaperComments()})}onDelete(t){this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(p=>{p&&this.paperService.deleteComment(t).subscribe(()=>{this.toastrService.success(this.translationService.getValue("COMMENT_DELETED_SUCCESSFULLY")),this.getPaperComments()})})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Y(e)))(r||e)}})()}static{this.\u0275cmp=P({type:e,selectors:[["app-paper-comments"]],inputs:{paperId:"paperId",shouldLoad:"shouldLoad"},standalone:!0,features:[D,pe,R],decls:38,vars:22,consts:[[1,"row"],[1,"col-md-12"],[3,"ngSubmit","formGroup"],[1,"col-md-10"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","comment"],[4,"ngIf"],[1,"col-md-2","p-t-15"],["mat-raised-button","","color","primary","type","submit"],[1,"row","m-t-20"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["mat-icon-button","","color","warn",3,"click"],["colspan","4",1,"text-center"]],template:function(p,r){p&1&&(a(0,"div",0)(1,"div",1)(2,"form",2),v("ngSubmit",function(){return r.addComment()}),a(3,"div",0)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),o(7),m(8,"translate"),n(),g(9,"textarea",5),_(10,Ji,3,3,"mat-error",6),n()(),a(11,"div",7)(12,"button",8)(13,"mat-icon"),o(14,"add"),n(),o(15),m(16,"translate"),n()()()()()(),a(17,"div",9)(18,"div",1)(19,"div",10)(20,"table",11)(21,"thead")(22,"tr")(23,"th"),o(24),m(25,"translate"),n(),a(26,"th"),o(27),m(28,"translate"),n(),a(29,"th"),o(30),m(31,"translate"),n(),a(32,"th"),o(33),m(34,"translate"),n()()(),a(35,"tbody"),_(36,Xi,12,6,"tr",12)(37,Zi,4,3,"tr",6),n()()()()()),p&2&&(i(2),d("formGroup",r.commentForm),i(5),u(l(8,10,"COMMENT")),i(3),d("ngIf",r.commentForm.get("comment").hasError("required")),i(5),c(" ",l(16,12,"ADD")," "),i(9),u(l(25,14,"COMMENT")),i(3),u(l(28,16,"CREATED_BY")),i(3),u(l(31,18,"CREATED_DATE")),i(3),u(l(34,20,"ACTION")),i(3),d("ngForOf",r.paperComments),i(),d("ngIf",r.paperComments.length===0))},dependencies:[M,W,N,z,L,w,F,et,me,se,de,ce,ue,X,k,te,ee,Z,_e,A,K]})}}return e})();function ta(e,s){if(e&1){let t=b();a(0,"tr")(1,"td"),o(2),n(),a(3,"td"),o(4),n(),a(5,"td"),o(6),m(7,"date"),n(),a(8,"td")(9,"button",6),m(10,"translate"),v("click",function(){let r=C(t).$implicit,f=S();return E(f.restoreVersion(r))}),a(11,"mat-icon"),o(12,"restore"),n()()()()}if(e&2){let t=s.$implicit,p=s.index,r=S();i(2),c("v",r.paperVersions.length-p,""),i(2),u(t.createdBy),i(2),u(Q(7,4,t.createdAt,"dd/MM/yyyy HH:mm")),i(3),j("matTooltip",l(10,7,"RESTORE"))}}function ia(e,s){e&1&&(a(0,"tr")(1,"td",7),o(2),m(3,"translate"),n()()),e&2&&(i(2),u(l(3,1,"NO_DATA_FOUND")))}var ui=(()=>{class e extends y{constructor(){super(...arguments),this.paperId="",this.shouldLoad=!1,this.paperVersions=[],this.paperService=h(x),this.toastrService=h(O),this.translationService=h(V),this.commandDialogService=h(ie)}ngOnChanges(t){t.shouldLoad&&this.shouldLoad&&this.paperId&&this.getPaperVersions()}getPaperVersions(){this.paperService.getVersions(this.paperId).subscribe(t=>{this.paperVersions=t})}restoreVersion(t){this.commandDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_RESTORE_THIS_TO_CURRENT_VERSION")}?`).subscribe(p=>{p&&this.paperService.restoreVersion(t.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("VERSION_RESTORED_SUCCESSFULLY")),this.getPaperVersions()})})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Y(e)))(r||e)}})()}static{this.\u0275cmp=P({type:e,selectors:[["app-paper-versions"]],inputs:{paperId:"paperId",shouldLoad:"shouldLoad"},standalone:!0,features:[D,pe,R],decls:21,vars:14,consts:[[1,"row"],[1,"col-md-12"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-icon-button","","color","primary",3,"click","matTooltip"],["colspan","4",1,"text-center"]],template:function(p,r){p&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead")(5,"tr")(6,"th"),o(7),m(8,"translate"),n(),a(9,"th"),o(10),m(11,"translate"),n(),a(12,"th"),o(13),m(14,"translate"),n(),a(15,"th"),o(16),m(17,"translate"),n()()(),a(18,"tbody"),_(19,ta,13,9,"tr",4)(20,ia,4,3,"tr",5),n()()()()()),p&2&&(i(7),u(l(8,6,"VERSION")),i(3),u(l(11,8,"CREATED_BY")),i(3),u(l(14,10,"CREATED_DATE")),i(3),u(l(17,12,"ACTION")),i(3),d("ngForOf",r.paperVersions),i(),d("ngIf",r.paperVersions.length===0))},dependencies:[M,W,N,z,L,w,J,A,F,k,Xe]})}}return e})();var aa=()=>[5,10,20];function na(e,s){e&1&&(a(0,"th",14),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"DATE_TIME")," "))}function ra(e,s){if(e&1&&(a(0,"td",15),o(1),m(2,"date"),n()),e&2){let t=s.$implicit;i(),c(" ",Q(2,1,t.createdAt,"dd/MM/yyyy HH:mm")," ")}}function oa(e,s){e&1&&(a(0,"th",14),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"OPERATION")," "))}function pa(e,s){if(e&1&&(a(0,"td",15),o(1),n()),e&2){let t=s.$implicit;i(),c(" ",t.operationName," ")}}function ma(e,s){e&1&&(a(0,"th",14),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"BY_WHOM")," "))}function la(e,s){if(e&1&&(a(0,"td",15),o(1),n()),e&2){let t=s.$implicit;i(),c(" ",t.createdBy," ")}}function sa(e,s){e&1&&(a(0,"th",14),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"TO_WHOM_USER")," "))}function da(e,s){if(e&1&&(a(0,"td",15),o(1),n()),e&2){let t=s.$implicit;i(),c(" ",t.permissionUser," ")}}function ca(e,s){e&1&&(a(0,"th",14),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"TO_WHOM_ROLE")," "))}function ua(e,s){if(e&1&&(a(0,"td",15),o(1),n()),e&2){let t=s.$implicit;i(),c(" ",t.permissionRole," ")}}function fa(e,s){e&1&&g(0,"tr",16)}function _a(e,s){e&1&&g(0,"tr",17)}var fi=(()=>{class e extends y{constructor(){super(...arguments),this.paperId="",this.shouldLoad=!1,this.dataSource=new vt,this.displayedColumns=["createdDate","operationName","createdBy","permissionUser","permissionRole"],this.paperService=h(x)}ngOnInit(){}ngOnChanges(t){t.shouldLoad&&this.shouldLoad&&this.paperId&&this.getAuditTrails()}getAuditTrails(){this.paperService.getAuditTrails(this.paperId).subscribe(t=>{this.dataSource.data=t,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Y(e)))(r||e)}})()}static{this.\u0275cmp=P({type:e,selectors:[["app-paper-audit-trail"]],viewQuery:function(p,r){if(p&1&&(ne(H,5),ne(he,5)),p&2){let f;re(f=oe())&&(r.paginator=f.first),re(f=oe())&&(r.sort=f.first)}},inputs:{paperId:"paperId",shouldLoad:"shouldLoad"},standalone:!0,features:[D,pe,R],decls:22,vars:5,consts:[[1,"row"],[1,"col-md-12"],[1,"table-responsive"],["mat-table","","matSort","",1,"mat-elevation-z8","w-100",3,"dataSource"],["matColumnDef","createdDate"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","operationName"],["matColumnDef","createdBy"],["matColumnDef","permissionUser"],["matColumnDef","permissionRole"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(p,r){p&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3),I(4,4),_(5,na,3,3,"th",5)(6,ra,3,4,"td",6),T(),I(7,7),_(8,oa,3,3,"th",5)(9,pa,2,1,"td",6),T(),I(10,8),_(11,ma,3,3,"th",5)(12,la,2,1,"td",6),T(),I(13,9),_(14,sa,3,3,"th",5)(15,da,2,1,"td",6),T(),I(16,10),_(17,ca,3,3,"th",5)(18,ua,2,1,"td",6),T(),_(19,fa,1,0,"tr",11)(20,_a,1,0,"tr",12),n(),g(21,"mat-paginator",13),n()()()),p&2&&(i(3),d("dataSource",r.dataSource),i(16),d("matHeaderRowDef",r.displayedColumns),i(),d("matRowDefColumns",r.displayedColumns),i(),d("pageSizeOptions",Se(4,aa)))},dependencies:[M,z,L,w,Yt,Ge,Fe,Ne,He,Oe,Be,$e,Ve,Ue,je,Ye,ke,H,mt,he,pt]})}}return e})();function ga(e,s){if(e&1&&(a(0,"ng-option",23),o(1),n()),e&2){let t=s.$implicit;d("value",t),i(),Ft("",t.firstName," ",t.lastName,"")}}function Ca(e,s){e&1&&(a(0,"mat-error"),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"START_DATE_IS_REQURED")," "))}function Ea(e,s){e&1&&(a(0,"mat-error"),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"END_DATE_IS_REQURED")," "))}function xa(e,s){if(e&1&&(a(0,"div",16)(1,"div",24)(2,"mat-form-field",25)(3,"mat-label"),o(4),m(5,"translate"),n(),g(6,"input",26)(7,"owl-date-time",null,0),_(9,Ca,3,3,"mat-error",27),n()(),a(10,"div",24)(11,"mat-form-field",25)(12,"mat-label"),o(13),m(14,"translate"),n(),g(15,"input",28)(16,"owl-date-time",null,1),_(18,Ea,3,3,"mat-error",27),n()()()),e&2){let t=G(8),p=G(17),r=S();i(4),u(l(5,10,"CHOOSE_A_START_DATE")),i(2),d("min",r.minDate)("owlDateTimeTrigger",t)("owlDateTime",t),i(3),d("ngIf",r.permissionForm.get("startDate").touched&&r.permissionForm.get("startDate").hasError("required")),i(4),u(l(14,12,"CHOOSE_A_END_DATE")),i(2),d("min",r.permissionForm.get("startDate").value||r.minDate)("owlDateTimeTrigger",p)("owlDateTime",p),i(3),d("ngIf",r.permissionForm.get("endDate").touched&&r.permissionForm.get("endDate").hasError("required"))}}var hi=(()=>{class e extends y{constructor(t){super(),this.data=t,this.paperService=h(x),this.toastrService=h(O),this.fb=h(Me),this.translationService=h(V),this.dialogRef=h(xe),this.minDate=new Date}ngOnInit(){this.createUserPermissionForm()}closeDialog(){this.dialogRef.close()}createUserPermissionForm(){this.permissionForm=this.fb.group({isTimeBound:new q(!1),startDate:[""],endDate:[""],isAllowDownload:new q(!1),selectedUsers:[]})}timeBoundChange(t){t.checked?(this.permissionForm.get("startDate").setValidators([le.required]),this.permissionForm.get("endDate").setValidators([le.required])):(this.permissionForm.get("startDate").clearValidators(),this.permissionForm.get("startDate").updateValueAndValidity(),this.permissionForm.get("endDate").clearValidators(),this.permissionForm.get("endDate").updateValueAndValidity())}savePaperUserPermission(){if(!this.permissionForm.valid){this.permissionForm.markAllAsTouched();return}let t=this.permissionForm.get("selectedUsers").value??[];if(t?.length==0){this.toastrService.error(this.translationService.getValue("PLEASE_SELECT_ATLEAST_ONE_USER"));return}let p=t.map(r=>We(Qe({},this.permissionForm.value),{id:"",paperId:this.data.paperId,userId:r.id}));this.paperService.addUserPermission(p).subscribe(()=>{this.toastrService.success(this.translationService.getValue("PERMISSION_ADDED_SUCCESSFULLY")),this.dialogRef.close(!0)})}onNoClick(){this.dialogRef.close()}static{this.\u0275fac=function(p){return new(p||e)(B(Ie))}}static{this.\u0275cmp=P({type:e,selectors:[["app-manage-paper-user-permission"]],standalone:!0,features:[D,R],decls:38,vars:22,consts:[["date1",""],["date2",""],[1,"modalHeader"],[1,"editRowModal"],[1,"title"],["mat-icon-button","","aria-label","Close dialog",1,"modal-close-button",3,"click"],["color","warn"],["mat-dialog-content","",3,"formGroup"],[1,"row"],[1,"form-group","col-md-12"],["formControlName","selectedUsers",3,"multiple"],[3,"value",4,"ngFor","ngForOf"],[1,"row","m-t-15"],[1,"col-md-12"],["color","primary","formControlName","isTimeBound",3,"change"],["class","row m-t-10",4,"ngIf"],[1,"row","m-t-10"],["color","primary","formControlName","isAllowDownload"],["mat-dialog-actions","",1,"m-r-10"],[1,"btn","btn-success","btn-sm","m-r-10",3,"click"],["name","save",1,"small-icon"],[1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],[3,"value"],[1,"col-md-6"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","startDate",3,"min","owlDateTimeTrigger","owlDateTime"],[4,"ngIf"],["matInput","","formControlName","endDate",3,"min","owlDateTimeTrigger","owlDateTime"]],template:function(p,r){p&1&&(a(0,"div",2)(1,"div",3)(2,"div",2)(3,"div",4)(4,"h2"),o(5),m(6,"translate"),n()()()(),a(7,"button",5),v("click",function(){return r.closeDialog()}),a(8,"mat-icon",6),o(9,"close"),n()()(),a(10,"div",7)(11,"div",8)(12,"div",9)(13,"label"),o(14),m(15,"translate"),n(),a(16,"ng-select",10),_(17,ga,2,3,"ng-option",11),n()()(),a(18,"div",12)(19,"div",13)(20,"mat-checkbox",14),v("change",function(U){return r.timeBoundChange(U)}),o(21),m(22,"translate"),n()()(),_(23,xa,19,14,"div",15),a(24,"div",16)(25,"div",13)(26,"mat-checkbox",17),o(27),m(28,"translate"),n()()()(),a(29,"div",18)(30,"button",19),v("click",function(){return r.savePaperUserPermission()}),g(31,"i-feather",20),o(32),m(33,"translate"),n(),a(34,"button",21),v("click",function(){return r.onNoClick()}),g(35,"i-feather",22),o(36),m(37,"translate"),n()()),p&2&&(i(5),u(l(6,10,"USER_PERMISSION")),i(5),d("formGroup",r.permissionForm),i(4),u(l(15,12,"USERS")),i(2),d("multiple",!0),i(),d("ngForOf",r.data.users),i(4),c(" ",l(22,14,"SPACIFY_THE_PERIOD")," "),i(2),d("ngIf",r.permissionForm.get("isTimeBound").value),i(4),u(l(28,16,"ALLOW_DOWNLOAD")),i(5),c(" ",l(33,18,"SAVE")," "),i(4),c(" ",l(37,20,"CANCEL")," "))},dependencies:[M,W,N,L,w,F,me,se,de,ce,ue,k,te,ee,Z,_e,A,tt,K,Pe,Je,be,st,lt,J,fe,ht,_t,ft,Re,ye,Le,we,Ae,rt]})}}return e})();function Ia(e,s){if(e&1&&(a(0,"ng-option",23),o(1),n()),e&2){let t=s.$implicit;d("value",t),i(),u(t.name)}}function Ta(e,s){e&1&&(a(0,"mat-error"),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"START_DATE_IS_REQURED")," "))}function ba(e,s){e&1&&(a(0,"mat-error"),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"END_DATE_IS_REQURED")," "))}function Pa(e,s){if(e&1&&(a(0,"div",16)(1,"div",24)(2,"mat-form-field",25)(3,"mat-label"),o(4),m(5,"translate"),n(),g(6,"input",26)(7,"owl-date-time",null,0),_(9,Ta,3,3,"mat-error",27),n()(),a(10,"div",24)(11,"mat-form-field",25)(12,"mat-label"),o(13),m(14,"translate"),n(),g(15,"input",28)(16,"owl-date-time",null,1),_(18,ba,3,3,"mat-error",27),n()()()),e&2){let t=G(8),p=G(17),r=S();i(4),u(l(5,10,"CHOOSE_A_START_DATE")),i(2),d("min",r.minDate)("owlDateTimeTrigger",t)("owlDateTime",t),i(3),d("ngIf",r.permissionForm.get("startDate").touched&&r.permissionForm.get("startDate").hasError("required")),i(4),u(l(14,12,"CHOOSE_A_END_DATE")),i(2),d("min",r.permissionForm.get("startDate").value||r.minDate)("owlDateTimeTrigger",p)("owlDateTime",p),i(3),d("ngIf",r.permissionForm.get("endDate").touched&&r.permissionForm.get("endDate").hasError("required"))}}var vi=(()=>{class e extends y{constructor(t){super(),this.data=t,this.paperService=h(x),this.toastrService=h(O),this.fb=h(Me),this.translationService=h(V),this.dialogRef=h(xe),this.minDate=new Date}ngOnInit(){this.createRolePermissionForm()}closeDialog(){this.dialogRef.close()}createRolePermissionForm(){this.permissionForm=this.fb.group({isTimeBound:new q(!1),startDate:[""],endDate:[""],isAllowDownload:new q(!1),selectedRoles:[]})}timeBoundChange(t){t.checked?(this.permissionForm.get("startDate").setValidators([le.required]),this.permissionForm.get("endDate").setValidators([le.required])):(this.permissionForm.get("startDate").clearValidators(),this.permissionForm.get("startDate").updateValueAndValidity(),this.permissionForm.get("endDate").clearValidators(),this.permissionForm.get("endDate").updateValueAndValidity())}savePaperRolePermission(){if(!this.permissionForm.valid){this.permissionForm.markAllAsTouched();return}let t=this.permissionForm.get("selectedRoles").value??[];if(t?.length==0){this.toastrService.error(this.translationService.getValue("PLEASE_SELECT_ATLEAST_ONE_ROLE"));return}let p=t.map(r=>We(Qe({},this.permissionForm.value),{id:"",paperId:this.data.paperId,roleId:r.id}));this.paperService.addRolePermission(p).subscribe(()=>{this.toastrService.success(this.translationService.getValue("PERMISSION_ADDED_SUCCESSFULLY")),this.dialogRef.close(!0)})}onNoClick(){this.dialogRef.close()}static{this.\u0275fac=function(p){return new(p||e)(B(Ie))}}static{this.\u0275cmp=P({type:e,selectors:[["app-manage-paper-role-permission"]],standalone:!0,features:[D,R],decls:38,vars:22,consts:[["date1",""],["date2",""],[1,"modalHeader"],[1,"editRowModal"],[1,"title"],["mat-icon-button","","aria-label","Close dialog",1,"modal-close-button",3,"click"],["color","warn"],["mat-dialog-content","",3,"formGroup"],[1,"row"],[1,"form-group","col-md-12"],["formControlName","selectedRoles",3,"multiple"],[3,"value",4,"ngFor","ngForOf"],[1,"row","m-t-15"],[1,"col-md-12"],["color","primary","formControlName","isTimeBound",3,"change"],["class","row m-t-10",4,"ngIf"],[1,"row","m-t-10"],["color","primary","formControlName","isAllowDownload"],["mat-dialog-actions","",1,"m-r-10"],[1,"btn","btn-success","btn-sm","m-r-10",3,"click"],["name","save",1,"small-icon"],[1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],[3,"value"],[1,"col-md-6"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","startDate",3,"min","owlDateTimeTrigger","owlDateTime"],[4,"ngIf"],["matInput","","formControlName","endDate",3,"min","owlDateTimeTrigger","owlDateTime"]],template:function(p,r){p&1&&(a(0,"div",2)(1,"div",3)(2,"div",2)(3,"div",4)(4,"h2"),o(5),m(6,"translate"),n()()()(),a(7,"button",5),v("click",function(){return r.closeDialog()}),a(8,"mat-icon",6),o(9,"close"),n()()(),a(10,"div",7)(11,"div",8)(12,"div",9)(13,"label"),o(14),m(15,"translate"),n(),a(16,"ng-select",10),_(17,Ia,2,2,"ng-option",11),n()()(),a(18,"div",12)(19,"div",13)(20,"mat-checkbox",14),v("change",function(U){return r.timeBoundChange(U)}),o(21),m(22,"translate"),n()()(),_(23,Pa,19,14,"div",15),a(24,"div",16)(25,"div",13)(26,"mat-checkbox",17),o(27),m(28,"translate"),n()()()(),a(29,"div",18)(30,"button",19),v("click",function(){return r.savePaperRolePermission()}),g(31,"i-feather",20),o(32),m(33,"translate"),n(),a(34,"button",21),v("click",function(){return r.onNoClick()}),g(35,"i-feather",22),o(36),m(37,"translate"),n()()),p&2&&(i(5),u(l(6,10,"ROLE_PERMISSION")),i(5),d("formGroup",r.permissionForm),i(4),u(l(15,12,"ROLES")),i(2),d("multiple",!0),i(),d("ngForOf",r.data.roles),i(4),c(" ",l(22,14,"SPACIFY_THE_PERIOD")," "),i(2),d("ngIf",r.permissionForm.get("isTimeBound").value),i(4),u(l(28,16,"ALLOW_DOWNLOAD")),i(5),c(" ",l(33,18,"SAVE")," "),i(4),c(" ",l(37,20,"CANCEL")," "))},dependencies:[M,W,N,L,w,F,me,se,de,ce,ue,k,te,ee,Z,_e,A,tt,K,Pe,Je,be,st,lt,J,fe,ht,_t,ft,Re,ye,Le,we,Ae,rt]})}}return e})();var Da=()=>[5,10,20];function Ma(e,s){e&1&&(a(0,"th",16),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"ACTION")," "))}function ya(e,s){if(e&1){let t=b();a(0,"td",17)(1,"button",18),v("click",function(){let r=C(t).$implicit,f=S();return E(r.type==="User"?f.deleteUserPermission(r):f.deleteRolePermission(r))}),a(2,"mat-icon"),o(3,"delete"),n()()()}}function wa(e,s){e&1&&(a(0,"th",16),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"TYPE")," "))}function La(e,s){if(e&1&&(a(0,"td",17),o(1),n()),e&2){let t=s.$implicit;i(),c(" ",t.type," ")}}function Ra(e,s){e&1&&(a(0,"th",16),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"NAME")," "))}function Aa(e,s){if(e&1&&(a(0,"td",17),o(1),n()),e&2){let t=s.$implicit;i(),c(" ",t.name," ")}}function ka(e,s){e&1&&(a(0,"th",16),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"EMAIL")," "))}function Fa(e,s){if(e&1&&(a(0,"td",17),o(1),n()),e&2){let t=s.$implicit;i(),c(" ",t.email||"-"," ")}}function Ba(e,s){e&1&&g(0,"tr",19)}function Na(e,s){e&1&&g(0,"tr",20)}var Si=(()=>{class e extends y{constructor(){super(...arguments),this.shouldLoad=!1,this.displayedColumns=["action","type","name","email"],this.paperService=h(x),this.commonDialogService=h(ie),this.translationService=h(V),this.toastrService=h(O),this.commonService=h(jt),this.dialog=h(Te)}ngOnChanges(t){t.shouldLoad&&this.shouldLoad&&this.paperId&&this.getPaperPermissions()}getPaperPermissions(){this.paperService.getPermissions(this.paperId).subscribe(t=>{this.permissionsDataSource=new vt(t),this.permissionsDataSource.paginator=this.paginator})}deleteUserPermission(t){this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(p=>{p&&this.paperService.deleteUserPermission(t.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("PERMISSION_DELETED_SUCCESSFULLY")),this.getPaperPermissions()})})}deleteRolePermission(t){this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(p=>{p&&this.paperService.deleteRolePermission(t.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("PERMISSION_DELETED_SUCCESSFULLY")),this.getPaperPermissions()})})}addPaperUserPermission(){this.commonService.getUsersForDropdown().subscribe(t=>{this.dialog.open(hi,{width:"600px",data:{users:t,paperId:this.paperId}}).afterClosed().subscribe(r=>{r&&this.getPaperPermissions()})})}addPaperRolePermission(){this.commonService.getRolesForDropdown().subscribe(t=>{this.dialog.open(vi,{width:"600px",data:{roles:t,paperId:this.paperId}}).afterClosed().subscribe(r=>{r&&this.getPaperPermissions()})})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Y(e)))(r||e)}})()}static{this.\u0275cmp=P({type:e,selectors:[["app-paper-permissions"]],viewQuery:function(p,r){if(p&1&&ne(H,5),p&2){let f;re(f=oe())&&(r.paginator=f.first)}},inputs:{paperId:"paperId",shouldLoad:"shouldLoad"},standalone:!0,features:[D,pe,R],decls:31,vars:11,consts:[[1,"row"],[1,"col-md-12"],[1,"row","m-b-10"],["mat-raised-button","","color","primary",1,"m-r-10",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"table-responsive"],["mat-table","",1,"mat-elevation-z8","w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","name"],["matColumnDef","email"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(p,r){p&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1)(4,"button",3),v("click",function(){return r.addPaperUserPermission()}),a(5,"mat-icon"),o(6,"person_add"),n(),o(7),m(8,"translate"),n(),a(9,"button",4),v("click",function(){return r.addPaperRolePermission()}),a(10,"mat-icon"),o(11,"group_add"),n(),o(12),m(13,"translate"),n()()(),a(14,"div",5)(15,"table",6),I(16,7),_(17,Ma,3,3,"th",8)(18,ya,4,0,"td",9),T(),I(19,10),_(20,wa,3,3,"th",8)(21,La,2,1,"td",9),T(),I(22,11),_(23,Ra,3,3,"th",8)(24,Aa,2,1,"td",9),T(),I(25,12),_(26,ka,3,3,"th",8)(27,Fa,2,1,"td",9),T(),_(28,Ba,1,0,"tr",13)(29,Na,1,0,"tr",14),n(),g(30,"mat-paginator",15),n()()()),p&2&&(i(7),c(" ",l(8,6,"ASSIGN_SHARE_WITH_USERS")," "),i(5),c(" ",l(13,8,"ASSIGN_SHARE_WITH_ROLES")," "),i(3),d("dataSource",r.permissionsDataSource),i(13),d("matHeaderRowDef",r.displayedColumns),i(),d("matRowDefColumns",r.displayedColumns),i(),d("pageSizeOptions",Se(10,Da)))},dependencies:[M,Ge,Fe,Ne,He,Oe,Be,$e,Ve,Ue,je,Ye,L,w,ke,H,F,X,k,A]})}}return e})();function Oa(e,s){if(e&1){let t=b();a(0,"div",8)(1,"div",9)(2,"mat-form-field",10)(3,"mat-label"),o(4),m(5,"translate"),n(),g(6,"input",11),a(7,"button",12)(8,"mat-icon"),o(9,"content_copy"),n()()()(),a(10,"div",13)(11,"button",14),v("click",function(){C(t);let r=S();return E(r.isResetLink=!0)}),o(12),m(13,"translate"),n(),a(14,"button",15),v("click",function(){C(t);let r=S();return E(r.deleteLink())}),o(15),m(16,"translate"),n()()()}if(e&2){let t=S();i(4),u(l(5,4,"SHAREABLE_LINK")),i(3),d("cdkCopyToClipboard",t.paperLinkForm.get("linkCode").value),i(5),c(" ",l(13,6,"UPDATE_LINK")," "),i(3),c(" ",l(16,8,"DELETE")," ")}}function Va(e,s){e&1&&(a(0,"mat-error"),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"EXPIRY_DATE_IS_REQURED")," "))}function Ua(e,s){if(e&1&&(a(0,"div",16)(1,"mat-form-field",10)(2,"mat-label"),o(3),m(4,"translate"),n(),g(5,"input",26)(6,"owl-date-time",null,0),_(8,Va,3,3,"mat-error",27),n()()),e&2){let t=G(7),p=S(2);i(3),u(l(4,5,"IS_LINK_VALID_UNTIL")),i(2),d("min",p.minDate)("owlDateTimeTrigger",t)("owlDateTime",t),i(3),d("ngIf",p.paperLinkForm.hasError("linkExpiryTimeValidator"))}}function Ha(e,s){e&1&&(a(0,"mat-error"),o(1),m(2,"translate"),n()),e&2&&(i(),c(" ",l(2,1,"PASSWORD_IS_REQUIRED")," "))}function $a(e,s){if(e&1&&(a(0,"div",16)(1,"mat-form-field",10)(2,"mat-label"),o(3),m(4,"translate"),n(),g(5,"input",28),_(6,Ha,3,3,"mat-error",27),n()()),e&2){let t=S(2);i(3),u(l(4,2,"PASSWORD")),i(3),d("ngIf",t.paperLinkForm.hasError("passwordValidator"))}}function ja(e,s){if(e&1){let t=b();a(0,"button",29),v("click",function(){C(t);let r=S(2);return E(r.isResetLink=!1)}),o(1),m(2,"translate"),n()}e&2&&(i(),c(" ",l(2,1,"CANCEL")," "))}function Ya(e,s){if(e&1){let t=b();a(0,"div",8)(1,"div",9)(2,"div",8)(3,"div",16)(4,"mat-slide-toggle",17),o(5),m(6,"translate"),n()(),_(7,Ua,9,7,"div",18),n(),a(8,"div",19)(9,"div",16)(10,"mat-slide-toggle",20),o(11),m(12,"translate"),n()(),_(13,$a,7,4,"div",18),n(),a(14,"div",19)(15,"div",9)(16,"mat-slide-toggle",21),o(17),m(18,"translate"),n()()(),a(19,"div",22)(20,"div",23)(21,"button",24),v("click",function(){C(t);let r=S();return E(r.createLink())}),o(22),m(23,"translate"),n(),_(24,ja,3,3,"button",25),n()()()()}if(e&2){let t=S();i(5),u(l(6,7,"LINK_EXPIRATION")),i(2),d("ngIf",t.paperLinkForm.get("isLinkExpiryTime").value),i(4),u(l(12,9,"PASSWORD_PROTECTION")),i(2),d("ngIf",t.paperLinkForm.get("isPassword").value),i(4),u(l(18,11,"USERS_WITH_LINK_CAN_DOWNLOAD_THIS_ITEM")),i(5),c(" ",l(23,13,t.isEditMode?"UPDATE_LINK":"CREATE_LINK")," "),i(2),d("ngIf",t.isEditMode)}}var gi=(()=>{class e extends y{constructor(t){super(),this.data=t,this.isEditMode=!1,this.isResetLink=!1,this.minDate=new Date,this.baseUrl=`${window.location.protocol}//${window.location.host}/papers/preview/`,this.fb=h(Me),this.paperService=h(x),this.toastrService=h(O),this.commonDialogService=h(ie),this.translationService=h(V),this.dialogRef=h(xe)}ngOnInit(){this.createPaperLinkForm(),this.data.link&&this.data.link.id&&(this.isEditMode=!0,this.patchValue())}patchValue(){this.paperLinkForm.patchValue(this.data.link),this.paperLinkForm.get("linkCode").setValue(`${this.baseUrl}${this.data.link.linkCode}`),this.data.link.linkExpiryTime&&this.paperLinkForm.get("isLinkExpiryTime").setValue(!0),this.data.link.password&&this.paperLinkForm.get("isPassword").setValue(!0)}createPaperLinkForm(){this.paperLinkForm=this.fb.group({id:[""],isLinkExpiryTime:new q(!1),linkExpiryTime:[""],isPassword:new q(!1),password:[""],linkCode:[""],isAllowDownload:new q(!1)},{validator:this.checkData})}checkData(t){let p=t.get("isLinkExpiryTime").value,r=t.get("linkExpiryTime").value,f=t.get("isPassword").value,U=t.get("password").value,$={};return p&&!r&&($.linkExpiryTimeValidator=!0),f&&!U&&($.passwordValidator=!0),$}createLink(){if(!this.paperLinkForm.valid){this.paperLinkForm.markAllAsTouched();return}let t=this.createBuildObject();this.paperService.saveShareLink(t).subscribe(p=>{this.toastrService.success(this.translationService.getValue("LINK_GENERATED_SUCCESSFULLY")),this.data.link=p,this.isEditMode=!0,this.isResetLink=!1,this.patchValue()})}deleteLink(){this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(t=>{t&&this.paperService.deleteShareLink(this.data.link.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("DOCUMENT_LINK_DELETED_SUCCESSFULLY")),this.dialogRef.close(!0)})})}createBuildObject(){let t=this.paperLinkForm.get("id").value,p=this.paperLinkForm.get("linkCode").value;return p&&(p=p.replace(this.baseUrl,"")),{id:t,paperId:this.data.paper.id,isAllowDownload:this.paperLinkForm.get("isAllowDownload").value,password:this.paperLinkForm.get("isPassword").value?this.paperLinkForm.get("password").value:"",linkExpiryTime:this.paperLinkForm.get("isLinkExpiryTime").value?this.paperLinkForm.get("linkExpiryTime").value:"",linkCode:p}}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(p){return new(p||e)(B(Ie))}}static{this.\u0275cmp=P({type:e,selectors:[["app-paper-shareable-link"]],standalone:!0,features:[D,R],decls:14,vars:6,consts:[["dt1",""],[1,"modalHeader"],[1,"editRowModal"],[1,"title"],["mat-icon-button","","aria-label","Close dialog",1,"modal-close-button",3,"click"],["mat-dialog-content",""],[3,"formGroup"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","linkCode","readonly",""],["mat-icon-button","","matSuffix","",3,"cdkCopyToClipboard"],[1,"col-md-12","text-center","m-b-10"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"],[1,"col-md-6"],["formControlName","isLinkExpiryTime"],["class","col-md-6",4,"ngIf"],[1,"row","m-t-15"],["formControlName","isPassword"],["formControlName","isAllowDownload"],[1,"row","m-t-20"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"click"],["mat-button","",3,"click",4,"ngIf"],["matInput","","formControlName","linkExpiryTime",3,"min","owlDateTimeTrigger","owlDateTime"],[4,"ngIf"],["matInput","","formControlName","password","type","password"],["mat-button","",3,"click"]],template:function(p,r){p&1&&(a(0,"div",1)(1,"div",2)(2,"div",1)(3,"div",3)(4,"h2"),o(5),m(6,"translate"),n()()()(),a(7,"button",4),v("click",function(){return r.closeDialog()}),a(8,"mat-icon"),o(9,"close"),n()()(),a(10,"div",5)(11,"form",6),_(12,Oa,17,10,"div",7)(13,Ya,25,15,"div",7),n()()),p&2&&(i(5),u(l(6,4,"SHAREABLE_LINK")),i(6),d("formGroup",r.paperLinkForm),i(),d("ngIf",r.isEditMode&&!r.isResetLink),i(),d("ngIf",!r.isEditMode||r.isResetLink))},dependencies:[M,N,L,w,F,et,me,se,de,ce,ue,X,k,te,ee,Z,_e,it,A,Jt,K,Pe,be,J,fe,nt,at,Xt,Re,ye,Le,we,Ae,ai,ii]})}}return e})();function Ga(e,s){if(e&1){let t=b();a(0,"button",23),v("click",function(){C(t);let r=S();return E(r.editPaper())}),a(1,"mat-icon"),o(2,"edit"),n(),o(3),m(4,"translate"),n()}e&2&&(i(3),c(" ",l(4,1,"EDIT")," "))}function Qa(e,s){if(e&1&&g(0,"app-paper-editor",24),e&2){let t=S();d("data",t.editorData)("readOnly",!0)("paperId",t.paperId)}}function Wa(e,s){if(e&1&&g(0,"app-paper-comments",25),e&2){let t=S();d("paperId",t.paperId)("shouldLoad",t.loadedTabs[2])}}function za(e,s){if(e&1&&g(0,"app-paper-versions",25),e&2){let t=S();d("paperId",t.paperId)("shouldLoad",t.loadedTabs[3])}}function qa(e,s){if(e&1&&g(0,"app-paper-audit-trail",25),e&2){let t=S();d("paperId",t.paperId)("shouldLoad",t.loadedTabs[4])}}function Ka(e,s){if(e&1&&g(0,"app-paper-permissions",25),e&2){let t=S();d("paperId",t.paperId)("shouldLoad",t.loadedTabs[5])}}var Ci=(()=>{class e extends y{constructor(){super(...arguments),this.paperInfo={},this.categoryStore=h(ut),this.clientStore=h(dt),this.documentStatusStore=h(ct),this.paperService=h(x),this.route=h(Ze),this.router=h(De),this.location=h(Bt),this.dialog=h(Te),this.loadedTabs=[!0,!1,!1,!1,!1,!1]}ngOnInit(){this.sub$.sink=this.route.data.subscribe(t=>{this.paperInfo=t.paper,this.paperInfo&&(this.paperId=this.paperInfo.id,this.editorData=JSON.parse(this.paperInfo.contentJson))})}onTabChange(t){let p=t.index;this.loadedTabs[p]||(this.loadedTabs[p]=!0)}editPaper(){this.router.navigate(["/papers/manage",this.paperId])}getShareLink(){this.paperService.getShareLink(this.paperId).subscribe(t=>{this.dialog.open(gi,{width:"600px",data:{paper:this.paperInfo,link:t}})})}onPaperCancel(){this.location.back()}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Y(e)))(r||e)}})()}static{this.\u0275cmp=P({type:e,selectors:[["app-paper-detail"]],standalone:!0,features:[D,R],decls:91,vars:55,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],[1,"header-buttons"],["mat-icon-button","","matTooltip","BACK",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"appHasClaim"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[3,"selectedTabChange"],[3,"label"],[1,"p-t-20","min-h-400"],[3,"data","readOnly","paperId",4,"ngIf"],[1,"col-md-6"],[1,"list-group","list-group-unbordered"],[1,"list-group-item"],[1,"pull-right"],[3,"paperId","shouldLoad",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[3,"data","readOnly","paperId"],[3,"paperId","shouldLoad"]],template:function(p,r){p&1&&(a(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),o(8),m(9,"translate"),n()()(),a(10,"div",5)(11,"ul",7)(12,"li")(13,"button",8),v("click",function(){return r.onPaperCancel()}),a(14,"mat-icon"),o(15,"arrow_back"),n()()(),a(16,"li"),_(17,Ga,5,3,"button",9),n()()()()()(),a(18,"div",4)(19,"div",10)(20,"div",11)(21,"div",12)(22,"h2"),o(23),n()(),a(24,"div",13)(25,"mat-tab-group",14),v("selectedTabChange",function(U){return r.onTabChange(U)}),a(26,"mat-tab",15),m(27,"translate"),a(28,"div",16),_(29,Qa,1,3,"app-paper-editor",17),n()(),a(30,"mat-tab",15),m(31,"translate"),a(32,"div",16)(33,"div",4)(34,"div",18)(35,"ul",19)(36,"li",20)(37,"b"),o(38),m(39,"translate"),n(),a(40,"a",21),o(41),n()(),a(42,"li",20)(43,"b"),o(44),m(45,"translate"),n(),a(46,"a",21),o(47),n()(),a(48,"li",20)(49,"b"),o(50),m(51,"translate"),n(),a(52,"a",21),o(53),n()()()(),a(54,"div",18)(55,"ul",19)(56,"li",20)(57,"b"),o(58),m(59,"translate"),n(),a(60,"a",21),o(61),n()(),a(62,"li",20)(63,"b"),o(64),m(65,"translate"),n(),a(66,"a",21),o(67),m(68,"date"),n()(),a(69,"li",20)(70,"b"),o(71),m(72,"translate"),n(),a(73,"a",21),o(74),n()()()()()()(),a(75,"mat-tab",15),m(76,"translate"),a(77,"div",16),_(78,Wa,1,2,"app-paper-comments",22),n()(),a(79,"mat-tab",15),m(80,"translate"),a(81,"div",16),_(82,za,1,2,"app-paper-versions",22),n()(),a(83,"mat-tab",15),m(84,"translate"),a(85,"div",16),_(86,qa,1,2,"app-paper-audit-trail",22),n()(),a(87,"mat-tab",15),m(88,"translate"),a(89,"div",16),_(90,Ka,1,2,"app-paper-permissions",22),n()()()()()()()()()),p&2&&(i(8),u(l(9,26,"DETAILS")),i(9),d("appHasClaim","ALL_PAPERS_EDIT_PAPER"),i(6),u(r.paperInfo.name),i(3),j("label",l(27,28,"CONTENT")),i(3),d("ngIf",r.loadedTabs[0]),i(),j("label",l(31,30,"GENERAL")),i(8),u(l(39,32,"NAME")),i(3),u(r.paperInfo.name),i(3),u(l(45,34,"CATEGORY")),i(3),u(r.paperInfo.categoryName),i(3),u(l(51,36,"CLIENT")),i(3),u(r.paperInfo.companyName),i(5),u(l(59,38,"STATUS")),i(3),u(r.paperInfo.statusName),i(3),u(l(65,40,"CREATED_DATE")),i(3),u(Q(68,42,r.paperInfo.createdDate,"dd/MM/yyyy")),i(4),u(l(72,45,"CREATED_BY")),i(3),u(r.paperInfo.createdBy),i(),j("label",l(76,47,"COMMENT")),i(3),d("ngIf",r.loadedTabs[2]),i(),j("label",l(80,49,"VERSION_HISTORY")),i(3),d("ngIf",r.loadedTabs[3]),i(),j("label",l(84,51,"AUDIT_TRAIL")),i(3),d("ngIf",r.loadedTabs[4]),i(),j("label",l(88,53,"PERMISSIONS")),i(3),d("ngIf",r.loadedTabs[5]))},dependencies:[M,N,z,L,w,F,X,k,A,Xe,mi,oi,pi,ci,ui,fi,Si,li]})}}return e})();var Ei=e=>{let s=h(x),t=h(De),p=e.params.id;return p!=null?s.getPaper(p):(t.navigate(["/papers"]),null)};var Ja=[{path:"",component:Mt,data:{claimType:"ALL_PAPERS_VIEW_PAPERS",isAssigned:!1},canActivate:[ot]},{path:"assigned",component:Mt,data:{claimType:"ALL_PAPERS_VIEW_PAPERS",isAssigned:!0},canActivate:[ot]},{path:"manage",loadChildren:()=>import("./chunk-QOLM33H6.js").then(e=>e.PaperManageModule)},{path:"manage/:id",loadChildren:()=>import("./chunk-QOLM33H6.js").then(e=>e.PaperManageModule)},{path:":id",component:Ci,data:{claimType:"ALL_PAPERS_VIEW_PAPERS"},canActivate:[ot],resolve:{paper:Ei}}],xi=(()=>{class e{static{this.\u0275fac=function(p){return new(p||e)}}static{this.\u0275mod=Ke({type:e})}static{this.\u0275inj=qe({imports:[Pt.forChild(Ja),Pt]})}}return e})();var $p=(()=>{class e{static{this.\u0275fac=function(p){return new(p||e)}}static{this.\u0275mod=Ke({type:e})}static{this.\u0275inj=qe({imports:[M,xi,F,Ge,ke,mt,Kt,J,fe,nt,at,ti,Qt,ri,K,$t,L]})}}return e})();export{$p as PaperModule};
