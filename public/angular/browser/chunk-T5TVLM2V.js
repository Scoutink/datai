import{a as Ot,b as At,c as Bt}from"./chunk-6EK7MLYI.js";import{a as Nt,b as Pt}from"./chunk-PGZNCETT.js";import{a as Ft}from"./chunk-UXGTBKG5.js";import{a as Mt,b as Lt,c as kt}from"./chunk-45RKJMIF.js";import{e as ut}from"./chunk-HUQBVWNM.js";import{a as St}from"./chunk-ADSK4K64.js";import"./chunk-CZA53JXZ.js";import{a as xt,d as wt,e as bt}from"./chunk-KTN23PHM.js";import"./chunk-5DGY2OXT.js";import{a as ft}from"./chunk-VBYTSXUA.js";import{a as _t}from"./chunk-M35GXDEX.js";import"./chunk-EDFYBFRY.js";import{a as Rt,b as yt}from"./chunk-VYBREDH7.js";import"./chunk-2RZGI2GI.js";import{a as P,b as Se,c as ve}from"./chunk-MDTWJNMV.js";import"./chunk-C22BUVQ6.js";import{a as Tt,b as Et,c as It}from"./chunk-Z4CJWSTO.js";import{d as ht,e as Ct}from"./chunk-UQDQDCM7.js";import{a as L,b as j}from"./chunk-FUBOQZYU.js";import"./chunk-5OA3UTKR.js";import{a as q,b as K,c as J,d as X,e as Z,f as ee,g as te,h as ie,i as ne,j as oe,k as ae,l as re,m as me,n as le,o as se,p as ce,q as vt}from"./chunk-ZQ2PWCHX.js";import"./chunk-54YXYWWQ.js";import{b as Dt}from"./chunk-JB4URTUB.js";import{b as gt}from"./chunk-SLA72EXZ.js";import"./chunk-PSHPNFJ6.js";import"./chunk-EST3G7IM.js";import"./chunk-TNLJ7CAF.js";import"./chunk-UX7VFZY4.js";import"./chunk-5HUZTPPR.js";import{G as ge,K as U,a as je,c as Q,d as Me,e as lt,f as M,h as st,i as Y,j as ct,k as dt}from"./chunk-VNAU6AHI.js";import{b as ot,c as at,d as mt,e as ke}from"./chunk-2GYG6N64.js";import{a as V,b as rt,c as Le}from"./chunk-YTVNRIZ3.js";import{F as z,L as ye}from"./chunk-3XAX4OT5.js";import{ia as G,ja as De,na as pt}from"./chunk-NF46UI75.js";import{p as Ce,t as R,u as y}from"./chunk-SIUWMJOE.js";import"./chunk-GTE6R5NX.js";import"./chunk-FGSJTZPD.js";import"./chunk-73F4PDV3.js";import{A as it,C as nt,D as Re,c as Ie,e as Ke,h as be,i as Je,n as Xe,o as Ze,r as et,u as tt}from"./chunk-TMWBOQE5.js";import{$ as We,$b as F,Ab as u,Ac as d,Bc as S,Ea as I,Ed as qe,Gb as _e,Kb as n,Lb as o,Ma as k,Mb as f,Na as w,Nb as h,O as pe,Oa as T,Ob as C,Qb as E,Ra as fe,Tb as v,Vb as _,Vc as Ge,W as Ue,Yb as B,Yc as he,Zc as $,a as Be,ac as O,bc as A,gc as r,hc as N,ib as i,ic as c,jb as Ee,jc as W,jd as Qe,mc as He,nc as $e,o as Ve,oc as ze,od as Ye,qa as ue,rc as b,sc as x,tb as H,wb as p,za as g,zc as s}from"./chunk-EOQA7B6X.js";var jt=()=>["ALL_DOCUMENTS_UPLOAD_NEW_VERSION","ASSIGNED_DOCUMENTS_UPLOAD_NEW_VERSION"],qt=()=>["ALL_DOCUMENTS_RESTORE_VERSION","ASSIGNED_DOCUMENTS_RESTORE_VERSION"];function Kt(e,a){if(e&1){let t=E();n(0,"div",4)(1,"div",5)(2,"button",6),v("click",function(){w(t);let m=_();return T(m.uploadNewVersion())}),f(3,"i-feather",7),r(4),s(5,"translate"),o()()()}e&2&&(i(4),c(" ",d(5,1,"UPLOAD_NEW_VERSION_FILE")," "))}function Jt(e,a){if(e&1&&(n(0,"span")(1,"span",10),f(2,"i-feather",11),o(),r(3),o()),e&2){let t=_().$implicit;i(3),c(" ",t.signedByUser," ")}}function Xt(e,a){if(e&1&&(n(0,"span"),r(1),s(2,"utcToLocalTime"),o()),e&2){let t=_().$implicit;i(),c(" ",S(2,1,t.signDate,"short")," ")}}function Zt(e,a){e&1&&(n(0,"span",12),r(1),s(2,"translate"),o()),e&2&&(i(),N(d(2,1,"CURRENT_VERSION")))}function ei(e,a){if(e&1){let t=E();n(0,"span",16),v("click",function(){w(t);let m=_(2).$implicit,D=_();return T(D.restoreDocumentVersion(m))}),n(1,"mat-icon"),r(2," restore"),o()()}}function ti(e,a){if(e&1){let t=E();n(0,"div")(1,"span",13),v("click",function(){w(t);let m=_().$implicit,D=_();return T(D.onDocumentView(m))}),n(2,"mat-icon"),r(3," visibility"),o()(),n(4,"span",14),v("click",function(){w(t);let m=_().$implicit,D=_();return T(D.downloadDocument(m))}),n(5,"mat-icon"),r(6," download"),o()(),p(7,ei,3,0,"span",15),o()}e&2&&(i(7),u("hasClaim",x(1,qt)))}function ii(e,a){if(e&1&&(n(0,"tr")(1,"td"),r(2),s(3,"utcToLocalTime"),o(),n(4,"td"),r(5),o(),n(6,"td"),p(7,Jt,4,1,"span",8),o(),n(8,"td"),p(9,Xt,3,4,"span",8),o(),n(10,"td"),p(11,Zt,3,3,"span",9)(12,ti,8,2,"div",8),o()()),e&2){let t=a.$implicit;i(2),N(S(3,6,t.modifiedDate,"short")),i(3),c(" ",t.createdByUser," "),i(2),u("ngIf",t.signedByUser),i(2),u("ngIf",t.signDate),i(2),u("ngIf",t.isCurrentVersion),i(),u("ngIf",!t.isCurrentVersion)}}var Vt=(()=>{class e{constructor(){this.documentId="",this.shouldLoad=!1,this.documentVersions=[],this.overlay=g(at),this.toastrService=g(Ce),this.translationService=g(De),this.commonService=g(ye),this.documentService=g(ke),this.commandDialogService=g(ge),this.dialog=g(z)}ngOnChanges(t){t.shouldLoad&&this.shouldLoad&&this.getDocumentVersions()}getDocumentVersions(){this.documentService.getDocumentVersion(this.documentId).subscribe(t=>{this.documentVersions=t})}uploadNewVersion(){this.dialog.open(bt,{width:"800px",maxHeight:"70vh",data:Object.assign({},this.data)}).afterClosed().subscribe(l=>{l&&this.getDocumentVersions()})}onDocumentView(t){let m=t.url.split(".")[1],D={documentId:t.id,name:this.data.name,extension:m,isVersion:!0,id:this.data.id,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1,isFromFileRequest:!1};this.overlay.open(mt,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:D})}downloadDocument(t){let l={documentId:t.id,name:"",extension:t.url.split(".")[1],isVersion:!0,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1,isFromFileRequest:!1};this.commonService.downloadDocument(l).subscribe(m=>{m.type===Ye.Response&&(this.addDocumentTrail(this.data.id,ot.Download.toString()),this.downloadFile(m,t))},()=>{this.toastrService.error(this.translationService.getValue("ERROR_WHILE_DOWNLOADING_DOCUMENT"))})}addDocumentTrail(t,l){let m={documentId:t,operationName:l};this.commonService.addDocumentAuditTrail(m).subscribe()}restoreDocumentVersion(t){this.commandDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_RESTORE_THIS_TO_CURRENT_VERSION")}?`).subscribe(l=>{l&&this.documentService.restoreDocumentVersion(this.data.id,t.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("VERSION_RESTORED_SUCCESSFULLY")),this.getDocumentVersions()})})}downloadFile(t,l){let m=new Blob([t.body],{type:t.body.type}),D=this.data.name.split("."),Pe=l.url.split("."),de=document.createElement("a");de.setAttribute("style","display:none;"),document.body.appendChild(de),de.download=`${D[0]}.${Pe[1]}`,de.href=URL.createObjectURL(m),de.target="_blank",de.click(),document.body.removeChild(de)}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275cmp=I({type:e,selectors:[["app-document-versions"]],inputs:{documentId:"documentId",data:"data",shouldLoad:"shouldLoad"},standalone:!0,features:[k,b],decls:23,vars:18,consts:[[1,"row"],["class","col-md-12 mb-2",4,"hasClaim"],[1,"table","table-bordered","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"col-md-12","mb-2"],[1,"float-end"],["type","button",1,"btn","btn-success","btn-sm","m-r-10","m-t-10",3,"click"],["name","plus",1,"small-icon"],[4,"ngIf"],["class","badge bg-success",4,"ngIf"],[1,"bg-success","text-light"],["name","check",1,"small-icon"],[1,"badge","bg-success"],["matTooltip","view","role","button",1,"material-icons-outlined","m-r-5","text-primary",3,"click"],["role","button",1,"m-r-5","text-primary",3,"click"],["role","button","matTooltip","Restore to Current Version","class","material-icons-outlined text-primary",3,"click",4,"hasClaim"],["role","button","matTooltip","Restore to Current Version",1,"material-icons-outlined","text-primary",3,"click"]],template:function(l,m){l&1&&(n(0,"div",0),p(1,Kt,6,3,"div",1),o(),n(2,"div",0)(3,"table",2)(4,"thead")(5,"tr")(6,"th"),r(7),s(8,"translate"),o(),n(9,"th"),r(10),s(11,"translate"),o(),n(12,"th"),r(13),s(14,"translate"),o(),n(15,"th"),r(16),s(17,"translate"),o(),n(18,"th"),r(19),s(20,"translate"),o()()(),n(21,"tbody"),p(22,ii,13,9,"tr",3),o()()()),l&2&&(i(),u("hasClaim",x(17,jt)),i(6),c(" ",d(8,7,"CREATED_DATE")," "),i(3),c(" ",d(11,9,"ADDED_BY")," "),i(3),c(" ",d(14,11,"SIGNED_BY")," "),i(3),c(" ",d(17,13,"SIGN_DATE")," "),i(3),c(" ",d(20,15,"ACTION")," "),i(3),u("ngForOf",m.documentVersions))},dependencies:[y,R,he,$,dt,ct,U,je,V,Q,M]})}}return e})();var Ut=()=>["ALL_DOCUMENTS_MANAGE_COMMENT","ASSIGNED_DOCUMENTS_MANAGE_COMMENT"];function oi(e,a){if(e&1){let t=E();n(0,"span",11),v("click",function(){w(t);let m=_().$implicit,D=_();return T(D.onDelete(m.id))}),f(1,"i-feather",12),o()}}function ai(e,a){if(e&1&&(n(0,"div",5)(1,"h6",6),r(2),p(3,oi,2,0,"span",7),o(),n(4,"div",8)(5,"small",9),r(6),s(7,"utcToLocalTime"),o(),n(8,"small",10),r(9),o()()()),e&2){let t=a.$implicit;i(2),c(" ",t.comment," "),i(),u("hasClaim",x(7,Ut)),i(3),c(" ",S(7,4,t.createdDate,"short")," "),i(3),c("",t==null?null:t.createdByName," ")}}function ri(e,a){e&1&&(n(0,"div",21),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"COMMENT_IS_REQUIRED")," "))}function mi(e,a){if(e&1){let t=E();n(0,"div",0)(1,"div",13)(2,"form",14)(3,"div",0)(4,"div",15),f(5,"textarea",16),p(6,ri,3,3,"div",17),o()(),n(7,"div",0)(8,"div",18)(9,"button",19),v("click",function(){w(t);let m=_();return T(m.addComment())}),f(10,"i-feather",20),r(11),s(12,"translate"),o()()()()()()}if(e&2){let t=_();i(2),u("formGroup",t.commentForm),i(4),u("ngIf",t.commentForm.get("comment").touched&&t.commentForm.get("comment").hasError("required")),i(5),c(" ",d(12,3,"ADD_COMMENT")," ")}}var Wt=(()=>{class e{constructor(){this.documentId="",this.shouldLoad=!1,this.documentComments=[],this.fb=g(it),this.documentCommentService=g(xt),this.commonDialogService=g(ge),this.translationService=g(De),this.toastrService=g(Ce)}ngOnInit(){this.createForm()}ngOnChanges(t){t.shouldLoad&&this.shouldLoad&&this.getDocumentComments()}createForm(){this.commentForm=this.fb.group({comment:["",[Ke.required]]})}getDocumentComments(){this.documentCommentService.getDocumentComment(this.documentId).subscribe(t=>{this.documentComments=t})}addComment(){if(this.commentForm.invalid){this.commentForm.markAllAsTouched();return}let t={documentId:this.documentId,comment:this.commentForm.get("comment").value};this.documentCommentService.saveDocumentComment(t).subscribe(()=>{this.patchComment(""),this.commentForm.markAsUntouched(),this.getDocumentComments()})}patchComment(t){this.commentForm.patchValue({comment:t})}onDelete(t){this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(l=>{l&&this.documentCommentService.deleteDocumentComment(t).subscribe(()=>{this.toastrService.success(this.translationService.getValue("COMMENT_DELETED_SUCCESSFULLY")),this.getDocumentComments()})})}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275cmp=I({type:e,selectors:[["app-document-comments"]],inputs:{documentId:"documentId",shouldLoad:"shouldLoad"},standalone:!0,features:[k,b],decls:5,vars:3,consts:[[1,"row"],[1,"col-sm-12"],[1,"list-group"],["class","list-group-item list-group-item-action","aria-current","true",4,"ngFor","ngForOf"],["class","row",4,"hasClaim"],["aria-current","true",1,"list-group-item","list-group-item-action"],[1,"m-b-1"],["role","button","class","badge",3,"click",4,"hasClaim"],[1,"w-100"],[1,"m-r-10"],[1,"text-primary"],["role","button",1,"badge",3,"click"],["name","trash",1,"small-icon","text-danger"],[1,"col-sm-12","mb-0"],[3,"formGroup"],[1,"col-md-12","m-t-10"],["formControlName","comment","rows","3",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"col-md-12","mb-0"],["type","submit",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],["name","send",1,"small-icon"],[1,"text-danger"]],template:function(l,m){l&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),p(3,ai,10,8,"div",3),o()()(),p(4,mi,13,5,"div",4)),l&2&&(i(3),u("ngForOf",m.documentComments),i(),u("hasClaim",x(2,Ut)))},dependencies:[y,R,he,$,U,Ze,Ie,be,Je,et,tt,V,Q,M,Re]})}}return e})();var si=()=>[10,20,30];function ci(e,a){e&1&&(n(0,"th",17),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"START_DATE")," "))}function di(e,a){if(e&1&&(n(0,"td",18),r(1),s(2,"utcToLocalTime"),o()),e&2){let t=a.$implicit;i(),c(" ",S(2,1,t.startDate,"short")," ")}}function pi(e,a){e&1&&(n(0,"th",17),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"END_DATE")," "))}function ui(e,a){if(e&1&&(n(0,"td",18),r(1),s(2,"utcToLocalTime"),o()),e&2){let t=a.$implicit;i(),c(" ",S(2,1,t.endDate,"short")," ")}}function fi(e,a){e&1&&(n(0,"th",17),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"SUBJECT")," "))}function _i(e,a){if(e&1&&(n(0,"td",18),r(1),s(2,"limitTo"),o()),e&2){let t=a.$implicit;i(),c(" ",S(2,1,t.subject,"100")," ")}}function hi(e,a){e&1&&(n(0,"th",17),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"MESSAGE")," "))}function Ci(e,a){if(e&1&&(n(0,"td",18),r(1),s(2,"limitTo"),o()),e&2){let t=a.$implicit;i(),c(" ",S(2,1,t.message,"150")," ")}}function Di(e,a){e&1&&(n(0,"th",19),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"FREQUENCY")," "))}function gi(e,a){if(e&1&&(n(0,"td",18),r(1),s(2,"frequency"),s(3,"translate"),o()),e&2){let t=a.$implicit;i(),c(" ",d(3,3,d(2,1,t.frequency))," ")}}function Si(e,a){if(e&1&&(n(0,"td",20),f(1,"mat-paginator",21),o()),e&2){let t=_();i(),u("length",t.reminderResource.totalCount)("pageSize",t.reminderResource.pageSize)("pageSizeOptions",x(3,si))}}function vi(e,a){e&1&&(n(0,"tr")(1,"td",22)(2,"div",23)(3,"b"),r(4),s(5,"translate"),o()()()()),e&2&&(i(4),c(" ",d(5,1,"NO_DATA_FOUND"),""))}function xi(e,a){e&1&&f(0,"tr",24)}function wi(e,a){e&1&&f(0,"tr",25)}function Ti(e,a){e&1&&f(0,"tr",26)}var $t=(()=>{class e extends G{constructor(){super(...arguments),this.documentId="",this.shouldLoad=!1,this.reminders=[],this.reminderFrequencies=[],this.displayedColumns=["startDate","endDate","subject","message","frequency"],this.footerToDisplayed=["footer"],this.reminderService=g(_t)}ngOnChanges(t){t.shouldLoad&&this.shouldLoad&&this.dataSource.loadData(this.reminderResource)}ngOnInit(){this.reminderResource=new St,this.reminderResource.documentId=this.documentId,this.reminderResource.pageSize=10,this.reminderResource.orderBy="startDate desc",this.dataSource=new Ft(this.reminderService),this.getResourceParameter()}ngAfterViewInit(){this.sub$.sink=this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=pe(this.sort.sortChange,this.paginator.page).pipe(ue(()=>{this.reminderResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.reminderResource.pageSize=this.paginator.pageSize,this.reminderResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadData(this.reminderResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(t=>{t&&(this.reminderResource.pageSize=t.pageSize,this.reminderResource.skip=t.skip,this.reminderResource.totalCount=t.totalCount)})}static{this.\u0275fac=(()=>{let t;return function(m){return(t||(t=fe(e)))(m||e)}})()}static{this.\u0275cmp=I({type:e,selectors:[["app-document-reminders"]],viewQuery:function(l,m){if(l&1&&(F(L,5),F(P,5)),l&2){let D;O(D=A())&&(m.paginator=D.first),O(D=A())&&(m.sort=D.first)}},inputs:{documentId:"documentId",shouldLoad:"shouldLoad"},standalone:!0,features:[H,k,b],decls:24,vars:4,consts:[[1,"row"],[1,"grid-height-auto"],["mat-table","","matSort","","matSortActive","startDate","matSortDirection","desc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","startDate"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","endDate"],["matColumnDef","subject"],["matColumnDef","message"],["matColumnDef","frequency"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","footer"],["mat-footer-cell","","colspan","7",4,"matFooterCellDef"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-footer-cell","","colspan","7"],[3,"length","pageSize","pageSizeOptions"],["colspan","7"],[1,"pt-2","pl-2"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(l,m){l&1&&(n(0,"div",0)(1,"div",1)(2,"table",2),h(3,3),p(4,ci,3,3,"th",4)(5,di,3,4,"td",5),C(),h(6,6),p(7,pi,3,3,"th",4)(8,ui,3,4,"td",5),C(),h(9,7),p(10,fi,3,3,"th",4)(11,_i,3,4,"td",5),C(),h(12,8),p(13,hi,3,3,"th",4)(14,Ci,3,4,"td",5),C(),h(15,9),p(16,Di,3,3,"th",10)(17,gi,4,5,"td",5),C(),h(18,11),p(19,Si,2,4,"td",12),C(),p(20,vi,6,3,"tr",13)(21,xi,1,0,"tr",14)(22,wi,1,0,"tr",15)(23,Ti,1,0,"tr",16),o()()()),l&2&&(i(2),u("dataSource",m.dataSource),i(19),u("matHeaderRowDef",m.displayedColumns),i(),u("matRowDefColumns",m.displayedColumns),i(),u("matFooterRowDef",m.footerToDisplayed))},dependencies:[y,R,Y,Me,lt,M,ce,q,J,ne,Z,K,ae,X,oe,ee,ie,te,re,le,me,se,Qe,U,pt,ut,j,L,ve,P,Se]})}}return e})();var Ei=()=>[10,20,30];function Ii(e,a){e&1&&(n(0,"th",16),r(1),s(2,"translate"),s(3,"translate"),o()),e&2&&(i(),W(" ",d(2,2,"ACTION")," ",d(3,4,"DATE"),""))}function bi(e,a){if(e&1&&(n(0,"td",17),r(1),s(2,"utcToLocalTime"),o()),e&2){let t=a.$implicit;i(),c(" ",S(2,1,t==null?null:t.createdDate,"short")," ")}}function Ri(e,a){e&1&&(n(0,"th",16),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"OPERATION")," "))}function yi(e,a){if(e&1&&(n(0,"td",17),r(1),s(2,"translate"),o()),e&2){let t=a.$implicit;i(),c(" ",d(2,1,t.operationName.toUpperCase())," ")}}function Mi(e,a){e&1&&(n(0,"th",16),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"BY_WHOM")," "))}function Li(e,a){if(e&1&&(n(0,"td",17),r(1),o()),e&2){let t=a.$implicit;i(),c(" ",t==null?null:t.createdBy," ")}}function ki(e,a){e&1&&(n(0,"th",16),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"TO_WHOM_USER")," "))}function Ni(e,a){if(e&1&&(n(0,"td",17),r(1),o()),e&2){let t=a.$implicit;i(),c(" ",t==null?null:t.permissionUser," ")}}function Pi(e,a){e&1&&(n(0,"th",16),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"TO_WHOM_ROLE")," "))}function Fi(e,a){if(e&1&&(n(0,"td",17),r(1),o()),e&2){let t=a.$implicit;i(),c(" ",t==null?null:t.permissionRole," ")}}function Oi(e,a){if(e&1&&(n(0,"td",18),f(1,"mat-paginator",19),o()),e&2){let t=_();i(),u("length",t.documentResource.totalCount)("pageSize",t.documentResource.pageSize)("pageSizeOptions",x(3,Ei))}}function Ai(e,a){e&1&&f(0,"tr",20)}function Bi(e,a){e&1&&f(0,"tr",21)}function Vi(e,a){e&1&&f(0,"tr",22)}function Ui(e,a){e&1&&(n(0,"tr")(1,"td",23)(2,"div",24)(3,"b"),r(4),s(5,"translate"),o()()()()),e&2&&(i(4),c(" ",d(5,1,"NO_DATA_FOUND"),""))}var zt=(()=>{class e extends G{constructor(){super(...arguments),this.documentId="",this.shouldLoad=!1,this.documentAuditTrails=[],this.displayedColumns=["createdDate","operationName","createdBy","permissionUser","permissionRole"],this.footerToDisplayed=["footer"],this.documentAuditTrailService=g(Pt)}ngOnChanges(t){t.shouldLoad&&this.shouldLoad&&this.dataSource.loadDocumentAuditTrails(this.documentResource)}ngOnInit(){this.documentResource=new ft,this.documentResource.documentId=this.documentId,this.documentResource.pageSize=10,this.documentResource.orderBy="createdDate desc",this.dataSource=new Nt(this.documentAuditTrailService),this.getResourceParameter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=pe(this.sort.sortChange,this.paginator.page).pipe(ue(()=>{this.documentResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.documentResource.pageSize=this.paginator.pageSize,this.documentResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadDocumentAuditTrails(this.documentResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(t=>{t&&(this.documentResource.pageSize=t.pageSize,this.documentResource.skip=t.skip,this.documentResource.totalCount=t.totalCount)})}static{this.\u0275fac=(()=>{let t;return function(m){return(t||(t=fe(e)))(m||e)}})()}static{this.\u0275cmp=I({type:e,selectors:[["app-document-audit-trails"]],viewQuery:function(l,m){if(l&1&&(F(L,5),F(P,5)),l&2){let D;O(D=A())&&(m.paginator=D.first),O(D=A())&&(m.sort=D.first)}},inputs:{documentId:"documentId",shouldLoad:"shouldLoad"},standalone:!0,features:[H,k,b],decls:24,vars:6,consts:[[1,"row"],[1,"grid-height-auto"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","createdDate"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","operationName"],["matColumnDef","createdBy"],["matColumnDef","permissionUser"],["matColumnDef","permissionRole"],["matColumnDef","footer"],["mat-footer-cell","","colspan","7",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[4,"matNoDataRow"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-footer-cell","","colspan","7"],[3,"length","pageSize","pageSizeOptions"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],["colspan","7"],[1,"m-2"]],template:function(l,m){l&1&&(n(0,"div",0)(1,"div",1)(2,"table",2),h(3,3),p(4,Ii,4,6,"th",4)(5,bi,3,4,"td",5),C(),h(6,6),p(7,Ri,3,3,"th",4)(8,yi,3,3,"td",5),C(),h(9,7),p(10,Mi,3,3,"th",4)(11,Li,2,1,"td",5),C(),h(12,8),p(13,ki,3,3,"th",4)(14,Ni,2,1,"td",5),C(),h(15,9),p(16,Pi,3,3,"th",4)(17,Fi,2,1,"td",5),C(),h(18,10),p(19,Oi,2,4,"td",11),C(),p(20,Ai,1,0,"tr",12)(21,Bi,1,0,"tr",13)(22,Vi,1,0,"tr",14)(23,Ui,6,3,"tr",15),o()()()),l&2&&(i(2),u("dataSource",m.dataSource),i(18),u("matHeaderRowDef",m.displayedColumns)("matHeaderRowDefSticky",!0),i(),u("matRowDefColumns",m.displayedColumns),i(),u("matFooterRowDef",m.footerToDisplayed)("matFooterRowDefSticky",!0))},dependencies:[y,R,Y,M,ce,q,J,ne,Z,K,ae,X,oe,ee,ie,te,re,le,me,se,j,L,ve,P,Se]})}}return e})();var Wi=["userPermissionsPaginator"],Gt=()=>["ALL_DOCUMENTS_SHARE_DOCUMENT","ASSIGNED_DOCUMENTS_SHARE_DOCUMENT"],Hi=()=>[10,20,50,100];function $i(e,a){if(e&1){let t=E();n(0,"div",22)(1,"button",23),v("click",function(){w(t);let m=_();return T(m.addDocumentUserPermission())}),f(2,"i-feather",24),r(3),s(4,"translate"),o(),n(5,"button",25),v("click",function(){w(t);let m=_();return T(m.addDocumentRolePermission())}),f(6,"i-feather",24),r(7),s(8,"translate"),o()()}e&2&&(i(3),c(" ",d(4,2,"ASSIGN_SHARE_WITH_USERS")," "),i(4),c(" ",d(8,4,"ASSIGN_SHARE_WITH_ROLES")," "))}function zi(e,a){e&1&&(n(0,"th",26),r(1),s(2,"translate"),o()),e&2&&(i(),c("",d(2,1,"ACTION")," "))}function Gi(e,a){if(e&1){let t=E();n(0,"button",30),v("click",function(){w(t);let m=_(2).$implicit,D=_();return T(D.deleteDocumentUserPermission(m))}),f(1,"i-feather",31),r(2),s(3,"translate"),o()}e&2&&(i(2),c(" ",d(3,1,"DELETE"),""))}function Qi(e,a){if(e&1){let t=E();n(0,"button",30),v("click",function(){w(t);let m=_(2).$implicit,D=_();return T(D.deleteDocumentRolePermission(m))}),f(1,"i-feather",31),r(2),s(3,"translate"),o()}e&2&&(i(2),c(" ",d(3,1,"DELETE"),""))}function Yi(e,a){if(e&1&&(n(0,"div"),p(1,Gi,4,3,"button",29)(2,Qi,4,3,"button",29),o()),e&2){let t=_().$implicit;i(),u("ngIf",t.type==="User"),i(),u("ngIf",t.type==="Role")}}function ji(e,a){e&1&&(n(0,"td",27),p(1,Yi,3,2,"div",28),o()),e&2&&(i(),u("hasClaim",x(1,Gt)))}function qi(e,a){e&1&&(n(0,"th",32),r(1),s(2,"translate"),o()),e&2&&(i(),c("",d(2,1,"ALLOW_DOWNLOAD")," "))}function Ki(e,a){e&1&&(h(0),r(1),s(2,"translate"),C()),e&2&&(i(),c(" ",d(2,1,"YES")," "))}function Ji(e,a){e&1&&(h(0),r(1),s(2,"translate"),C()),e&2&&(i(),c(" ",d(2,1,"NO")," "))}function Xi(e,a){if(e&1&&(n(0,"td",33),p(1,Ki,3,3,"ng-container",34)(2,Ji,3,3,"ng-container",34),o()),e&2){let t=a.$implicit;i(),u("ngIf",t.isAllowDownload),i(),u("ngIf",!t.isAllowDownload)}}function Zi(e,a){e&1&&(n(0,"th",32),r(1),s(2,"translate"),o()),e&2&&(i(),c("",d(2,1,"TYPE")," "))}function en(e,a){if(e&1&&(n(0,"td",33),r(1),o()),e&2){let t=a.$implicit;i(),c(" ",t.type," ")}}function tn(e,a){e&1&&(n(0,"th",32),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"USER_ROLE_NAME")," "))}function nn(e,a){if(e&1&&(n(0,"span"),r(1),o()),e&2){let t=_().$implicit;i(),W(" ",t.user==null?null:t.user.firstName," ",t.user==null?null:t.user.lastName," ")}}function on(e,a){if(e&1&&(n(0,"span"),r(1),o()),e&2){let t=_().$implicit;i(),c(" ",t.role==null?null:t.role.name," ")}}function an(e,a){if(e&1&&(n(0,"td",33),p(1,nn,2,2,"span",34)(2,on,2,1,"span",34),o()),e&2){let t=a.$implicit;i(),u("ngIf",t.type==="User"),i(),u("ngIf",t.type==="Role")}}function rn(e,a){e&1&&(n(0,"th",32),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"EMAIL")," "))}function mn(e,a){if(e&1&&(n(0,"span"),r(1),o()),e&2){let t=_().$implicit;i(),c(" ",t.user==null?null:t.user.email," ")}}function ln(e,a){e&1&&(n(0,"span"),r(1," -- "),o())}function sn(e,a){if(e&1&&(n(0,"td",33),p(1,mn,2,1,"span",34)(2,ln,2,0,"span",34),o()),e&2){let t=a.$implicit;i(),u("ngIf",t.type==="User"),i(),u("ngIf",t.type==="Role")}}function cn(e,a){e&1&&(n(0,"th",32),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"START_DATE")," "))}function dn(e,a){if(e&1&&(h(0),r(1),s(2,"utcToLocalTime"),C()),e&2){let t=_().$implicit;i(),c(" ",S(2,1,t.startDate,"shortDate")," ")}}function pn(e,a){e&1&&(h(0),r(1," -- "),C())}function un(e,a){if(e&1&&(n(0,"td",33),p(1,dn,3,4,"ng-container",34)(2,pn,2,0,"ng-container",34),o()),e&2){let t=a.$implicit;i(),u("ngIf",t.isTimeBound),i(),u("ngIf",!t.isTimeBound)}}function fn(e,a){e&1&&(n(0,"th",32),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"END_DATE")," "))}function _n(e,a){if(e&1&&(h(0),r(1),s(2,"utcToLocalTime"),C()),e&2){let t=_().$implicit;i(),c(" ",S(2,1,t.endDate,"shortDate")," ")}}function hn(e,a){e&1&&(h(0),r(1," -- "),C())}function Cn(e,a){if(e&1&&(n(0,"td",33),p(1,_n,3,4,"ng-container",34)(2,hn,2,0,"ng-container",34),o()),e&2){let t=a.$implicit;i(),u("ngIf",t.isTimeBound),i(),u("ngIf",!t.isTimeBound)}}function Dn(e,a){e&1&&(n(0,"td",35),f(1,"mat-paginator",36,0),o()),e&2&&(i(),u("pageSizeOptions",x(1,Hi)))}function gn(e,a){e&1&&(n(0,"tr")(1,"td",37)(2,"div",38)(3,"b"),r(4),s(5,"translate"),o()()()()),e&2&&(i(4),c(" ",d(5,1,"NO_DATA_FOUND"),""))}function Sn(e,a){e&1&&f(0,"tr",39)}function vn(e,a){e&1&&f(0,"tr",40)}function xn(e,a){e&1&&f(0,"tr",41)}var Qt=(()=>{class e{constructor(){this.shouldLoad=!1,this.documentPermissions=[],this.dialog=g(z),this.documentPermissionService=g(Tt),this.commonDialogService=g(ge),this.translationService=g(De),this.toastrService=g(Ce),this.commonService=g(ye),this.users=[],this.roles=[],this.isUserLoaded=!1,this.isRoleLoaded=!1,this.documentPermissionsColumns=["action","type","isAllowDownload","name","email","startDate","endDate"],this.footerToDisplayed=["footer"]}ngOnChanges(t){t.shouldLoad&&this.shouldLoad&&this.getDocumentPrmission()}getDocumentPrmission(){this.documentPermissionService.getDoucmentPermission(this.documentId).subscribe(t=>{this.documentPermissions=t,this.permissionsDataSource=new vt(this.documentPermissions),this.permissionsDataSource.paginator=this.userPermissionsPaginator})}deleteDocumentUserPermission(t){this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(l=>{l&&this.documentPermissionService.deleteDocumentUserPermission(t.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("PERMISSION_DELETED_SUCCESSFULLY")),this.getDocumentPrmission()})})}deleteDocumentRolePermission(t){this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(l=>{l&&this.documentPermissionService.deleteDocumentRolePermission(t.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("PERMISSION_DELETED_SUCCESSFULLY")),this.getDocumentPrmission()})})}addDocumentUserPermission(){this.isUserLoaded?this.openUserPermissionDialog():this.commonService.getUsersForDropdown().subscribe(t=>{this.users=t,this.isUserLoaded=!0,this.openUserPermissionDialog()})}openUserPermissionDialog(){this.dialog.open(It,{width:"600px",data:Object.assign({users:this.users,documentId:this.documentId})}).afterClosed().subscribe(l=>{l&&this.getDocumentPrmission()})}addDocumentRolePermission(){this.isRoleLoaded?this.openRolePermissionDialog():this.commonService.getRolesForDropdown().subscribe(t=>{this.roles=t,this.isRoleLoaded=!0,this.openRolePermissionDialog()})}openRolePermissionDialog(){this.dialog.open(Et,{width:"600px",data:Object.assign({roles:this.roles,documentId:this.documentId})}).afterClosed().subscribe(l=>{l&&this.getDocumentPrmission()})}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275cmp=I({type:e,selectors:[["app-document-permissions"]],viewQuery:function(l,m){if(l&1&&F(Wi,5),l&2){let D;O(D=A())&&(m.userPermissionsPaginator=D.first)}},inputs:{documentId:"documentId",shouldLoad:"shouldLoad"},standalone:!0,features:[k,b],decls:32,vars:8,consts:[["userPermissionsPaginator",""],[1,"row"],["class","col-md-6",4,"hasClaim"],[1,"grid-height-auto"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["style","width:20%","mat-header-cell","",4,"matHeaderCellDef"],["style","width:20%","mat-cell","",4,"matCellDef"],["matColumnDef","isAllowDownload"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","footer"],["mat-footer-cell","","colspan","7",4,"matFooterCellDef"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[1,"col-md-6"],["type","button",1,"btn","btn-success","btn-sm","m-r-10","m-t-10",3,"click"],["name","plus",1,"small-icon"],["type","button",1,"btn","btn-success","btn-sm","m-r-10","m-t-10","ml-3",3,"click"],["mat-header-cell","",2,"width","20%"],["mat-cell","",2,"width","20%"],[4,"hasClaim"],["class","btn btn-danger btn-sm","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["name","trash",1,"small-icon"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["mat-footer-cell","","colspan","7"],[3,"pageSizeOptions"],["colspan","5"],[1,"m-2"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(l,m){l&1&&(n(0,"div",1),p(1,$i,9,6,"div",2),o(),n(2,"div",1)(3,"div",3)(4,"table",4),h(5,5),p(6,zi,3,3,"th",6)(7,ji,2,2,"td",7),C(),h(8,8),p(9,qi,3,3,"th",9)(10,Xi,3,2,"td",10),C(),h(11,11),p(12,Zi,3,3,"th",9)(13,en,2,1,"td",10),C(),h(14,12),p(15,tn,3,3,"th",9)(16,an,3,2,"td",10),C(),h(17,13),p(18,rn,3,3,"th",9)(19,sn,3,2,"td",10),C(),h(20,14),p(21,cn,3,3,"th",9)(22,un,3,2,"td",10),C(),h(23,15),p(24,fn,3,3,"th",9)(25,Cn,3,2,"td",10),C(),h(26,16),p(27,Dn,3,2,"td",17),C(),p(28,gn,6,3,"tr",18)(29,Sn,1,0,"tr",19)(30,vn,1,0,"tr",20)(31,xn,1,0,"tr",21),o()()()),l&2&&(i(),u("hasClaim",x(7,Gt)),i(3),u("dataSource",m.permissionsDataSource),i(25),u("matHeaderRowDef",m.documentPermissionsColumns)("matHeaderRowDefSticky",!0),i(),u("matRowDefColumns",m.documentPermissionsColumns),i(),u("matFooterRowDef",m.footerToDisplayed)("matFooterRowDefSticky",!0))},dependencies:[$,rt,V,ce,q,J,ne,Z,K,ae,X,oe,ee,ie,te,re,le,me,se,y,R,j,L,U,Q,M,ht,Ct]})}}return e})();var wn=()=>["footer"],Tn=()=>[10,20,30];function En(e,a){e&1&&(n(0,"th",31),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"ACTION")," "))}function In(e,a){if(e&1){let t=E();n(0,"td",32)(1,"button",33),v("click",function(){let m=w(t).$implicit,D=_();return T(D.viewVisualWorkflow(m))}),f(2,"i-feather",34),o()()}}function bn(e,a){e&1&&(n(0,"th",35),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"WROKFLOW")," "))}function Rn(e,a){if(e&1&&(n(0,"td",36),r(1),o()),e&2){let t=a.$implicit;i(),c(" ",t==null?null:t.workflowName," ")}}function yn(e,a){e&1&&(n(0,"th",37),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"PERFORM_BY")," "))}function Mn(e,a){if(e&1&&(n(0,"td",38),r(1),o()),e&2){let t=a.$implicit;i(),c(" ",t==null?null:t.createdByName," ")}}function Ln(e,a){e&1&&(n(0,"th",37),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"PERFORM_DATE")," "))}function kn(e,a){if(e&1&&(n(0,"td",38),r(1),s(2,"utcToLocalTime"),o()),e&2){let t=a.$implicit;i(),c(" ",S(2,1,t==null?null:t.createdDate,"full")," ")}}function Nn(e,a){e&1&&(n(0,"th",39),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"TRANSITION")," "))}function Pn(e,a){if(e&1&&r(0),e&2){let t=_().$implicit;c(" ",t==null?null:t.transitionName," ")}}function Fn(e,a){if(e&1&&(n(0,"span",40),r(1),s(2,"translate"),o()),e&2){let t=_().$implicit;i(),N(d(2,1,t==null||t.type==null?null:t.type.toUpperCase()))}}function On(e,a){if(e&1&&(n(0,"span",41),r(1),s(2,"translate"),o()),e&2){let t=_().$implicit;i(),c(" ",d(2,1,t==null||t.type==null?null:t.type.toUpperCase()),"")}}function An(e,a){if(e&1&&(n(0,"td",38),p(1,Pn,1,1)(2,Fn,3,3,"span",40)(3,On,3,3,"span",41),o()),e&2){let t=a.$implicit;i(),_e((t==null?null:t.type)==="Transition"?1:(t==null?null:t.type)==="Initiated"?2:3)}}function Bn(e,a){e&1&&(n(0,"th",39),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"STEPS")," "))}function Vn(e,a){if(e&1&&r(0),e&2){let t=_().$implicit;W(" ",t==null?null:t.fromStepName," -> ",t==null?null:t.toStepName," ")}}function Un(e,a){if(e&1&&(n(0,"td",38),p(1,Vn,1,2),o()),e&2){let t=a.$implicit;i(),_e((t==null?null:t.type)==="Transition"?1:-1)}}function Wn(e,a){e&1&&(n(0,"th",39),r(1),s(2,"translate"),o()),e&2&&(i(),c(" ",d(2,1,"REMARK")," "))}function Hn(e,a){if(e&1&&(n(0,"td",38),r(1),s(2,"limitTo"),o()),e&2){let t=a.$implicit;i(),c(" ",S(2,1,t==null?null:t.comment,"100")," ")}}function $n(e,a){e&1&&f(0,"th",42)}function zn(e,a){if(e&1){let t=E();n(0,"th",42)(1,"input",43),s(2,"translate"),ze("ngModelChange",function(m){w(t);let D=_();return $e(D.WorkflowFilter,m)||(D.WorkflowFilter=m),T(m)}),o()()}if(e&2){let t=_();i(),B("placeholder",d(2,2,"WORKFLOW_NAME")),He("ngModel",t.WorkflowFilter)}}function Gn(e,a){e&1&&f(0,"th",42)}function Qn(e,a){e&1&&f(0,"th",42)}function Yn(e,a){e&1&&f(0,"th",42)}function jn(e,a){e&1&&f(0,"th",42)}function qn(e,a){e&1&&f(0,"th",42)}function Kn(e,a){if(e&1&&(n(0,"td",44),f(1,"mat-paginator",45),o()),e&2){let t=_();i(),u("length",t.workflowLogResource.totalCount)("pageSize",t.workflowLogResource.pageSize)("pageSizeOptions",x(3,Tn))}}function Jn(e,a){e&1&&(n(0,"tr")(1,"td",46)(2,"div",47)(3,"b"),r(4),s(5,"translate"),o()()()()),e&2&&(i(4),c(" ",d(5,1,"NO_DATA_FOUND"),""))}function Xn(e,a){e&1&&f(0,"tr",48)}function Zn(e,a){e&1&&f(0,"tr",49)}function eo(e,a){e&1&&f(0,"tr",48)}function to(e,a){e&1&&f(0,"tr",50)}var Yt=(()=>{class e extends G{get WorkflowFilter(){return this._workflowFilter}set WorkflowFilter(t){this._workflowFilter=t;let l=`workflowName:${t}`;this.filterObservable$.next(l)}constructor(t,l,m){super(),this.workflowLogService=t,this.documentWorkflowService=l,this.dialog=m,this.documentId="",this.shouldLoad=!1,this.displayedColumns=["detail","createdDate","transitionName","workflowName","createdByName","fromStepName","comment"],this.displayFilteredColumns=["detail-search","initiateddate-search","transitionname-search","workflowname-search","initiatedUser-search","workflowsteps-search","comment-search"],this.footerToDisplayed=["footer"],this.filterObservable$=new Ve,this.workflowLogResource=new Ot,this.workflowLogResource.pageSize=10,this.workflowLogResource.orderBy="createdDate desc",this.workflowLogResource.documentId=this.documentId}ngOnChanges(t){t.shouldLoad&&this.shouldLoad&&(this.workflowLogResource.documentId=this.documentId,this.dataSource.loadWorkflowLogs(this.workflowLogResource))}ngOnInit(){this.dataSource=new At(this.workflowLogService),this.getResourceParameter(),this.sub$.sink=this.filterObservable$.pipe(Ue(1e3),We()).subscribe(t=>{let l=t.split(":");l[0]==="workflowName"?this.workflowLogResource.workflowName=l[1]:l[0]==="docName"&&(this.workflowLogResource.documentName=l[1]),this.paginator.pageIndex=0,this.workflowLogResource.skip=0,this.dataSource.loadWorkflowLogs(this.workflowLogResource)})}ngAfterViewInit(){this.sort&&this.paginator&&(this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=pe(this.sort.sortChange,this.paginator.page).pipe(ue(()=>{this.workflowLogResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.workflowLogResource.pageSize=this.paginator.pageSize,this.workflowLogResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadWorkflowLogs(this.workflowLogResource)})).subscribe())}onWorkflowsChanges(t){t?this.workflowLogResource.workflowName=t:this.workflowLogResource.workflowName="",this.workflowLogResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadWorkflowLogs(this.workflowLogResource)}onDocumentChange(t){t?this.workflowLogResource.documentName=t:this.workflowLogResource.documentName="",this.workflowLogResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadWorkflowLogs(this.workflowLogResource)}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(t=>{t&&(this.workflowLogResource.pageSize=t.pageSize,this.workflowLogResource.skip=t.skip,this.workflowLogResource.totalCount=t.totalCount)})}viewVisualWorkflow(t){this.documentWorkflowService.getRunningVisualWorkflow(t.documentWorkflowId).subscribe({next:l=>{l.documentId=t.documentId,l.documentName=t.documentName,this.dialog.open(yt,{width:"90vw",data:Be({},l)})},error:l=>{console.error("Error loading workflow:",l)}})}static{this.\u0275fac=function(l){return new(l||e)(Ee(Bt),Ee(Rt),Ee(z))}}static{this.\u0275cmp=I({type:e,selectors:[["app-document-workflow-logs"]],viewQuery:function(l,m){if(l&1&&(F(L,5),F(P,5)),l&2){let D;O(D=A())&&(m.paginator=D.first),O(D=A())&&(m.sort=D.first)}},inputs:{documentId:"documentId",shouldLoad:"shouldLoad"},standalone:!0,features:[H,k,b],decls:44,vars:8,consts:[[1,"grid-height-large"],["mat-table","","matSortDisableClear","","matSort","","matSortActive","createdDate","matSortDirection","desc",1,"w-100",3,"dataSource"],["matColumnDef","detail"],["class","table-column-30","mat-header-cell","",4,"matHeaderCellDef"],["class","table-column-30","mat-cell","",4,"matCellDef"],["matColumnDef","workflowName"],["class","table-column-200","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","table-column-200","mat-cell","",4,"matCellDef"],["matColumnDef","createdByName"],["class","table-column-150","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","table-column-150","mat-cell","",4,"matCellDef"],["matColumnDef","createdDate"],["matColumnDef","transitionName"],["class","table-column-150","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","fromStepName"],["matColumnDef","comment"],["matColumnDef","detail-search"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","workflowname-search"],["matColumnDef","initiatedUser-search"],["matColumnDef","initiateddate-search"],["matColumnDef","transitionname-search"],["matColumnDef","workflowsteps-search"],["matColumnDef","comment-search"],["matColumnDef","footer"],["mat-footer-cell","","colspan","9",4,"matFooterCellDef"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-row","",4,"matHeaderRowDef"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],["mat-header-cell","",1,"table-column-30"],["mat-cell","",1,"table-column-30"],[1,"btn","btn-sm","btn-primary",3,"click"],["name","eye",1,"small-icon"],["mat-header-cell","","mat-sort-header","",1,"table-column-200"],["mat-cell","",1,"table-column-200"],["mat-header-cell","","mat-sort-header","",1,"table-column-150"],["mat-cell","",1,"table-column-150"],["mat-header-cell","",1,"table-column-150"],[1,"badge","bg-success"],[1,"badge","bg-danger"],["mat-header-cell",""],["type","text",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["mat-footer-cell","","colspan","9"],[3,"length","pageSize","pageSizeOptions"],["colspan","9"],[1,"m-2"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(l,m){l&1&&(n(0,"div",0)(1,"table",1),h(2,2),p(3,En,3,3,"th",3)(4,In,3,0,"td",4),C(),h(5,5),p(6,bn,3,3,"th",6)(7,Rn,2,1,"td",7),C(),h(8,8),p(9,yn,3,3,"th",9)(10,Mn,2,1,"td",10),C(),h(11,11),p(12,Ln,3,3,"th",9)(13,kn,3,4,"td",10),C(),h(14,12),p(15,Nn,3,3,"th",13)(16,An,4,1,"td",10),C(),h(17,14),p(18,Bn,3,3,"th",13)(19,Un,2,1,"td",10),C(),h(20,15),p(21,Wn,3,3,"th",13)(22,Hn,3,4,"td",10),C(),h(23,16),p(24,$n,1,0,"th",17),C(),h(25,18),p(26,zn,3,4,"th",17),C(),h(27,19),p(28,Gn,1,0,"th",17),C(),h(29,20),p(30,Qn,1,0,"th",17),C(),h(31,21),p(32,Yn,1,0,"th",17),C(),h(33,22),p(34,jn,1,0,"th",17),C(),h(35,23),p(36,qn,1,0,"th",17),C(),h(37,24),p(38,Kn,2,4,"td",25),C(),p(39,Jn,6,3,"tr",26)(40,Xn,1,0,"tr",27)(41,Zn,1,0,"tr",28)(42,eo,1,0,"tr",29)(43,to,1,0,"tr",30),o()()),l&2&&(i(),u("dataSource",m.dataSource),i(39),u("matHeaderRowDef",m.displayedColumns)("matHeaderRowDefSticky",!0),i(),u("matRowDefColumns",m.displayedColumns),i(),u("matHeaderRowDef",m.displayFilteredColumns),i(),u("matFooterRowDef",x(7,wn))("matFooterRowDefSticky",!0))},dependencies:[j,L,y,R,nt,Ie,be,Xe,Re,Y,Me,M,Le,V,ce,q,J,ne,Z,K,ae,X,oe,ee,ie,te,re,le,me,se,ve,P,Se]})}}return e})();var io=()=>["ALL_DOCUMENTS_EDIT_DOCUMENT","ASSIGNED_DOCUMENTS_EDIT_DOCUMENT"];function no(e,a){if(e&1&&(n(0,"div",11)(1,"label",12),r(2),s(3,"translate"),o(),n(4,"p"),r(5),o()()),e&2){let t=_();i(2),c("",d(3,2,"STATUS")," :"),i(3),N(t.documentInfo.statusName)}}function oo(e,a){if(e&1&&(n(0,"div",11)(1,"label",12),r(2),s(3,"translate"),o(),n(4,"p"),r(5),o()()),e&2){let t=_();i(2),c("",d(3,2,"CLIENT")," :"),i(3),N(t.documentInfo.companyName)}}function ao(e,a){if(e&1&&(n(0,"div",11)(1,"label",12),r(2),s(3,"translate"),o(),n(4,"p"),r(5),s(6,"translate"),o()()),e&2){let t=_();i(2),c("",d(3,3,"RETENTION_PERIOD")," :"),i(3),W(" ",t.documentInfo.retentionPeriod," (",d(6,5,"DAYS"),")")}}function ro(e,a){if(e&1&&(n(0,"div",11)(1,"label",12),r(2),s(3,"translate"),o(),n(4,"p"),r(5),s(6,"retentionAction"),o()()),e&2){let t=_();i(2),c("",d(3,2,"RETENTION_ACTION")," :"),i(3),c(" ",d(6,4,t.documentInfo.retentionAction),"")}}function mo(e,a){if(e&1&&(n(0,"span"),r(1),f(2,"br"),o()),e&2){let t=a.$implicit,l=a.index;i(),W(" ",l+1,".",t.metatag," ")}}function lo(e,a){if(e&1&&(n(0,"div",11)(1,"label",12),r(2),s(3,"translate"),o(),f(4,"br"),p(5,mo,3,2,"span",20),o()),e&2){let t=_();i(2),c("",d(3,2,"META_TAGS")," :"),i(3),u("ngForOf",t.mataTags)}}function so(e,a){if(e&1&&(n(0,"div",21)(1,"label",12),r(2),s(3,"translate"),o(),n(4,"span")(5,"textarea",22),r(6),o()()()),e&2){let t=_();i(2),c("",d(3,3,"DESCRIPTION")," :"),i(3),u("disabled",!0),i(),N(t.documentInfo.description)}}function co(e,a){if(e&1){let t=E();n(0,"div",23)(1,"button",24),v("click",function(){w(t);let m=_();return T(m.editDocument())}),f(2,"i-feather",25),n(3,"span",26),r(4),s(5,"translate"),o()()()}e&2&&(i(4),c(" ",d(5,1,"EDIT"),""))}var Nr=(()=>{class e extends G{constructor(){super(...arguments),this.documentInfo={},this.documentService=g(ke),this.route=g(qe),this.mataTags=[],this.location=g(Ge),this.categoryStore=g(gt),this.clientStore=g(Dt),this.dialog=g(z),this.loadedTabs=[!0,!1,!1,!1,!1,!1,!1]}ngOnInit(){this.sub$.sink=this.route.data.subscribe(t=>{let l=t.document;l&&(this.documentInfo=l)}),this.getDocumentMetaData()}onTabChange(t){let l=t.index;this.loadedTabs[l]||(this.loadedTabs[l]=!0)}getDocumentMetaData(){this.documentService.getdocumentMetadataById(this.documentInfo.id).subscribe(t=>{let l=t;l&&(this.mataTags=l)})}refreshDocumentData(){this.getDocumentMetaData(),this.documentService.getDocument(this.documentInfo.id).subscribe(t=>{this.documentInfo=t})}editDocument(){let t={document:this.documentInfo,categories:this.categoryStore.categories(),clients:this.clientStore.clients()},l=this.dialog.open(wt,{width:"700px",data:Object.assign({},t)});this.sub$.sink=l.afterClosed().subscribe(m=>{m==="loaded"&&this.refreshDocumentData()})}onDocumentCancel(){this.location.back()}static{this.\u0275fac=(()=>{let t;return function(m){return(t||(t=fe(e)))(m||e)}})()}static{this.\u0275cmp=I({type:e,selectors:[["app-document-details"]],standalone:!0,features:[H,b],decls:84,vars:68,consts:[[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],[1,"ps-2","text-primary"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],["mat-stretch-tabs","false","mat-align-tabs","start",3,"selectedTabChange"],[1,"nav-tabs",3,"label"],[1,"card","tab-card"],[1,"body"],[1,"col-md-3"],[1,"fw-bold"],["class","col-md-3",4,"ngIf"],["class","col-md-6",4,"ngIf"],["class","col-md-12 mt-0 mb-0",4,"hasClaim"],[3,"shouldLoad","documentId"],[3,"shouldLoad","data","documentId"],["type","button",1,"ms-2","btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],[4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"form-control-plaintext",3,"disabled"],[1,"col-md-12","mt-0","mb-0"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],["name","edit",1,"small-icon"],[1,"d-none","d-sm-inline"]],template:function(l,m){l&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),r(5),s(6,"translate"),n(7,"span",5),r(8),o()()()(),n(9,"div",2)(10,"div",6)(11,"div",2)(12,"mat-tab-group",7),v("selectedTabChange",function(Pe){return m.onTabChange(Pe)}),n(13,"mat-tab",8),s(14,"translate"),n(15,"div",9)(16,"div",10)(17,"div",2)(18,"div",11)(19,"label",12),r(20),s(21,"translate"),o(),n(22,"p"),r(23),o()(),n(24,"div",11)(25,"label",12),r(26),s(27,"translate"),o(),n(28,"p"),r(29),o()(),p(30,no,6,4,"div",13)(31,oo,6,4,"div",13),n(32,"div",11)(33,"label",12),r(34),s(35,"translate"),o(),n(36,"p"),r(37),o()(),n(38,"div",11)(39,"label",12),r(40),s(41,"translate"),o(),n(42,"p"),r(43),s(44,"utcToLocalTime"),o()(),p(45,ao,7,7,"div",11)(46,ro,7,6,"div",11)(47,lo,6,4,"div",13)(48,so,7,5,"div",14)(49,co,6,3,"div",15),o()()()(),n(50,"mat-tab",8),s(51,"translate"),n(52,"div",9)(53,"div",10),f(54,"app-document-permissions",16),o()()(),n(55,"mat-tab",8),s(56,"translate"),n(57,"div",9)(58,"div",10),f(59,"app-document-versions",17),o()()(),n(60,"mat-tab",8),s(61,"translate"),n(62,"div",9)(63,"div",10),f(64,"app-document-comments",16),o()()(),n(65,"mat-tab",8),s(66,"translate"),n(67,"div",9)(68,"div",10),f(69,"app-document-audit-trails",16),o()()(),n(70,"mat-tab",8),s(71,"translate"),n(72,"div",9)(73,"div",10),f(74,"app-document-reminders",16),o()()(),n(75,"mat-tab",8),s(76,"translate"),n(77,"div",9)(78,"div",10),f(79,"app-document-workflow-logs",16),o()()()()()()()(),n(80,"button",18),v("click",function(){return m.onDocumentCancel()}),f(81,"i-feather",19),r(82),s(83,"translate"),o()()),l&2&&(i(5),c("",d(6,38,"DOCUMENT_DETAILS")," : "),i(3),N(m.documentInfo.name),i(5),B("label",d(14,40,"GENERAL")),i(7),c("",d(21,42,"CATEGORY")," :"),i(3),N(m.documentInfo.categoryName),i(3),c("",d(27,44,"STORAGE")," :"),i(3),N(m.documentInfo.location),i(),u("ngIf",m.documentInfo.statusName),i(),u("ngIf",m.documentInfo.companyName),i(3),c("",d(35,46,"LAST_MODIFIED_BY")," :"),i(3),c(" ",m.documentInfo.updatedByName,""),i(3),c("",d(41,48,"LAST_MODIFIED_DATE")," :"),i(3),c(" ",S(44,50,m.documentInfo.modifiedDate,"short"),""),i(2),_e(m.documentInfo.retentionPeriod?45:-1),i(),_e(m.documentInfo.retentionAction?46:-1),i(),u("ngIf",m.mataTags.length>0),i(),u("ngIf",m.documentInfo.description),i(),u("hasClaim",x(67,io)),i(),B("label",d(51,53,"PERMISSION")),i(4),u("shouldLoad",m.loadedTabs[1])("documentId",m.documentInfo.id),i(),B("label",d(56,55,"VERSION_HISTORY")),i(4),u("shouldLoad",m.loadedTabs[2])("data",m.documentInfo)("documentId",m.documentInfo.id),i(),B("label",d(61,57,"COMMENT")),i(4),u("shouldLoad",m.loadedTabs[3])("documentId",m.documentInfo.id),i(),B("label",d(66,59,"DOCUMENT_AUDIT_TRAIL")),i(4),u("shouldLoad",m.loadedTabs[4])("documentId",m.documentInfo.id),i(),B("label",d(71,61,"REMINDERS")),i(4),u("shouldLoad",m.loadedTabs[5])("documentId",m.documentInfo.id),i(),B("label",d(76,63,"WORKFLOW_LOGS")),i(4),u("shouldLoad",m.loadedTabs[6])("documentId",m.documentInfo.id),i(3),c(" ",d(83,65,"CANCEL"),""))},dependencies:[y,R,he,Y,M,st,$,Vt,Wt,$t,zt,Qt,Yt,Le,V,U,Q,kt,Mt,Lt]})}}return e})();export{Nr as DocumentDetailsComponent};
