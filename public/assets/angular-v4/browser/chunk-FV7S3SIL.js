import{a as k}from"./chunk-OP6M3LK7.js";import{a as M}from"./chunk-KX634QZQ.js";import{C as G,D as V,F as W,G as Q,H,I as Y}from"./chunk-3O3IKF6A.js";import{ia as A,ja as B}from"./chunk-TR4MAYT5.js";import{p as D,t as R}from"./chunk-AWIVOLPG.js";import{a as O}from"./chunk-J2LIJEQH.js";import{B as T,c as E,e as g,h as x,i as N,o as F,r as b,u as y}from"./chunk-6EN4EXPL.js";import{$b as _,Cb as v,Fc as l,Gb as d,Gc as m,Ka as I,Md as $,Nd as z,Qb as a,Rb as i,Sb as u,Zb as P,dd as C,mc as s,nc as h,ob as t,oc as c,pb as p,yc as q,zb as w}from"./chunk-SXJN2XK6.js";function se(e,f){e&1&&(a(0,"div",17),s(1),l(2,"translate"),i()),e&2&&(t(),c(" ",m(2,1,"CURRENT_PASSWORD_IS_REQUIRED")," "))}function le(e,f){if(e&1&&(a(0,"div"),v(1,se,3,3,"div",11),i()),e&2){let r,n=_();t(),d("ngIf",(r=n.changePasswordForm.get("oldPasswordPassword").errors)==null?null:r.required)}}function me(e,f){e&1&&(a(0,"div",17),s(1),l(2,"translate"),i()),e&2&&(t(),c(" ",m(2,1,"PASSWORD_IS_REQUIRED")," "))}function de(e,f){e&1&&(a(0,"div",17),s(1),l(2,"translate"),i()),e&2&&(t(),c(" ",m(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function pe(e,f){if(e&1&&(a(0,"div"),v(1,me,3,3,"div",11)(2,de,3,3,"div",11),i()),e&2){let r,n,o=_();t(),d("ngIf",(r=o.changePasswordForm.get("password").errors)==null?null:r.required),t(),d("ngIf",(n=o.changePasswordForm.get("password").errors)==null?null:n.minlength)}}function ce(e,f){e&1&&(a(0,"div",17),s(1),l(2,"translate"),i()),e&2&&(t(),c(" ",m(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function ue(e,f){if(e&1&&(a(0,"div"),v(1,ce,3,3,"div",11),i()),e&2){let r,n=_();t(),d("ngIf",(r=n.changePasswordForm.get("confirmPassword").errors)==null?null:r.required)}}function ve(e,f){e&1&&(a(0,"div",17),s(1),l(2,"translate"),i()),e&2&&(t(),c(" ",m(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}var J=(()=>{class e extends A{constructor(r,n,o,S,U,j,L){super(),this.userService=r,this.fb=n,this.dialogRef=o,this.data=S,this.toastrService=U,this.securityService=j,this.translationService=L}ngOnInit(){this.createChangePasswordForm(),this.changePasswordForm.get("email").setValue(this.data.email)}createChangePasswordForm(){this.changePasswordForm=this.fb.group({email:[{value:"",disabled:!0}],oldPasswordPassword:["",[g.required]],password:["",[g.required,g.minLength(6)]],confirmPassword:["",[g.required]]},{validator:this.checkPasswords})}checkPasswords(r){let n=r.get("password").value,o=r.get("confirmPassword").value;return n===o?null:{notSame:!0}}changePassword(){this.changePasswordForm.valid?this.sub$.sink=this.userService.changePassword(this.createBuildObject()).subscribe(r=>{this.toastrService.success(this.translationService.getValue("SUCCESSFULLY_CHANGED_PASSWORD")),this.securityService.logout(),this.dialogRef.close()}):this.changePasswordForm.markAllAsTouched()}createBuildObject(){return{email:"",oldPassword:this.changePasswordForm.get("oldPasswordPassword").value,newPassword:this.changePasswordForm.get("password").value,userName:this.changePasswordForm.get("email").value}}onNoClick(){this.dialogRef.close()}static{this.\u0275fac=function(n){return new(n||e)(p(k),p(T),p(G),p(V),p(D),p(O),p(B))}}static{this.\u0275cmp=I({type:e,selectors:[["app-change-password"]],features:[w],decls:38,vars:26,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"col-md-12","m-b-10"],[1,"form-label"],["formControlName","email","type","email",1,"form-control"],["autocomplete","new-password","formControlName","oldPasswordPassword","type","password",1,"form-control"],[4,"ngIf"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],[1,"col-md-12"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],["class","text-danger",4,"ngIf"],["mat-dialog-actions",""],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],["name","save",1,"small-icon"],[1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],[1,"text-danger"]],template:function(n,o){n&1&&(a(0,"h1",0),s(1),l(2,"translate"),i(),a(3,"div",1)(4,"form",2)(5,"div",3)(6,"label",4),s(7),l(8,"translate"),i(),u(9,"input",5),i(),a(10,"div",3)(11,"label",4),s(12),l(13,"translate"),i(),u(14,"input",6),v(15,le,2,1,"div",7),i(),a(16,"div",3)(17,"label",4),s(18),l(19,"translate"),i(),u(20,"input",8),v(21,pe,3,2,"div",7),i(),a(22,"div",9)(23,"label",4),s(24),l(25,"translate"),i(),u(26,"input",10),v(27,ue,2,1,"div",7)(28,ve,3,3,"div",11),i()()(),a(29,"div",12)(30,"button",13),P("click",function(){return o.changePassword()}),u(31,"i-feather",14),s(32),l(33,"translate"),i(),a(34,"button",15),P("click",function(){return o.onNoClick()}),u(35,"i-feather",16),s(36),l(37,"translate"),i()()),n&2&&(t(),h(m(2,12,"CHANGE_PASSWORD")),t(3),d("formGroup",o.changePasswordForm),t(3),h(m(8,14,"EMAIL")),t(5),h(m(13,16,"CURRENT_PASSWORD")),t(3),d("ngIf",o.changePasswordForm.get("oldPasswordPassword").touched&&o.changePasswordForm.get("oldPasswordPassword").errors),t(3),h(m(19,18,"NEW_PASSWORD")),t(3),d("ngIf",o.changePasswordForm.get("password").touched&&o.changePasswordForm.get("password").errors),t(3),h(m(25,20,"CONFIRM_PASSWORD")),t(3),d("ngIf",o.changePasswordForm.get("confirmPassword").touched&&o.changePasswordForm.get("confirmPassword").errors),t(),d("ngIf",o.changePasswordForm.get("confirmPassword").touched&&o.changePasswordForm.hasError("notSame")),t(4),c(" ",m(33,22,"SAVE"),""),t(4),c(" ",m(37,24,"CANCEL"),""))},dependencies:[C,F,E,x,N,b,y,Q,Y,H,M,R]})}}return e})();var fe=()=>["/"];function he(e,f){e&1&&(a(0,"div",25),s(1),l(2,"translate"),i()),e&2&&(t(),c(" ",m(2,1,"FIRST_NAME_IS_REQUIRED")," "))}function ge(e,f){if(e&1&&(a(0,"div"),v(1,he,3,3,"div",24),i()),e&2){let r,n=_();t(),d("ngIf",(r=n.userForm.get("firstName").errors)==null?null:r.required)}}function _e(e,f){e&1&&(a(0,"div",25),s(1),l(2,"translate"),i()),e&2&&(t(),c(" ",m(2,1,"LAST_NAME_IS_REQUIRED")," "))}function Se(e,f){if(e&1&&(a(0,"div"),v(1,_e,3,3,"div",24),i()),e&2){let r,n=_();t(),d("ngIf",(r=n.userForm.get("lastName").errors)==null?null:r.required)}}function Pe(e,f){e&1&&(a(0,"div",25),s(1),l(2,"translate"),i()),e&2&&(t(),c(" ",m(2,1,"MOBILE_IS_REQUIRED")," "))}function Ie(e,f){if(e&1&&(a(0,"div"),v(1,Pe,3,3,"div",24),i()),e&2){let r,n=_();t(),d("ngIf",(r=n.userForm.get("phoneNumber").errors)==null?null:r.required)}}var Te=(()=>{class e extends A{constructor(r,n,o,S,U,j,L){super(),this.router=r,this.fb=n,this.userService=o,this.toastrService=S,this.dialog=U,this.securityService=j,this.translationService=L}ngOnInit(){this.createUserForm(),this.user=this.securityService.getUserDetail(),this.user&&this.userForm.patchValue(this.user)}createUserForm(){this.userForm=this.fb.group({id:[""],firstName:["",[g.required]],lastName:["",[g.required]],email:[{value:"",disabled:!0},[g.required,g.email]],phoneNumber:["",[g.required]]})}updateProfile(){if(this.userForm.valid){let r=this.createBuildObject();this.sub$.sink=this.userService.updateUserProfile(r).subscribe(n=>{this.user.firstName=n.firstName,this.user.lastName=n.lastName,this.user.phoneNumber=n.phoneNumber,this.toastrService.success(this.translationService.getValue("PROFILE_UPDATED_SUCCESSFULLY")),this.securityService.setUserDetail(this.user),this.router.navigate(["/"])})}else this.userForm.markAllAsTouched()}createBuildObject(){return{id:this.userForm.get("id").value,firstName:this.userForm.get("firstName").value,lastName:this.userForm.get("lastName").value,email:this.userForm.get("email").value,phoneNumber:this.userForm.get("phoneNumber").value,userName:this.userForm.get("email").value}}changePassword(){this.dialog.open(J,{width:"350px",data:Object.assign({},this.user)})}static{this.\u0275fac=function(n){return new(n||e)(p($),p(T),p(k),p(D),p(W),p(O),p(B))}}static{this.\u0275cmp=I({type:e,selectors:[["app-my-profile"]],features:[w],decls:52,vars:30,consts:[[1,"content"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col","mb-2"],[1,"mb-0","page-title"],[1,"col-auto","d-flex","justify-content-end","mb-2"],[1,"btn","btn-success","btn-sm",3,"click"],["name","key",1,"btn-success","small-icon"],[1,"card"],[1,"body"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["formControlName","firstName","type","text",1,"form-control"],[4,"ngIf"],["formControlName","lastName","type","text",1,"form-control"],["formControlName","phoneNumber","type","text",1,"form-control"],["formControlName","email","type","email",1,"form-control"],[1,"m-t-10","col-md-12"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],["name","save",1,"small-icon"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],["name","x-circle",1,"small-icon"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(n,o){n&1&&(a(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),s(5),l(6,"translate"),i()(),a(7,"div",5)(8,"button",6),P("click",function(){return o.changePassword()}),u(9,"i-feather",7),s(10),l(11,"translate"),i()()(),a(12,"div",8)(13,"div",9)(14,"form",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"label"),s(19),l(20,"translate"),i(),u(21,"input",14),v(22,ge,2,1,"div",15),i()(),a(23,"div",12)(24,"div",13)(25,"label"),s(26),l(27,"translate"),i(),u(28,"input",16),v(29,Se,2,1,"div",15),i()(),a(30,"div",12)(31,"div",13)(32,"label"),s(33),l(34,"translate"),i(),u(35,"input",17),v(36,Ie,2,1,"div",15),i()(),a(37,"div",12)(38,"div",13)(39,"label"),s(40),l(41,"translate"),i(),u(42,"input",18),i()(),a(43,"div",19)(44,"button",20),P("click",function(){return o.updateProfile()}),u(45,"i-feather",21),s(46),l(47,"translate"),i(),a(48,"button",22),u(49,"i-feather",23),s(50),l(51,"translate"),i()()()()()()()()),n&2&&(t(5),c(" ",m(6,13,"PROFILE")," "),t(5),c(" ",m(11,15,"CHANGE_PASSWORD")," "),t(4),d("formGroup",o.userForm),t(5),h(m(20,17,"FIRST_NAME")),t(3),d("ngIf",o.userForm.get("firstName").touched&&o.userForm.get("firstName").errors),t(4),h(m(27,19,"LAST_NAME")),t(3),d("ngIf",o.userForm.get("lastName").touched&&o.userForm.get("lastName").errors),t(4),h(m(34,21,"MOBILE_NUMBER")),t(3),d("ngIf",o.userForm.get("phoneNumber").touched&&o.userForm.get("phoneNumber").errors),t(4),h(m(41,23,"EMAIL")),t(6),c(" ",m(47,25,"SAVE"),""),t(2),d("routerLink",q(29,fe)),t(2),c(" ",m(51,27,"CANCEL"),""))},dependencies:[C,z,F,E,x,N,b,y,M,R]})}}return e})();export{Te as a};
