import{a as Ae,b as ze,c as Ue}from"./chunk-6EK7MLYI.js";import{a as Ve}from"./chunk-VZNWI3XM.js";import{e as he}from"./chunk-HUQBVWNM.js";import"./chunk-CZA53JXZ.js";import"./chunk-EDFYBFRY.js";import{a as He,b as Pe}from"./chunk-VYBREDH7.js";import"./chunk-2RZGI2GI.js";import{a as L,b as Ce,c as ke}from"./chunk-MDTWJNMV.js";import{a as W,b as Se}from"./chunk-FUBOQZYU.js";import{a as Le,b as We,c as De,d as Me,e as Re,f as Te,g as ve,h as be,i as Ee,j as ye,k as Ne,l as Ie,m as Fe,n as Oe,o as Be,p as $e}from"./chunk-ZQ2PWCHX.js";import"./chunk-TNLJ7CAF.js";import{c as xe}from"./chunk-UX7VFZY4.js";import{B as ue,D as we,J as ge,K as _e,d as se,f as pe,i as ce,k as fe}from"./chunk-VNAU6AHI.js";import"./chunk-2GYG6N64.js";import{a as le,b as me}from"./chunk-YTVNRIZ3.js";import{F as J}from"./chunk-3XAX4OT5.js";import{ia as ne,na as de}from"./chunk-NF46UI75.js";import{t as ae,u as re}from"./chunk-SIUWMJOE.js";import"./chunk-GTE6R5NX.js";import"./chunk-FGSJTZPD.js";import"./chunk-73F4PDV3.js";import{C as oe,D as ie,c as Z,h as ee,n as te}from"./chunk-TMWBOQE5.js";import{$ as H,$b as R,Ab as h,Ac as g,Bc as I,Dc as G,Ea as V,Gb as D,Jd as X,Kb as a,Lb as r,Mb as u,Na as C,Nb as p,O as B,Oa as k,Ob as c,Qb as S,Tb as z,Vb as w,W as $,Yb as M,Zc as q,a as F,ac as T,bc as v,ec as U,gc as m,hc as Q,ib as i,ic as f,jb as x,jc as j,jd as Y,mc as b,nc as E,o as O,oc as y,qa as P,rc as K,sc as N,tb as A,wb as l,zc as d}from"./chunk-EOQA7B6X.js";var Qe=()=>["footer"],je=()=>[10,20,30];function Ke(e,o){e&1&&(a(0,"th",43),m(1),d(2,"translate"),r()),e&2&&(i(),f(" ",g(2,1,"ACTION")," "))}function Ge(e,o){if(e&1){let t=S();a(0,"td",44)(1,"button",45),z("click",function(){let s=C(t).$implicit,_=w();return k(_.viewVisualWorkflow(s))}),u(2,"i-feather",46),r()()}}function qe(e,o){e&1&&(a(0,"th",47),m(1),d(2,"translate"),r()),e&2&&(i(),f(" ",g(2,1,"WROKFLOW")," "))}function Ye(e,o){if(e&1&&(a(0,"td",48),m(1),r()),e&2){let t=o.$implicit;i(),f(" ",t==null?null:t.workflowName," ")}}function Je(e,o){e&1&&(a(0,"th",49),m(1),d(2,"translate"),r()),e&2&&(i(),f(" ",g(2,1,"PERFORM_BY")," "))}function Xe(e,o){if(e&1&&(a(0,"td",50),m(1),r()),e&2){let t=o.$implicit;i(),f(" ",t==null?null:t.createdByName," ")}}function Ze(e,o){e&1&&(a(0,"th",49),m(1),d(2,"translate"),r()),e&2&&(i(),f(" ",g(2,1,"PERFORM_DATE")," "))}function et(e,o){if(e&1&&(a(0,"td",50),m(1),d(2,"utcToLocalTime"),r()),e&2){let t=o.$implicit;i(),f(" ",I(2,1,t==null?null:t.createdDate,"full")," ")}}function tt(e,o){e&1&&(a(0,"th",49),m(1),d(2,"translate"),r()),e&2&&(i(),f(" ",g(2,1,"DOCUMENT")," "))}function ot(e,o){if(e&1&&(p(0),a(1,"a",52),m(2),r(),c()),e&2){let t=w().$implicit;i(2),f(" ",t==null?null:t.documentName,"")}}function it(e,o){if(e&1&&m(0),e&2){let t=w().$implicit;f(" ",t==null?null:t.documentName," ")}}function nt(e,o){if(e&1&&(a(0,"td",50),l(1,ot,3,1,"ng-container",51)(2,it,1,1,"ng-template",null,0,G),r()),e&2){let t=o.$implicit,n=U(3);i(),h("ngIf",t.isDocumentDeleted===!1)("ngIfElse",n)}}function at(e,o){e&1&&(a(0,"th",53),m(1),d(2,"translate"),r()),e&2&&(i(),f(" ",g(2,1,"TRANSITION")," "))}function rt(e,o){if(e&1&&m(0),e&2){let t=w().$implicit;f(" ",t==null?null:t.transitionName," ")}}function lt(e,o){if(e&1&&(a(0,"span",54),m(1),r()),e&2){let t=w().$implicit;i(),Q(t==null?null:t.type)}}function mt(e,o){if(e&1&&(a(0,"span",55),m(1),r()),e&2){let t=w().$implicit;i(),f(" ",t==null?null:t.type,"")}}function st(e,o){if(e&1&&(a(0,"td",50),l(1,rt,1,1)(2,lt,2,1,"span",54)(3,mt,2,1,"span",55),r()),e&2){let t=o.$implicit;i(),D((t==null?null:t.type)==="Transition"?1:(t==null?null:t.type)==="Initiated"?2:3)}}function pt(e,o){e&1&&(a(0,"th",53),m(1),d(2,"translate"),r()),e&2&&(i(),f(" ",g(2,1,"STEPS")," "))}function ct(e,o){if(e&1&&m(0),e&2){let t=w().$implicit;j(" ",t==null?null:t.fromStepName," -> ",t==null?null:t.toStepName," ")}}function ft(e,o){if(e&1&&(a(0,"td",50),l(1,ct,1,2),r()),e&2){let t=o.$implicit;i(),D((t==null?null:t.type)==="Transition"?1:-1)}}function dt(e,o){e&1&&(a(0,"th",53),m(1),d(2,"translate"),r()),e&2&&(i(),f(" ",g(2,1,"REMARK")," "))}function ut(e,o){if(e&1&&(a(0,"td",50),m(1),d(2,"limitTo"),r()),e&2){let t=o.$implicit;i(),f(" ",I(2,1,t==null?null:t.comment,"100")," ")}}function wt(e,o){e&1&&u(0,"th",56)}function gt(e,o){if(e&1){let t=S();a(0,"th",56)(1,"input",57),d(2,"translate"),y("ngModelChange",function(s){C(t);let _=w();return E(_.WorkflowFilter,s)||(_.WorkflowFilter=s),k(s)}),r()()}if(e&2){let t=w();i(),M("placeholder",g(2,2,"WORKFLOW_NAME")),b("ngModel",t.WorkflowFilter)}}function _t(e,o){e&1&&u(0,"th",56)}function ht(e,o){e&1&&u(0,"th",56)}function Ct(e,o){if(e&1){let t=S();a(0,"th",56)(1,"input",58),d(2,"translate"),y("ngModelChange",function(s){C(t);let _=w();return E(_.DocNameFilter,s)||(_.DocNameFilter=s),k(s)}),r()()}if(e&2){let t=w();i(),M("placeholder",g(2,2,"DOCUMENT_NAME")),b("ngModel",t.DocNameFilter)}}function kt(e,o){e&1&&u(0,"th",56)}function xt(e,o){e&1&&u(0,"th",56)}function St(e,o){e&1&&u(0,"th",56)}function Lt(e,o){if(e&1&&(a(0,"td",59),u(1,"mat-paginator",60),r()),e&2){let t=w();i(),h("length",t.workflowLogResource.totalCount)("pageSize",t.workflowLogResource.pageSize)("pageSizeOptions",N(3,je))}}function Wt(e,o){e&1&&(a(0,"tr")(1,"td",61)(2,"div",62)(3,"b"),m(4),d(5,"translate"),r()()()()),e&2&&(i(4),f(" ",g(5,1,"NO_DATA_FOUND"),""))}function Dt(e,o){e&1&&u(0,"tr",63)}function Mt(e,o){e&1&&u(0,"tr",64)}function Rt(e,o){e&1&&u(0,"tr",63)}function Tt(e,o){e&1&&u(0,"tr",65)}var co=(()=>{class e extends ne{get WorkflowFilter(){return this._workflowFilter}set WorkflowFilter(t){this._workflowFilter=t;let n=`workflowName:${t}`;this.filterObservable$.next(n)}get DocNameFilter(){return this._docNameFilter}set DocNameFilter(t){this._docNameFilter=t;let n=`docName:${t}`;this.filterObservable$.next(n)}constructor(t,n,s){super(),this.workflowLogService=t,this.documentWorkflowService=n,this.dialog=s,this.displayedColumns=["detail","createdDate","transitionName","workflowName","documentName","createdByName","fromStepName","comment"],this.displayFilteredColumns=["detail-search","initiateddate-search","transitionname-search","workflowname-search","documentname-search","initiatedUser-search","workflowsteps-search","comment-search"],this.footerToDisplayed=["footer"],this.filterObservable$=new O,this.workflowLogResource=new Ae,this.workflowLogResource.pageSize=10,this.workflowLogResource.orderBy="createdDate desc"}ngOnInit(){this.dataSource=new ze(this.workflowLogService),this.dataSource.loadWorkflowLogs(this.workflowLogResource),this.getResourceParameter(),this.sub$.sink=this.filterObservable$.pipe($(1e3),H()).subscribe(t=>{let n=t.split(":");n[0]==="workflowName"?this.workflowLogResource.workflowName=n[1]:n[0]==="docName"&&(this.workflowLogResource.documentName=n[1]),this.paginator.pageIndex=0,this.workflowLogResource.skip=0,this.dataSource.loadWorkflowLogs(this.workflowLogResource)})}ngAfterViewInit(){this.sort&&this.paginator&&(this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=B(this.sort.sortChange,this.paginator.page).pipe(P(()=>{this.workflowLogResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.workflowLogResource.pageSize=this.paginator.pageSize,this.workflowLogResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadWorkflowLogs(this.workflowLogResource)})).subscribe())}onWorkflowsChanges(t){t?this.workflowLogResource.workflowName=t:this.workflowLogResource.workflowName="",this.workflowLogResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadWorkflowLogs(this.workflowLogResource)}onDocumentChange(t){t?this.workflowLogResource.documentName=t:this.workflowLogResource.documentName="",this.workflowLogResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadWorkflowLogs(this.workflowLogResource)}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(t=>{t&&(this.workflowLogResource.pageSize=t.pageSize,this.workflowLogResource.skip=t.skip,this.workflowLogResource.totalCount=t.totalCount)})}viewVisualWorkflow(t){this.documentWorkflowService.getRunningVisualWorkflow(t.documentWorkflowId).subscribe({next:n=>{n.documentId=t.documentId,n.documentName=t.documentName,this.dialog.open(Pe,{width:"90vw",data:F({},n)})},error:n=>{console.error("Error loading workflow:",n)}})}static{this.\u0275fac=function(n){return new(n||e)(x(Ue),x(He),x(J))}}static{this.\u0275cmp=V({type:e,selectors:[["app-workflow-logs"]],viewQuery:function(n,s){if(n&1&&(R(W,5),R(L,5)),n&2){let _;T(_=v())&&(s.paginator=_.first),T(_=v())&&(s.sort=_.first)}},standalone:!0,features:[A,K],decls:60,vars:12,consts:[["deletedTemplate",""],[1,"content"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],[3,"code"],[1,"card"],[1,"body"],[1,"table-responsive"],[1,"grid-height-large"],["mat-table","","matSortDisableClear","","matSort","","matSortActive","createdDate","matSortDirection","desc",1,"w-100",3,"dataSource"],["matColumnDef","detail"],["class","table-column-30","mat-header-cell","",4,"matHeaderCellDef"],["class","table-column-30","mat-cell","",4,"matCellDef"],["matColumnDef","workflowName"],["class","table-column-200","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","table-column-200","mat-cell","",4,"matCellDef"],["matColumnDef","createdByName"],["class","table-column-150","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","table-column-150","mat-cell","",4,"matCellDef"],["matColumnDef","createdDate"],["matColumnDef","documentName"],["matColumnDef","transitionName"],["class","table-column-150","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","fromStepName"],["matColumnDef","comment"],["matColumnDef","detail-search"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","workflowname-search"],["matColumnDef","initiatedUser-search"],["matColumnDef","initiateddate-search"],["matColumnDef","documentname-search"],["matColumnDef","transitionname-search"],["matColumnDef","workflowsteps-search"],["matColumnDef","comment-search"],["matColumnDef","footer"],["mat-footer-cell","","colspan","9",4,"matFooterCellDef"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-row","",4,"matHeaderRowDef"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],["mat-header-cell","",1,"table-column-30"],["mat-cell","",1,"table-column-30"],[1,"btn","btn-sm","btn-primary",3,"click"],["name","eye",1,"small-icon"],["mat-header-cell","","mat-sort-header","",1,"table-column-200"],["mat-cell","",1,"table-column-200"],["mat-header-cell","","mat-sort-header","",1,"table-column-150"],["mat-cell","",1,"table-column-150"],[4,"ngIf","ngIfElse"],[1,"doc-link"],["mat-header-cell","",1,"table-column-150"],[1,"badge","bg-success"],[1,"badge","bg-danger"],["mat-header-cell",""],["type","text",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["type","text",1,"form-control","w-90",3,"ngModelChange","placeholder","ngModel"],["mat-footer-cell","","colspan","9"],[3,"length","pageSize","pageSizeOptions"],["colspan","9"],[1,"m-2"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(n,s){n&1&&(a(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"span",5),m(5),d(6,"translate"),u(7,"app-page-help-text",6),r()()(),a(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"table",11),p(13,12),l(14,Ke,3,3,"th",13)(15,Ge,3,0,"td",14),c(),p(16,15),l(17,qe,3,3,"th",16)(18,Ye,2,1,"td",17),c(),p(19,18),l(20,Je,3,3,"th",19)(21,Xe,2,1,"td",20),c(),p(22,21),l(23,Ze,3,3,"th",19)(24,et,3,4,"td",20),c(),p(25,22),l(26,tt,3,3,"th",19)(27,nt,4,2,"td",20),c(),p(28,23),l(29,at,3,3,"th",24)(30,st,4,1,"td",20),c(),p(31,25),l(32,pt,3,3,"th",24)(33,ft,2,1,"td",20),c(),p(34,26),l(35,dt,3,3,"th",24)(36,ut,3,4,"td",20),c(),p(37,27),l(38,wt,1,0,"th",28),c(),p(39,29),l(40,gt,3,4,"th",28),c(),p(41,30),l(42,_t,1,0,"th",28),c(),p(43,31),l(44,ht,1,0,"th",28),c(),p(45,32),l(46,Ct,3,4,"th",28),c(),p(47,33),l(48,kt,1,0,"th",28),c(),p(49,34),l(50,xt,1,0,"th",28),c(),p(51,35),l(52,St,1,0,"th",28),c(),p(53,36),l(54,Lt,2,4,"td",37),c(),l(55,Wt,6,3,"tr",38)(56,Dt,1,0,"tr",39)(57,Mt,1,0,"tr",40)(58,Rt,1,0,"tr",41)(59,Tt,1,0,"tr",42),r()()()()()()()),n&2&&(i(5),f("",g(6,9,"WORKFLOW_LOGS")," "),i(2),h("code","WORKFLOW_LOGS"),i(5),h("dataSource",s.dataSource),i(44),h("matHeaderRowDef",s.displayedColumns)("matHeaderRowDefSticky",!0),i(),h("matRowDefColumns",s.displayedColumns),i(),h("matHeaderRowDef",s.displayFilteredColumns),i(),h("matFooterRowDef",N(11,Qe))("matFooterRowDefSticky",!0))},dependencies:[oe,Z,ee,te,re,ae,Y,q,X,de,ie,me,le,fe,he,_e,ge,se,pe,Ve,xe,ue,Se,W,ce,$e,Le,De,Ee,Re,We,Ne,Me,ye,Te,be,ve,Ie,Oe,Fe,Be,we,ke,L,Ce]})}}return e})();export{co as WorkflowLogsComponent};
