import{a as Be,b as Fe}from"./chunk-MTEO5YAQ.js";import"./chunk-5DGY2OXT.js";import{a as Me}from"./chunk-VBYTSXUA.js";import"./chunk-EDFYBFRY.js";import{b as we}from"./chunk-I5DMEMR4.js";import"./chunk-DDGV2SYP.js";import"./chunk-4PLUQBVO.js";import{a as Ne,b as Oe,c as be}from"./chunk-WGGER5HX.js";import{a as Ie}from"./chunk-DL4SMTXP.js";import"./chunk-V4GBUP5U.js";import{C as ae,E as re,H as me,I as le,J as pe,K as ce,L as de,M as se,N as ue,O as fe,P as he,Q as _e,R as ge,S as Ce,T as Te,U as De,V as ve,W as Se,Y as w,Z as ye,_ as Re,ba as N,ca as Ae,f as ne,ha as xe,i as oe,ja as Ee}from"./chunk-H5SZDBVN.js";import{b as K}from"./chunk-XE6VZSAJ.js";import"./chunk-KX634QZQ.js";import{L as Z}from"./chunk-3O3IKF6A.js";import{ia as X,ja as ie}from"./chunk-TR4MAYT5.js";import{t as ee,u as te}from"./chunk-AWIVOLPG.js";import"./chunk-J2LIJEQH.js";import"./chunk-AGIEFCW2.js";import"./chunk-F5F27R7A.js";import"./chunk-6EN4EXPL.js";import{$ as H,$b as T,Ca as v,Cb as u,Fa as z,Fc as l,Gb as s,Gc as p,Hc as W,Ka as j,La as S,N as k,Pd as F,Q as $,Qb as o,Rb as a,Sb as g,Ta as y,Tb as h,Ua as R,Ub as _,Wb as Q,Zb as x,cc as D,cd as Y,dd as q,fa as L,fc as E,gc as I,hc as M,hd as G,mc as r,ob as i,oc as m,pb as A,pc as b,pd as J,wa as O,yc as V,zb as P,zc as B}from"./chunk-SXJN2XK6.js";var He=["input"],Le=e=>({"margin-right.px":e}),ze=e=>({"margin-left.px":e}),je=()=>[10,20,30];function Pe(e,n){if(e&1&&(o(0,"div")(1,"b"),r(2),a()()),e&2){let t=T().$implicit;i(2),m(" ",t.name,"")}}function Qe(e,n){if(e&1&&(o(0,"div"),r(1),a()),e&2){let t=T().$implicit;i(),m(" ",t.name," ")}}function Ve(e,n){if(e&1&&(o(0,"ng-option",37)(1,"div",38),u(2,Pe,3,1,"div",39)(3,Qe,2,1,"div",39),a()()),e&2){let t=n.$implicit,d=T();s("value",t.id),i(),s("ngStyle",d.direction==="rtl"?B(4,Le,t.deafLevel*20):B(6,ze,t.deafLevel*20)),i(),s("ngIf",!t.parentId),i(),s("ngIf",t.parentId)}}function We(e,n){if(e&1&&(o(0,"ng-option",37),r(1),l(2,"translate"),a()),e&2){let t=n.$implicit;s("value",t),i(),m(" ",p(2,2,t.toUpperCase())," ")}}function Ye(e,n){if(e&1&&(o(0,"ng-option",37),r(1),a()),e&2){let t=n.$implicit;s("value",t.id),i(),b(" ",t.firstName," ",t.lastName," ")}}function qe(e,n){e&1&&(o(0,"th",40),r(1),l(2,"translate"),a()),e&2&&(i(),m(" ",p(2,1,"NAME")," "))}function Ge(e,n){if(e&1&&(o(0,"td",41),r(1),a()),e&2){let t=n.$implicit;i(),m(" ",t.documentName," ")}}function Je(e,n){e&1&&(o(0,"th",40),r(1),l(2,"translate"),a()),e&2&&(i(),m(" ",p(2,1,"CATEGORY_NAME")," "))}function Ke(e,n){if(e&1&&(o(0,"td",41),r(1),a()),e&2){let t=n.$implicit;i(),m(" ",t.categoryName," ")}}function Xe(e,n){e&1&&(o(0,"th",40),r(1),l(2,"translate"),l(3,"translate"),a()),e&2&&(i(),b(" ",p(2,2,"ACTION")," ",p(3,4,"DATE"),""))}function Ze(e,n){if(e&1&&(o(0,"td",41),r(1),l(2,"utcToLocalTime"),a()),e&2){let t=n.$implicit;i(),m(" ",W(2,1,t==null?null:t.createdDate,"short")," ")}}function et(e,n){e&1&&(o(0,"th",40),r(1),l(2,"translate"),a()),e&2&&(i(),m(" ",p(2,1,"OPERATION")," "))}function tt(e,n){if(e&1&&(o(0,"td",41),r(1),l(2,"translate"),a()),e&2){let t=n.$implicit;i(),m(" ",p(2,1,t.operationName.toUpperCase())," ")}}function it(e,n){e&1&&(o(0,"th",40),r(1),l(2,"translate"),a()),e&2&&(i(),m(" ",p(2,1,"BY_WHOM")," "))}function nt(e,n){if(e&1&&(o(0,"td",41),r(1),a()),e&2){let t=n.$implicit;i(),m(" ",t==null?null:t.createdBy," ")}}function ot(e,n){e&1&&(o(0,"th",40),r(1),l(2,"translate"),a()),e&2&&(i(),m(" ",p(2,1,"TO_WHOM_USER")," "))}function at(e,n){if(e&1&&(o(0,"td",41),r(1),a()),e&2){let t=n.$implicit;i(),m(" ",t==null?null:t.permissionUser," ")}}function rt(e,n){e&1&&(o(0,"th",40),r(1),l(2,"translate"),a()),e&2&&(i(),m(" ",p(2,1,"TO_WHOM_ROLE")," "))}function mt(e,n){if(e&1&&(o(0,"td",41),r(1),a()),e&2){let t=n.$implicit;i(),m(" ",t==null?null:t.permissionRole," ")}}function lt(e,n){if(e&1&&(o(0,"td",42),g(1,"mat-paginator",43),a()),e&2){let t=T();i(),s("length",t.documentResource.totalCount)("pageSize",t.documentResource.pageSize)("pageSizeOptions",V(3,je))}}function pt(e,n){e&1&&g(0,"tr",44)}function ct(e,n){e&1&&g(0,"tr",45)}function dt(e,n){e&1&&g(0,"tr",46)}function st(e,n){e&1&&(o(0,"tr")(1,"td",47)(2,"div",48)(3,"b"),r(4),l(5,"translate"),a()()()()),e&2&&(i(4),m(" ",p(5,1,"NO_DATA_FOUND"),""))}var ke=(()=>{class e extends X{constructor(t,d,c){super(),this.documentAuditTrailService=t,this.commonService=d,this.translationService=c,this.documentOperations=Object.values(K),this.documentAuditTrails=[],this.displayedColumns=["createdDate","documentName","categoryName","operationName","createdBy","permissionUser","permissionRole"],this.footerToDisplayed=["footer"],this.users=[],this.categoryStore=z(we),this.documentResource=new Me,this.documentResource.pageSize=10,this.documentResource.orderBy="createdDate desc"}ngOnInit(){this.dataSource=new Be(this.documentAuditTrailService),this.dataSource.loadDocumentAuditTrails(this.documentResource),this.getResourceParameter(),this.getUsers(),this.getLangDir()}getLangDir(){this.sub$.sink=this.translationService.lanDir$.subscribe(t=>this.direction=t)}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=$(this.sort.sortChange,this.paginator.page).pipe(O(()=>{this.documentResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.documentResource.pageSize=this.paginator.pageSize,this.documentResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadDocumentAuditTrails(this.documentResource)})).subscribe(),this.sub$.sink=k(this.input.nativeElement,"keyup").pipe(H(1e3),L(),O(()=>{this.paginator.pageIndex=0,this.documentResource.skip=0,this.documentResource.name=this.input.nativeElement.value,this.dataSource.loadDocumentAuditTrails(this.documentResource)})).subscribe()}onCategoryChange(t){t?this.documentResource.categoryId=t:this.documentResource.categoryId="",this.documentResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadDocumentAuditTrails(this.documentResource)}onUserChange(t){t?this.documentResource.createdBy=t:this.documentResource.createdBy="",this.documentResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadDocumentAuditTrails(this.documentResource)}onOperationChange(t){t?this.documentResource.operation=t:this.documentResource.operation="",this.documentResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadDocumentAuditTrails(this.documentResource)}getUsers(){this.sub$.sink=this.commonService.getUsersForDropdown().subscribe(t=>{this.users=t},t=>{t.messages.forEach(()=>{})})}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(t=>{t&&(this.documentResource.pageSize=t.pageSize,this.documentResource.skip=t.skip,this.documentResource.totalCount=t.totalCount)})}static{this.\u0275fac=function(d){return new(d||e)(A(Fe),A(Z),A(ie))}}static{this.\u0275cmp=j({type:e,selectors:[["app-document-audit-trail"]],viewQuery:function(d,c){if(d&1&&(E(N,5),E(w,5),E(He,5)),d&2){let f;I(f=M())&&(c.paginator=f.first),I(f=M())&&(c.sort=f.first),I(f=M())&&(c.input=f.first)}},features:[P],decls:64,vars:24,consts:[["input",""],[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"mb-2"],[1,"page-title"],["code","DOCUMENTS_AUDIT_TRAIL"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body"],[1,"row","margin-2"],[1,"col-md-3"],[1,"form-control",3,"placeholder"],[3,"change","placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"col"],[1,"table-responsive"],[1,"grid-height-medium"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","documentName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","categoryName"],["matColumnDef","createdDate"],["matColumnDef","operationName"],["matColumnDef","createdBy"],["matColumnDef","permissionUser"],["matColumnDef","permissionRole"],["matColumnDef","footer"],["mat-footer-cell","","colspan","7",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[4,"matNoDataRow"],[3,"value"],[1,"country-item",3,"ngStyle"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-footer-cell","","colspan","7"],[3,"length","pageSize","pageSizeOptions"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],["colspan","7"],[1,"m-2"]],template:function(d,c){if(d&1){let f=Q();o(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"span",8),r(8),l(9,"translate"),g(10,"app-page-help-text",9),a()()()()()(),o(11,"div",5)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14),g(17,"input",15,0),l(19,"translate"),a(),o(20,"div",14)(21,"ng-select",16),l(22,"translate"),x("change",function(C){return y(f),R(c.onCategoryChange(C))}),u(23,Ve,4,8,"ng-option",17),a()(),o(24,"div",14)(25,"ng-select",16),l(26,"translate"),x("change",function(C){return y(f),R(c.onOperationChange(C))}),u(27,We,3,4,"ng-option",17),a()(),o(28,"div",14)(29,"ng-select",16),l(30,"translate"),x("change",function(C){return y(f),R(c.onUserChange(C))}),u(31,Ye,2,3,"ng-option",17),a()()(),o(32,"div",5)(33,"div",18)(34,"div",19)(35,"div",20)(36,"table",21),h(37,22),u(38,qe,3,3,"th",23)(39,Ge,2,1,"td",24),_(),h(40,25),u(41,Je,3,3,"th",23)(42,Ke,2,1,"td",24),_(),h(43,26),u(44,Xe,4,6,"th",23)(45,Ze,3,4,"td",24),_(),h(46,27),u(47,et,3,3,"th",23)(48,tt,3,3,"td",24),_(),h(49,28),u(50,it,3,3,"th",23)(51,nt,2,1,"td",24),_(),h(52,29),u(53,ot,3,3,"th",23)(54,at,2,1,"td",24),_(),h(55,30),u(56,rt,3,3,"th",23)(57,mt,2,1,"td",24),_(),h(58,31),u(59,lt,2,4,"td",32),_(),u(60,pt,1,0,"tr",33)(61,ct,1,0,"tr",34)(62,dt,1,0,"tr",35)(63,st,6,3,"tr",36),a()()()()()()()()()()()}d&2&&(i(8),m("",p(9,14,"DOCUMENTS_AUDIT_TRAIL")," "),i(9),D("placeholder",p(19,16,"SEARCH_DOCUMENT_BY_NAME")),i(4),D("placeholder",p(22,18,"CATEGORY")),i(2),s("ngForOf",c.categoryStore.categories()),i(2),D("placeholder",p(26,20,"SELECT_OPERATION")),i(2),s("ngForOf",c.documentOperations),i(2),D("placeholder",p(30,22,"SELECT_USER")),i(2),s("ngForOf",c.users),i(5),s("dataSource",c.dataSource),i(24),s("matHeaderRowDef",c.displayedColumns)("matHeaderRowDefSticky",!0),i(),s("matRowDefColumns",c.displayedColumns),i(),s("matFooterRowDef",c.footerToDisplayed)("matFooterRowDefSticky",!0))},dependencies:[Y,q,G,me,pe,he,de,le,ge,ce,_e,se,fe,ue,Ce,De,Te,ve,w,ye,N,Oe,Ne,xe,ee,ne]})}}return e})();var ut=[{path:"",component:ke,data:{claimType:"DOCUMENT_AUDIT_TRAIL_VIEW_DOCUMENT_AUDIT_TRAIL"},canActivate:[Ie]}],$e=(()=>{class e{static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=v({imports:[F.forChild(ut),F]})}}return e})();var ti=(()=>{class e{static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=v({imports:[J,$e,Se,re,Re,Ae,ae,te,be,oe,Ee]})}}return e})();export{ti as DocumentAuditTrailModule};
