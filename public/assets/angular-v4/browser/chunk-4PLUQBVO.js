import{Ba as S,Fa as j,Tc as p,Uc as h,_a as w,a as e,b as u,wb as b,xb as v}from"./chunk-SXJN2XK6.js";function I(n){let t=h(()=>n());return T(t)?new Proxy(n,{get(o,r){return r in t?(b(o[r])||Object.defineProperty(o,r,{value:p(()=>o()[r]),configurable:!0}),I(o[r])):o[r]}}):n}var x=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function T(n){if(n===null||typeof n!="object"||E(n))return!1;let t=Object.getPrototypeOf(n);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(x.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function E(n){return typeof n?.[Symbol.iterator]=="function"}var W=new WeakMap,c=Symbol("STATE_SOURCE");function V(n,...t){n[c].update(o=>t.reduce((r,s)=>e(e({},r),typeof s=="function"?s(r):s),o)),O(n)}function C(n){return n[c]()}function K(n){return W.get(n[c])||[]}function O(n){let t=K(n);for(let o of t){let r=h(()=>C(n));o(r)}}function _(...n){let t=[...n],o=typeof t[0]=="function"?{}:t.shift(),r=t;return(()=>{class i{constructor(){let f=r.reduce((d,R)=>R(d),P()),{stateSignals:l,props:M,methods:D,hooks:k}=f,g=e(e(e({},l),M),D);this[c]=f[c];for(let d of Reflect.ownKeys(g))this[d]=g[d];let{onInit:y,onDestroy:m}=k;y&&y(),m&&j(w).onDestroy(m)}static \u0275fac=function(l){return new(l||i)};static \u0275prov=S({token:i,factory:i.\u0275fac,providedIn:o.providedIn||null})}return i})()}function P(){return{[c]:v({}),stateSignals:{},props:{},methods:{},hooks:{}}}function G(n,...t){let o=typeof n=="function"?[n,...t]:t;return r=>o.reduce((s,i)=>i(s),r)}function A(n){return t=>{let o=n(e(e(e({[c]:t[c]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(o),u(e({},t),{props:e(e({},t.props),o)})}}function J(n){return A(n)}function L(n){return t=>{let o=e(e(e({[c]:t[c]},t.stateSignals),t.props),t.methods),r=typeof n=="function"?n(o):n,s=i=>{let a=r[i],f=t.hooks[i];return a?()=>{f&&f(),a(o)}:f};return u(e({},t),{hooks:{onInit:s("onInit"),onDestroy:s("onDestroy")}})}}function N(n){return t=>{let o=n(e(e(e({[c]:t[c]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(o),u(e({},t),{methods:e(e({},t.methods),o)})}}function Q(n){return t=>{let o=typeof n=="function"?n():n,r=Reflect.ownKeys(o);t[c].update(i=>e(e({},i),o));let s=r.reduce((i,a)=>{let f=p(()=>t[c]()[a]);return u(e({},i),{[a]:I(f)})},{});return u(e({},t),{stateSignals:e(e({},t.stateSignals),s)})}}export{V as a,C as b,_ as c,G as d,J as e,L as f,N as g,Q as h};
