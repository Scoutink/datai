import{a as p,b as c}from"./chunk-DDGV2SYP.js";import{a as n,c as T,e as b,f as v,g as A,h as w}from"./chunk-4PLUQBVO.js";import{a as I}from"./chunk-V4GBUP5U.js";import{ja as x}from"./chunk-TR4MAYT5.js";import{p as g}from"./chunk-AWIVOLPG.js";import{a as H}from"./chunk-J2LIJEQH.js";import{b as U}from"./chunk-AGIEFCW2.js";import{$ as E,Ba as L,Ea as C,Fa as m,W as s,fa as u,l as d,ta as a,xd as S}from"./chunk-SXJN2XK6.js";var j=(()=>{class t{constructor(e,r){this.httpClient=e,this.commonHttpErrorService=r}getClients(){return this.httpClient.get("clients").pipe(s(this.commonHttpErrorService.handleError))}getClient(e){let r=`clients/${e}`;return this.httpClient.get(r).pipe(s(this.commonHttpErrorService.handleError))}addClient(e){return this.httpClient.post("clients",e).pipe(s(this.commonHttpErrorService.handleError))}updateClient(e){let r=`clients/${e.id}`;return this.httpClient.put(r,e).pipe(s(this.commonHttpErrorService.handleError))}deleteClient(e){let r=`clients/${e}`;return this.httpClient.delete(r).pipe(s(this.commonHttpErrorService.handleError))}static{this.\u0275fac=function(r){return new(r||t)(C(S),C(U))}}static{this.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var y={clients:[],client:null,loadList:!1,isAddUpdate:!1,commonError:null},G=T({providedIn:"root"},w(y),b(({})=>({})),A((t,l=m(j),e=m(g),r=m(x))=>({loadClients:c(d(E(300),a(()=>l.getClients().pipe(p({next:i=>{n(t,{clients:[...i],loadList:!1,isAddUpdate:!1,commonError:null})},error:i=>{n(t,{commonError:i,loadList:!1,isAddUpdate:!1})}}))))),deleteClientById:c(d(u(),a(i=>l.deleteClient(i).pipe(p({next:()=>{e.success(r.getValue("CLIENT_DELETED_SUCCESSFULLY")),n(t,{clients:t.clients().filter(o=>o.id!==i),loadList:!0})},error:o=>{n(t,{commonError:o,loadList:!1})}}))))),addUpdateClient:c(d(u(),a(i=>i.id?l.updateClient(i).pipe(p({next:o=>{let h=o;e.success(r.getValue("CLIENT_UPDATED_SUCCESSFULLY")),n(t,{loadList:!0,isAddUpdate:!0,clients:t.clients().map(f=>f.id===h.id?h:f)})},error:o=>{n(t,{commonError:o,loadList:!1})}})):l.addClient(i).pipe(p({next:()=>{e.success(r.getValue("CLIENT_CREATED_SUCCESSFULLY")),n(t,{loadList:!0,isAddUpdate:!0})},error:o=>{n(t,{commonError:o,loadList:!1})}}))))),getClientById:c(d(a(i=>l.getClient(i).pipe(p({next:o=>{n(t,{client:o,commonError:null})},error:o=>{n(t,{commonError:o,loadList:!1})}}))))),setLoadList:i=>{n(t,{loadList:i})}})),v({onInit(t,l=m(H)){I(t.loadList).subscribe(e=>{e&&t.loadClients()}),l.isLogin()&&t.loadClients()}}));export{j as a,G as b};
