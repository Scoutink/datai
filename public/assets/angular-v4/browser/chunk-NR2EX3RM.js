import{a as zi,b as Qi,c as Xi}from"./chunk-GAXRZ4S7.js";import{a as Hi,b as Yi}from"./chunk-KKMMKVFL.js";import{b as qi}from"./chunk-MS6J53NI.js";import{a as $i}from"./chunk-5ETFIZHZ.js";import{a as Ki}from"./chunk-HCZMPLJU.js";import{a as Ui,b as ji,c as Gi}from"./chunk-DL7A26HC.js";import{a as Wi}from"./chunk-3NG6G7DU.js";import{c as ot}from"./chunk-WGGER5HX.js";import{$ as Ni,B as Ri,G as Vi,a as et,aa as nt,c as Oi,ea as Te,f as De,ha as H,i as Mi,j as z,ja as ce,k as Fi,y as Pi}from"./chunk-H5SZDBVN.js";import{b as Ce,c as ki,d as Ii,e as le,f as mn,g as Bi}from"./chunk-XE6VZSAJ.js";import{a as ie,b as xe}from"./chunk-KX634QZQ.js";import{A as di,B as _i,C as N,D as O,G as M,H as F,J as se,L as we,j as si,k as li,n as ci,v as mi,x as Ve}from"./chunk-3O3IKF6A.js";import{$ as vi,A as Je,C as hi,P as gt,_ as fi,aa as gi,ba as Si,ca as ye,da as bi,ea as yi,fa as Ne,g as oi,ia as te,ja as G,ka as Li,ma as P,na as ke,p as ri,r as ai,u as Xe,x as pi,y as ui,z as vt}from"./chunk-TR4MAYT5.js";import{c as Ei,d as Ze,e as Ci,g as Be,h as wi,j as St,p as j,t as L}from"./chunk-AWIVOLPG.js";import{a as Ai}from"./chunk-J2LIJEQH.js";import{b as Ti}from"./chunk-AGIEFCW2.js";import{A as it,B as ee,C as Di,D as Ee,a as xi,c as Z,e as V,h as q,i as B,m as tt,o as W,r as U,u as K}from"./chunk-6EN4EXPL.js";import{$a as Se,$b as y,Aa as Ft,B as Tt,Ba as Lt,Bb as ut,Ca as Pt,Cb as E,Da as mt,Ea as dt,Eb as Yt,Fa as Q,Fb as ht,Fc as d,Gb as _,Gc as p,H as He,Hc as pe,Ib as $t,Jb as qt,Ka as I,L as It,La as Rt,Ma as Vt,N as Ye,Nb as Kt,Ob as zt,Pb as Qt,Pc as Re,Q as Me,Qb as l,R as $e,Rb as c,Rc as ue,Sa as Nt,Sb as g,Ta as w,Tb as ze,Ua as x,Ub as Qe,W as At,Wb as T,Yc as ei,Za as Bt,Zb as S,ab as Wt,ac as Xt,ba as ct,bc as Jt,cc as Fe,cd as re,da as Ot,db as pt,dd as A,ec as _t,fc as Le,g as cn,gc as me,hc as de,j as Ge,jd as ti,kb as Ut,kc as be,lb as jt,m as kt,mc as m,nc as Y,o as lt,ob as a,oc as h,pb as u,pc as oe,pd as ae,rb as Gt,sa as qe,ta as Ke,ud as ii,vb as Ht,wa as Mt,wc as ft,xc as J,xd as ni,yc as Pe,zb as X,zc as Zt}from"./chunk-SXJN2XK6.js";function dn(o,n){if(o&1){let e=T();l(0,"div",18)(1,"h6",19),m(2),l(3,"span",20),S("click",function(){let i=w(e).$implicit,r=y();return x(r.onDelete(i.id))}),g(4,"i-feather",21),c()(),l(5,"div",22)(6,"small",23),m(7),d(8,"utcToLocalTime"),c(),l(9,"small",24),m(10),c()()()}if(o&2){let e=n.$implicit;a(2),h(" ",e.comment," "),a(5),h(" ",pe(8,3,e.createdDate,"short")," "),a(3),h("",e==null?null:e.createdByName," ")}}function pn(o,n){o&1&&(l(0,"div",25),m(1),d(2,"translate"),c()),o&2&&(a(),h(" ",p(2,1,"COMMENT_IS_REQUIRED")," "))}var bo=(()=>{class o extends te{constructor(e,t,i,r,s,f,b){super(),this.fb=e,this.data=t,this.documentCommentService=i,this.dialogRef=r,this.commonDialogService=s,this.translationService=f,this.toastrService=b,this.documentComments=[],this.isCommentChanged=!1}ngOnInit(){this.createForm(),this.getDocumentComment()}closeDialog(){this.dialogRef.close(this.isCommentChanged)}createForm(){this.commentForm=this.fb.group({comment:["",[V.required]]})}getDocumentComment(){this.sub$.sink=this.documentCommentService.getDocumentComment(this.data.id).subscribe(e=>{this.documentComments=e})}patchComment(e){this.commentForm.patchValue({comment:e})}addComment(){if(this.commentForm.invalid){this.commentForm.markAllAsTouched();return}let e={documentId:this.data.id,comment:this.commentForm.get("comment").value};this.sub$.sink=this.documentCommentService.saveDocumentComment(e).subscribe(()=>{this.isCommentChanged=!0,this.patchComment(""),this.commentForm.markAsUntouched(),this.getDocumentComment()})}onDelete(e){this.sub$.sink=this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(t=>{t&&(this.sub$.sink=this.documentCommentService.deleteDocumentComment(e).subscribe(()=>{this.isCommentChanged=!0,this.toastrService.success(this.translationService.getValue("COMMENT_DELETED_SUCCESSFULLY")),this.getDocumentComment()}))})}static{this.\u0275fac=function(t){return new(t||o)(u(ee),u(O),u(Hi),u(N),u(Te),u(G),u(j))}}static{this.\u0275cmp=I({type:o,selectors:[["app-document-comment"]],features:[X],decls:32,vars:14,consts:[[1,"d-flex"],["mat-dialog-title",""],[3,"code"],["mat-icon-button","",1,"close-button","ms-auto",3,"click"],["color","warn",1,"close-icon"],["mat-dialog-content","",1,"pt-0"],[1,"row"],[1,"col-sm-12"],[1,"list-group"],["class","list-group-item list-group-item-action","aria-current","true",4,"ngFor","ngForOf"],[1,"mt-3",3,"formGroup"],[1,"col-md-12","m-t-10"],["formControlName","comment","rows","3",1,"form-control"],["class","text-danger",4,"ngIf"],["type","submit",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],["name","send",1,"small-icon"],["type","submit",1,"btn","btn-sm","btn-danger",3,"click"],["name","x-circle",1,"small-icon"],["aria-current","true",1,"list-group-item","list-group-item-action"],[1,"m-b-1"],["role","button",1,"badge",3,"click"],["name","trash",1,"small-icon","text-danger"],[1,"w-100"],[1,"m-r-10"],[1,"text-primary"],[1,"text-danger"]],template:function(t,i){t&1&&(l(0,"div",0)(1,"span",1)(2,"mat-icon"),m(3,"folder"),c(),m(4),d(5,"translate"),g(6,"app-page-help-text",2),c(),l(7,"button",3),S("click",function(){return i.closeDialog()}),l(8,"mat-icon",4),m(9,"close"),c()()(),l(10,"div",5)(11,"div",6)(12,"div",7)(13,"div",8),E(14,dn,11,6,"div",9),c()()(),l(15,"div",6)(16,"div",7)(17,"form",10)(18,"div",6)(19,"div",11),g(20,"textarea",12),E(21,pn,3,3,"div",13),c()(),l(22,"div",6)(23,"div",11)(24,"button",14),S("click",function(){return i.addComment()}),g(25,"i-feather",15),m(26),d(27,"translate"),c(),l(28,"button",16),S("click",function(){return i.closeDialog()}),g(29,"i-feather",17),m(30),d(31,"translate"),c()()()()()()()),t&2&&(a(4),oe(" ",i.data.name,"'s ",p(5,8,"COMMENT")," "),a(2),_("code","DOCUMENT_COMMENTS"),a(8),_("ngForOf",i.documentComments),a(3),_("formGroup",i.commentForm),a(4),_("ngIf",i.commentForm.get("comment").touched&&i.commentForm.get("comment").hasError("required")),a(5),h(" ",p(27,10,"ADD_COMMENT")," "),a(4),h(" ",p(31,12,"CANCEL")," "))},dependencies:[re,A,W,Z,q,B,U,K,M,F,z,P,ie,H,L,De]})}}return o})();var hn=()=>["ALL_DOCUMENTS_UPLOAD_NEW_VERSION","ASSIGNED_DOCUMENTS_UPLOAD_NEW_VERSION"],_n=()=>["ALL_DOCUMENTS_RESTORE_VERSION","ASSIGNED_DOCUMENTS_RESTORE_VERSION"];function fn(o,n){o&1&&(l(0,"div",22),m(1),d(2,"translate"),c()),o&2&&(a(),h(" ",p(2,1,"DOCUMENT_IS_REQUIRED")," "))}function vn(o,n){o&1&&(l(0,"div",22),m(1),d(2,"translate"),c()),o&2&&(a(),h(" ",p(2,1,"DOCUMENT_TYPE_IS_NOT_ALLOWED")," "))}function gn(o,n){if(o&1&&(l(0,"div"),E(1,vn,3,3,"div",14),c()),o&2){let e,t=y(2);a(),_("ngIf",(e=t.documentForm.get("extension").errors)==null?null:e.required)}}function Sn(o,n){if(o&1&&g(0,"mat-progress-bar",23),o&2){let e=y(2);_("value",e.progress)}}function bn(o,n){if(o&1){let e=T();l(0,"div",10)(1,"form",11)(2,"div",12)(3,"label"),m(4),d(5,"translate"),c(),l(6,"input",13,0),S("change",function(){w(e);let i=be(7),r=y();return x(r.upload(i.files))}),c(),E(8,fn,3,3,"div",14)(9,gn,2,1,"div",15),c(),l(10,"div",12),E(11,Sn,1,1,"mat-progress-bar",16),c(),l(12,"div",17)(13,"button",18),S("click",function(){w(e);let i=y();return x(i.SaveDocument())}),g(14,"i-feather",19),m(15),d(16,"translate"),c(),l(17,"button",20),S("click",function(){w(e);let i=y();return x(i.closeDialog())}),g(18,"i-feather",21),m(19),d(20,"translate"),c()()()()}if(o&2){let e,t,i=y();a(),_("formGroup",i.documentForm),a(3),Y(p(5,7,"DOCUMENT_UPLOAD")),a(4),_("ngIf",i.documentForm.get("url").touched&&((e=i.documentForm.get("url").errors)==null?null:e.required)),a(),_("ngIf",(i.documentForm.get("extension").touched||i.documentForm.get("extension").dirty)&&i.documentForm.get("extension").errors&&!((t=i.documentForm.get("url").errors)!=null&&t.required)),a(2),_("ngIf",i.showProgress),a(4),h(" ",p(16,9,"SAVE")," "),a(4),h(" ",p(20,11,"CANCEL")," ")}}function yn(o,n){if(o&1&&(l(0,"span")(1,"span",25),g(2,"i-feather",26),c(),m(3),c()),o&2){let e=y().$implicit;a(3),h(" ",e.signedByUser," ")}}function En(o,n){if(o&1&&(l(0,"span"),m(1),d(2,"utcToLocalTime"),c()),o&2){let e=y().$implicit;a(),h(" ",pe(2,1,e.signDate,"short")," ")}}function Cn(o,n){o&1&&(l(0,"span",27),m(1),d(2,"translate"),c()),o&2&&(a(),Y(p(2,1,"CURRENT_VERSION")))}function wn(o,n){if(o&1){let e=T();l(0,"span",31),S("click",function(){w(e);let i=y(2).$implicit,r=y();return x(r.downloadDocument(i))}),l(1,"mat-icon"),m(2," download"),c()()}}function xn(o,n){if(o&1){let e=T();l(0,"span",32),S("click",function(){w(e);let i=y(2).$implicit,r=y();return x(r.restoreDocumentVersion(i))}),l(1,"mat-icon"),m(2," restore"),c()()}}function Dn(o,n){if(o&1){let e=T();l(0,"div")(1,"span",28),S("click",function(){w(e);let i=y().$implicit,r=y();return x(r.onDocumentView(i))}),l(2,"mat-icon"),m(3," visibility"),c()(),E(4,wn,3,0,"span",29)(5,xn,3,0,"span",30),c()}if(o&2){let e=y(2);a(4),_("ngIf",e.isDownloadFlag),a(),_("hasClaim",Pe(2,_n))}}function kn(o,n){if(o&1&&(l(0,"tr")(1,"td"),m(2),d(3,"utcToLocalTime"),c(),l(4,"td"),m(5),c(),l(6,"td"),E(7,yn,4,1,"span",15),c(),l(8,"td"),E(9,En,3,4,"span",15),c(),l(10,"td"),E(11,Cn,3,3,"span",24)(12,Dn,6,3,"div",15),c()()),o&2){let e=n.$implicit;a(2),Y(pe(3,6,e.modifiedDate,"short")),a(3),h(" ",e.createdByUser," "),a(2),_("ngIf",e.signedByUser),a(2),_("ngIf",e.signDate),a(2),_("ngIf",e.isCurrentVersion),a(),_("ngIf",!e.isCurrentVersion)}}var Mo=(()=>{class o extends te{constructor(e,t,i,r,s,f,b,v,C,D,$){super(),this.data=e,this.overlay=t,this.dialogRef=i,this.toastrService=r,this.documentService=s,this.commonService=f,this.translationService=b,this.commandDialogService=v,this.securityService=C,this.fb=D,this.cd=$,this.documentVersions=[],this.isDownloadFlag=!1,this.allowFileExtension=[],this.extension="",this.progress=0,this.showProgress=!1,this.getIsDownloadFlag(),this.createDocumentForm(),this.getAllAllowFileExtension()}closeDialog(){this.dialogRef.close()}onDocumentView(e){let i=e.url.split(".")[1],r={documentId:e.id,name:this.data.name,extension:i,isVersion:!0,id:this.data.id,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1,isFromFileRequest:!1};this.overlay.open(Ii,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:r})}restoreDocumentVersion(e){this.sub$.sink=this.commandDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_RESTORE_THIS_TO_CURRENT_VERSION")}?`).subscribe(t=>{t&&(this.sub$.sink=this.documentService.restoreDocumentVersion(this.data.id,e.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("VERSION_RESTORED_SUCCESSFULLY")),this.dialogRef.close(!0)}))})}downloadDocument(e){let t={documentId:e.id,name:"",extension:e.url.split(".")[1],isVersion:!0,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1,isFromFileRequest:!1};this.sub$.sink=this.commonService.downloadDocument(t).subscribe(i=>{i.type===ii.Response&&(this.addDocumentTrail(this.data.id,Ce.Download.toString()),this.downloadFile(i,e))},()=>{this.toastrService.error(this.translationService.getValue("ERROR_WHILE_DOWNLOADING_DOCUMENT"))})}addDocumentTrail(e,t){let i={documentId:e,operationName:t};this.sub$.sink=this.commonService.addDocumentAuditTrail(i).subscribe()}createDocumentForm(){this.documentForm=this.fb.group({url:["",[V.required]],extension:["",[V.required]]})}getAllAllowFileExtension(){this.sub$.sink=this.commonService.allowFileExtension$.subscribe(e=>{e&&(this.allowFileExtension=e)})}upload(e){if(e.length!==0){if(this.extension=e[0].name.split(".").pop(),this.documentForm.get("url").setValue(e[0].name),this.fileExtesionValidation(this.extension))this.fileUploadExtensionValidation("valid");else{this.fileUploadExtensionValidation(""),this.cd.markForCheck();return}this.fileData=e[0]}}fileUploadValidation(e){this.documentForm.patchValue({url:e}),this.documentForm.get("url").markAsTouched(),this.documentForm.updateValueAndValidity()}fileUploadExtensionValidation(e){this.documentForm.patchValue({extension:e}),this.documentForm.get("extension").markAsTouched(),this.documentForm.updateValueAndValidity()}fileExtesionValidation(e){return!!this.allowFileExtension.find(i=>i.extensions.split(",").some(r=>r.toLowerCase()===e.toLowerCase()))}SaveDocument(){if(this.documentForm.invalid){this.documentForm.markAllAsTouched();return}let e={documentId:this.data.id,url:this.fileData.fileName,fileData:this.fileData,extension:this.extension,location:this.data.location};this.sub$.sink=this.documentService.saveNewVersionDocument(e).subscribe(()=>{this.toastrService.success(this.translationService.getValue("DOCUMENT_SAVE_SUCCESSFULLY")),this.dialogRef.close(!0)})}downloadFile(e,t){let i=new Blob([e.body],{type:e.body.type}),r=this.data.name.split("."),s=t.url.split("."),f=document.createElement("a");f.setAttribute("style","display:none;"),document.body.appendChild(f),f.download=`${r[0]}.${s[1]}`,f.href=URL.createObjectURL(i),f.target="_blank",f.click(),document.body.removeChild(f)}getIsDownloadFlag(){if(this.securityService.hasClaim("ALL_DOCUMENTS_DOWNLOAD_DOCUMENT")){this.isDownloadFlag=!0;return}this.sub$.sink=this.commonService.isDownloadFlag(this.data.id).subscribe(e=>{this.isDownloadFlag=e})}static{this.\u0275fac=function(t){return new(t||o)(u(O),u(ki),u(N),u(j),u(le),u(we),u(G),u(Te),u(Ai),u(it),u(Re))}}static{this.\u0275cmp=I({type:o,selectors:[["app-document-version-history"]],features:[X],decls:30,vars:23,consts:[["file",""],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],[3,"code"],["mat-icon-button","",1,"close-button","ms-auto",3,"click"],["color","warn",1,"close-icon"],["mat-dialog-content",""],["class","mb-5",4,"hasClaim"],[1,"table","table-striped","table-bordered","table-responsive"],[4,"ngFor","ngForOf"],[1,"mb-5"],[3,"formGroup"],[1,"col-md-12"],["type","file",1,"form-control",3,"change"],["class","text-danger",4,"ngIf"],[4,"ngIf"],["mode","determinate",3,"value",4,"ngIf"],[1,"m-t-10","col-md-12","m-b-2"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],["name","save",1,"small-icon"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],[1,"text-danger"],["mode","determinate",3,"value"],["class","badge bg-success",4,"ngIf"],[1,"bg-success","text-light"],["name","check",1,"small-icon"],[1,"badge","bg-success"],["matTooltip","view","role","button",1,"material-icons-outlined","m-r-5","text-primary",3,"click"],["role","button","class","m-r-5 text-primary",3,"click",4,"ngIf"],["role","button","matTooltip","Restore to Current Version","class","material-icons-outlined text-primary",3,"click",4,"hasClaim"],["role","button",1,"m-r-5","text-primary",3,"click"],["role","button","matTooltip","Restore to Current Version",1,"material-icons-outlined","text-primary",3,"click"]],template:function(t,i){t&1&&(l(0,"div",1)(1,"span",2),m(2),d(3,"translate"),g(4,"app-page-help-text",3),c(),l(5,"button",4),S("click",function(){return i.closeDialog()}),l(6,"mat-icon",5),m(7,"close"),c()()(),l(8,"div",6),E(9,bn,21,13,"div",7),l(10,"table",8)(11,"thead")(12,"tr")(13,"th"),m(14),d(15,"translate"),c(),l(16,"th"),m(17),d(18,"translate"),c(),l(19,"th"),m(20),d(21,"translate"),c(),l(22,"th"),m(23),d(24,"translate"),c(),l(25,"th"),m(26),d(27,"translate"),c()()(),l(28,"tbody"),E(29,kn,13,9,"tr",9),c()()()),t&2&&(a(2),oe(" ",i.data.name,"'s ",p(3,10,"VERSION_HISTORY")," "),a(2),_("code","VERSION_HISTORY"),a(5),_("hasClaim",Pe(22,hn)),a(5),h(" ",p(15,12,"CREATED_DATE")," "),a(3),h(" ",p(18,14,"ADDED_BY")," "),a(3),h(" ",p(21,16,"SIGNED_BY")," "),a(3),h(" ",p(24,18,"SIGN_DATE")," "),a(3),h(" ",p(27,20,"ACTION")," "),a(3),_("ngForOf",i.data.documentVersions))},dependencies:[re,A,W,B,U,M,F,z,P,et,ie,Oi,H,Yi,L,De]})}}return o})();var nn=cn(mn());var tn=(()=>{class o{constructor(e,t){this.httpClient=e,this.commonHttpErrorService=t}sendEmail(e){return this.httpClient.post("email",e).pipe(At(this.commonHttpErrorService.handleError))}static{this.\u0275fac=function(t){return new(t||o)(dt(ni),dt(Ti))}}static{this.\u0275prov=Lt({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var In=()=>["heading","|","bold","italic"],An=o=>({toolbar:o});function On(o,n){o&1&&(l(0,"div",26),m(1),d(2,"translate"),c()),o&2&&(a(),h(" ",p(2,1,"TO_ADDRESS_IS_REQUIRED")," "))}function Mn(o,n){o&1&&(l(0,"div",26),m(1),d(2,"translate"),c()),o&2&&(a(),h(" ",p(2,1,"EMAIL_IS_NOT_PROPER_FORMAT")," "))}function Fn(o,n){o&1&&(l(0,"div",26),m(1),d(2,"translate"),c()),o&2&&(a(),h(" ",p(2,1,"SUBJECT_IS_REQUIRED")," "))}function Ln(o,n){o&1&&(l(0,"div",26),m(1),d(2,"translate"),c()),o&2&&(a(),h(" ",p(2,1,"BODY_IS_REQUIRED")," "))}var jo=(()=>{class o extends te{constructor(e,t,i,r,s,f,b){super(),this.fb=e,this.toastrService=t,this.emailSendService=i,this.data=r,this.dialogRef=s,this.commonService=f,this.translationService=b,this.editor=nn.default}ngOnInit(){this.createEmailForm()}closeDialog(){this.dialogRef.close()}createEmailForm(){this.emailForm=this.fb.group({id:[""],toAddress:["",[V.required,V.email]],subject:["",[V.required]],body:["",[V.required]],documentId:[this.data.id,[V.required]]})}sendEmail(){if(!this.emailForm.valid){this.emailForm.markAllAsTouched();return}this.sub$.sink=this.emailSendService.sendEmail(this.buildObject()).subscribe(()=>{this.addDocumentTrail(),this.toastrService.success(this.translationService.getValue("EMAIL_SENT_SUCCESSFULLY"))})}buildObject(){return{documentId:this.emailForm.get("documentId").value,email:this.emailForm.get("toAddress").value,subject:this.emailForm.get("subject").value,message:this.emailForm.get("body").value}}addDocumentTrail(){let e={documentId:this.data.id,operationName:Ce.Send_Email.toString()};this.sub$.sink=this.commonService.addDocumentAuditTrail(e).subscribe(()=>{this.dialogRef.close()})}static{this.\u0275fac=function(t){return new(t||o)(u(ee),u(j),u(tn),u(O),u(N),u(we),u(G))}}static{this.\u0275cmp=I({type:o,selectors:[["app-send-email"]],features:[X],decls:47,vars:35,consts:[[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],["code","SEND_EMAIL"],["mat-icon-button","",1,"close-button","ms-auto",3,"click"],["color","warn",1,"close-icon"],["mat-dialog-content",""],[3,"formGroup"],[1,"card","mb-0"],[1,"body","pb-0"],[1,"row"],[1,"col-md-12","p-b-1"],[1,"input-group"],["id","toAddress",1,"input-group-text"],["formControlName","toAddress","type","text","aria-label","To","aria-describedby","toAddress",1,"form-control",3,"placeholder"],["class","text-danger",4,"ngIf"],[1,"col-md-12","pb-1"],["id","subject",1,"input-group-text"],["formControlName","subject","type","text","aria-label","To","aria-describedby","subject",1,"form-control",3,"placeholder"],[1,"col-md-12"],[1,"form-group"],[1,"font-weight-bold"],[1,"NgxEditor__Wrapper"],["formControlName","body",3,"editor","config"],[1,"input-group-text"],["type","submit",1,"btn","btn-success",3,"click"],["name","send",1,"small-icon"],[1,"text-danger"]],template:function(t,i){t&1&&(l(0,"div",0)(1,"span",1),m(2),d(3,"translate"),g(4,"app-page-help-text",2),c(),l(5,"button",3),S("click",function(){return i.closeDialog()}),l(6,"mat-icon",4),m(7,"close"),c()()(),l(8,"div",5)(9,"form",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"span",12),m(16),d(17,"translate"),c(),g(18,"input",13),d(19,"translate"),c(),E(20,On,3,3,"div",14)(21,Mn,3,3,"div",14),c(),l(22,"div",15)(23,"div",11)(24,"span",16),m(25),d(26,"translate"),c(),g(27,"input",17),d(28,"translate"),c(),E(29,Fn,3,3,"div",14),c(),l(30,"div",18)(31,"div",19)(32,"label",20),m(33),d(34,"translate"),c(),l(35,"div",21),g(36,"ckeditor",22),c(),E(37,Ln,3,3,"div",14),c()(),l(38,"div",10)(39,"span",23),m(40),d(41,"translate"),c()(),l(42,"div")(43,"button",24),S("click",function(){return i.sendEmail()}),g(44,"i-feather",25),m(45),d(46,"translate"),c()()()()()()()),t&2&&(a(2),h("",p(3,16,"SEND_EMAIL")," "),a(7),_("formGroup",i.emailForm),a(7),h(" ",p(17,18,"TO")," "),a(2),Fe("placeholder",p(19,20,"EMAIL")),a(2),_("ngIf",i.emailForm.get("toAddress").touched&&i.emailForm.get("toAddress").hasError("required")),a(),_("ngIf",i.emailForm.get("toAddress").touched&&i.emailForm.get("toAddress").hasError("email")),a(4),h(" ",p(26,22,"SUBJECT")," "),a(2),Fe("placeholder",p(28,24,"SUBJECT")),a(2),_("ngIf",i.emailForm.get("subject").touched&&i.emailForm.get("subject").hasError("required")),a(4),h(" ",p(34,26,"BODY")," "),a(3),_("editor",i.editor)("config",Zt(33,An,Pe(32,In))),a(),_("ngIf",i.emailForm.get("body").touched&&i.emailForm.get("body").hasError("required")),a(3),oe(" ",p(41,28,"ATTACHMENT_DOCUMENT")," :: ",i.data==null?null:i.data.name," "),a(5),h(" ",p(46,30,"SEND")," "))},dependencies:[A,W,Z,q,B,U,K,M,F,z,P,ie,H,Bi,L],styles:[".ck-editor__editable_inline{min-height:100px}"]})}}return o})();function Pn(o,n){if(o&1){let e=T();l(0,"div")(1,"div",12)(2,"div",13)(3,"label",14),m(4),d(5,"translate"),c()(),l(6,"div",15)(7,"button",16),S("click",function(){w(e);let i=y();return x(i.deleteDocumentLink())}),l(8,"mat-icon",17),m(9,"delete"),c()(),l(10,"button",18),S("click",function(){w(e);let i=y();return x(i.openLinkSettings())}),l(11,"mat-icon",19),m(12,"settings"),c()()()(),l(13,"div",20)(14,"div",21),g(15,"input",22),l(16,"div",23)(17,"span",24),m(18),d(19,"translate"),c()()()()()}if(o&2){let e=y();a(4),Y(p(5,3,"LINK_SHARING_IS_ON")),a(12),_("cdkCopyToClipboard",e.documentLinkForm.get("linkCode").value),a(2),h(" ",p(19,5,"COPY")," ")}}function Rn(o,n){if(o&1&&(ze(0),l(1,"div",33),g(2,"input",34),c(),g(3,"owl-date-time",null,0),Qe()),o&2){let e=be(4);a(2),_("owlDateTimeTrigger",e)("owlDateTime",e)}}function Vn(o,n){o&1&&(l(0,"div",17),m(1),d(2,"translate"),c()),o&2&&(a(),h(" ",p(2,1,"DATE_IS_REQUIRED")," "))}function Nn(o,n){o&1&&g(0,"input",35)}function Bn(o,n){o&1&&(l(0,"div",17),m(1),d(2,"translate"),c()),o&2&&(a(),h(" ",p(2,1,"PASSWORD_IS_REQUIRED")," "))}function Wn(o,n){if(o&1&&(l(0,"div",25)(1,"div",26)(2,"section")(3,"span"),m(4),d(5,"translate"),c(),l(6,"p",27)(7,"mat-checkbox",28),m(8),d(9,"translate"),c()(),E(10,Rn,5,2,"ng-container",9)(11,Vn,3,3,"div",29),c(),g(12,"hr"),l(13,"section")(14,"span"),m(15),d(16,"translate"),c(),l(17,"p",27)(18,"mat-checkbox",30),m(19),d(20,"translate"),c()(),E(21,Nn,1,0,"input",31)(22,Bn,3,3,"div",29),c(),g(23,"hr"),l(24,"section")(25,"span"),m(26),d(27,"translate"),c(),l(28,"p",27)(29,"mat-checkbox",32),m(30),d(31,"translate"),c()()()()()),o&2){let e=y();a(4),h("",p(5,10,"LINK_EXPIRATION"),":"),a(4),h(" ",p(9,12,"IS_LINK_VALID_UNTIL"),": "),a(2),_("ngIf",e.documentLinkForm.get("isLinkExpiryTime").value),a(),_("ngIf",e.documentLinkForm.get("isLinkExpiryTime").touched&&e.documentLinkForm.hasError("linkExpiryTimeValidator")),a(4),h("",p(16,14,"PASSWORD_PROTECTION"),":"),a(4),h(" ",p(20,16,"IS_PASSWORD_REQUIRED"),": "),a(2),_("ngIf",e.documentLinkForm.get("isPassword").value),a(),_("ngIf",e.documentLinkForm.get("isPassword").touched&&e.documentLinkForm.hasError("passwordValidator")),a(4),Y(p(27,18,"ALLOW_DOWNLOAD")),a(4),h(" ",p(31,20,"USERS_WITH_LINK_CAN_DOWNLOAD_THIS_ITEM")," ")}}function Un(o,n){if(o&1){let e=T();l(0,"button",36),S("click",function(){w(e);let i=y();return x(i.createLink())}),m(1),d(2,"translate"),c()}o&2&&(a(),h(" ",p(2,1,"CREATE_LINK")," "))}function jn(o,n){if(o&1){let e=T();l(0,"button",36),S("click",function(){w(e);let i=y();return x(i.createLink())}),m(1),d(2,"translate"),c()}o&2&&(a(),h(" ",p(2,1,"UPDATE_LINK")," "))}var Qo=(()=>{class o extends te{constructor(e,t,i,r,s,f,b){super(),this.dialogRef=e,this.data=t,this.fb=i,this.documentService=r,this.toastrService=s,this.commonDialogService=f,this.translationService=b,this.isEditMode=!1,this.isResetLink=!1,this.minDate=new Date,this.baseUrl=`${window.location.protocol}//${window.location.host}/preview/`}ngOnInit(){this.createDocumentLinkForm(),this.data.link&&this.data.link.id&&(this.isEditMode=!0,this.pathValue())}pathValue(){this.documentLinkForm.patchValue(this.data.link),this.documentLinkForm.get("linkCode").setValue(`${this.baseUrl}${this.data.link.linkCode}`),this.data.link.linkExpiryTime&&this.documentLinkForm.get("isLinkExpiryTime").setValue(!0),this.data.link.password&&this.documentLinkForm.get("isPassword").setValue(!0)}createDocumentLinkForm(){this.documentLinkForm=this.fb.group({id:[""],isLinkExpiryTime:new tt(!1),linkExpiryTime:[""],isPassword:new tt(!1),password:[""],linkCode:[""],isAllowDownload:new tt(!1)},{validator:this.checkData})}checkData(e){let t=e.get("isLinkExpiryTime").value,i=e.get("linkExpiryTime").value,r=e.get("isPassword").value,s=e.get("password").value,f={};return t&&!i&&(f.linkExpiryTimeValidator=!0),r&&!s&&(f.passwordValidator=!0),f}openLinkSettings(){this.isResetLink=!this.isResetLink}createLink(){if(!this.documentLinkForm.valid){this.documentLinkForm.markAllAsTouched();return}let e=this.createBuildObject();this.sub$.sink=this.documentService.createDocumentShareableLink(e).subscribe({next:t=>{this.toastrService.success(this.translationService.getValue("LINK_GENERATED_SUCCESSFULLY")),this.data.link=t,this.isEditMode=!0,this.isResetLink=!1,this.pathValue()}})}deleteDocumentLink(){this.sub$.sink=this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(e=>{e&&(this.sub$.sink=this.documentService.deleteDocumentShareableLInk(this.data.link.id).subscribe({next:()=>{this.toastrService.success(this.translationService.getValue("DOCUMENT_LINK_DELETED_SUCCESSFULLY")),this.dialogRef.close()}}))})}closeDialog(){this.dialogRef.close()}createBuildObject(){let e=this.documentLinkForm.get("id").value,t=this.documentLinkForm.get("linkCode").value;return t&&(t=t.replace(this.baseUrl,"")),{id:e,documentId:this.data.document.id,isAllowDownload:this.documentLinkForm.get("isAllowDownload").value,password:this.documentLinkForm.get("isPassword").value?this.documentLinkForm.get("password").value:"",linkExpiryTime:this.documentLinkForm.get("isLinkExpiryTime").value?this.documentLinkForm.get("linkExpiryTime").value:"",linkCode:t}}static{this.\u0275fac=function(t){return new(t||o)(u(N),u(O),u(ee),u(le),u(j),u(Te),u(G))}}static{this.\u0275cmp=I({type:o,selectors:[["app-sharable-link"]],features:[X],decls:15,vars:9,consts:[["dt2",""],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],[3,"code"],["mat-icon-button","",1,"close-button","ms-auto",3,"click"],["color","warn",1,"close-icon"],["mat-dialog-content","",1,"pt-0"],[3,"formGroup"],[1,"row"],[4,"ngIf"],["class","card mb-0",4,"ngIf"],["type","submit","class","btn btn-success",3,"click",4,"ngIf"],[1,"row","align-items-center","justify-content-between"],[1,"col-md","col"],["for","link",1,"mb-0"],[1,"col-auto","col-m-auto"],["mat-icon-button","",1,"mr-1","text-danger",3,"click"],[1,"text-danger"],["mat-icon-button","",1,"text-main",3,"click"],[1,"text-main"],[1,"row","mt-2"],[1,"col-md-12","input-group"],["formControlName","linkCode","type","text","id","link",1,"form-control"],["matTooltip","Copy","role","button",1,"input-group-append",3,"cdkCopyToClipboard"],[1,"input-group-text","bg-success"],[1,"card","mb-0"],[1,"card-body"],[1,"mb-0"],["color","primary","formControlName","isLinkExpiryTime"],["class","text-danger",4,"ngIf"],["color","primary","formControlName","isPassword"],["autocomplete","new-password","type","password","class","form-control","formControlName","password",4,"ngIf"],["formControlName","isAllowDownload","color","primary"],[1,"input-group"],["formControlName","linkExpiryTime","placeholder","Choose a date",1,"form-control",3,"owlDateTimeTrigger","owlDateTime"],["autocomplete","new-password","type","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-success",3,"click"]],template:function(t,i){t&1&&(l(0,"div",1)(1,"span",2),m(2),d(3,"translate"),g(4,"app-page-help-text",3),c(),l(5,"button",4),S("click",function(){return i.closeDialog()}),l(6,"mat-icon",5),m(7,"close"),c()()(),l(8,"div",6)(9,"form",7)(10,"div",8),E(11,Pn,20,7,"div",9)(12,Wn,32,22,"div",10)(13,Un,3,3,"button",11)(14,jn,3,3,"button",11),c()()()),t&2&&(a(2),h("",p(3,7,"SHAREABLE_LINK")," "),a(2),_("code","SHAREABLE_LINK"),a(5),_("formGroup",i.documentLinkForm),a(2),_("ngIf",i.isEditMode),a(),_("ngIf",!i.isEditMode||i.isResetLink),a(),_("ngIf",!i.isEditMode),a(),_("ngIf",i.isEditMode&&i.isResetLink))},dependencies:[A,W,Z,q,B,U,K,M,F,z,P,et,H,Wi,Ui,Gi,ji,$i,L]})}}return o})();var $n=["panel"],qn=["*"];function Kn(o,n){if(o&1){let e=T();l(0,"div",1,0),S("@panelAnimation.done",function(i){w(e);let r=y();return x(r._animationDone.next(i))}),Jt(2),c()}if(o&2){let e=n.id,t=y();qt(t._classList),$t("mat-mdc-autocomplete-visible",t.showPanel)("mat-mdc-autocomplete-hidden",!t.showPanel)("mat-primary",t._color==="primary")("mat-accent",t._color==="accent")("mat-warn",t._color==="warn"),_("id",t.id)("@panelAnimation",t.isOpen?"visible":"hidden"),ht("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby(e))}}var zn=Ei("panelAnimation",[wi("void, hidden",Be({opacity:0,transform:"scaleY(0.8)"})),St(":enter, hidden => visible",[Ci([Ze("0.03s linear",Be({opacity:1})),Ze("0.12s cubic-bezier(0, 0, 0.2, 1)",Be({transform:"scaleY(1)"}))])]),St(":leave, visible => hidden",[Ze("0.075s linear",Be({opacity:0}))])]),Qn=0,yt=class{constructor(n,e){this.source=n,this.option=e}},an=new mt("mat-autocomplete-default-options",{providedIn:"root",factory:Xn});function Xn(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}var sn=(()=>{class o{get isOpen(){return this._isOpen&&this.showPanel}_setColor(e){this._color=e,this._changeDetectorRef.markForCheck()}set classList(e){this._classList=e,this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}constructor(e,t,i,r){this._changeDetectorRef=e,this._elementRef=t,this._defaults=i,this._activeOptionChanges=Ge.EMPTY,this._animationDone=new Se,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new Se,this.opened=new Se,this.closed=new Se,this.optionActivated=new Se,this.id=`mat-autocomplete-${Qn++}`,this.inertGroups=r?.SAFARI||!1,this.autoActiveFirstOption=!!i.autoActiveFirstOption,this.autoSelectActiveOption=!!i.autoSelectActiveOption,this.requireSelection=!!i.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new hi(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){let t=new yt(this,e);this.optionSelected.emit(t)}_getPanelAriaLabelledby(e){if(this.ariaLabel)return null;let t=e?e+" ":"";return this.ariaLabelledby?t+this.ariaLabelledby:e}_skipPredicate(){return!1}static{this.\u0275fac=function(t){return new(t||o)(u(Re),u(pt),u(an),u(oi))}}static{this.\u0275cmp=I({type:o,selectors:[["mat-autocomplete"]],contentQueries:function(t,i,r){if(t&1&&(_t(r,ye,5),_t(r,vi,5)),t&2){let s;me(s=de())&&(i.options=s),me(s=de())&&(i.optionGroups=s)}},viewQuery:function(t,i){if(t&1&&(Le(Gt,7),Le($n,5)),t&2){let r;me(r=de())&&(i.template=r.first),me(r=de())&&(i.panel=r.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",ue],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",ue],requireSelection:[2,"requireSelection","requireSelection",ue],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",ue],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ue]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[ft([{provide:fi,useExisting:o}]),ut,J],ngContentSelectors:qn,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(t,i){t&1&&(Xt(),E(0,Kn,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape, var(--mat-app-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow);background-color:var(--mat-autocomplete-background-color, var(--mat-app-surface-container))}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[zn]},changeDetection:0})}}return o})();var Jn={provide:xi,useExisting:Ft(()=>Et),multi:!0};var ln=new mt("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let o=Q(Ve);return()=>o.scrollStrategies.reposition()}});function Zn(o){return()=>o.scrollStrategies.reposition()}var eo={provide:ln,deps:[Ve],useFactory:Zn},Et=(()=>{class o{constructor(e,t,i,r,s,f,b,v,C,D,$){this._element=e,this._overlay=t,this._viewContainerRef=i,this._zone=r,this._changeDetectorRef=s,this._dir=b,this._formField=v,this._document=C,this._viewportRuler=D,this._defaults=$,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=Ge.EMPTY,this._breakpointObserver=Q(pi),this._handsetLandscapeSubscription=Ge.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new lt,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._initialized=new lt,this._injector=Q(Bt),this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=It(()=>{let k=this.autocomplete?this.autocomplete.options:null;return k?k.changes.pipe(qe(k),Ke(()=>Me(...k.map(R=>R.onSelectionChange)))):this._initialized.pipe(Ke(()=>this.optionSelections))}),this._handlePanelKeydown=k=>{(k.keyCode===27&&!Xe(k)||k.keyCode===38&&Xe(k,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),k.stopPropagation(),k.preventDefault())},this._trackedModal=null,this._scrollStrategy=f}ngAfterViewInit(){this._initialized.next(),this._initialized.complete();let e=this._getWindow();typeof e<"u"&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){let e=this._getWindow();typeof e<"u"&&e.removeEventListener("blur",this._windowBlurHandler),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&Je(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return Me(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe($e(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe($e(()=>this._overlayAttached)):Tt()).pipe(He(e=>e instanceof Si?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return Me(Ye(this._document,"click"),Ye(this._document,"auxclick"),Ye(this._document,"touchend")).pipe($e(e=>{let t=ri(e),i=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,r=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&t!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!i||!i.contains(t))&&(!r||!r.contains(t))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(t)}))}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){let t=e.keyCode,i=Xe(e);if(t===27&&!i&&e.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&t===13&&this.panelOpen&&!i)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){let r=this.autocomplete._keyManager.activeItem,s=t===38||t===40;t===9||s&&!i&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):s&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(s||this.autocomplete._keyManager.activeItem!==r)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let t=e.target,i=t.value;if(t.type==="number"&&(i=i==""?null:parseFloat(i)),this._previousValue!==i){if(this._previousValue=i,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(i),!i)this._clearPreviousSelectedOption(null,!1);else if(this.panelOpen&&!this.autocomplete.requireSelection){let r=this.autocomplete.options?.find(s=>s.selected);if(r){let s=this._getDisplayValue(r.value);i!==s&&r.deselect(!1)}}if(this._canOpen()&&this._document.activeElement===e.target){let r=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(r)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(e=!1){this._formField&&this._formField.floatLabel==="auto"&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){let e=new kt(i=>{Yt(()=>{i.next()},{injector:this._injector})}),t=this.autocomplete.options.changes.pipe(Mt(()=>this._positionStrategy.reapplyLastPosition()),Ot(0));return Me(e,t).pipe(Ke(()=>this._zone.run(()=>{let i=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),i!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),ct(1)).subscribe(i=>this._setValueAndClose(i))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(e){let t=this.autocomplete;return t&&t.displayWith?t.displayWith(e):e}_assignOptionValue(e){let t=this._getDisplayValue(e);e==null&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(t??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){let t=this.autocomplete,i=e?e.source:this._pendingAutoselectedOption;i?(this._clearPreviousSelectedOption(i),this._assignOptionValue(i.value),this._onChange(i.value),t._emitSelectEvent(i),this._element.nativeElement.focus()):t.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),t._animationDone?t._animationDone.pipe(ct(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,t){this.autocomplete?.options?.forEach(i=>{i!==e&&i.selected&&i.deselect(t)})}_openPanelInternal(e=this._element.nativeElement.value){if(this._attachOverlay(e),this._floatLabel(),this._trackedModal){let t=this.autocomplete.id;vt(this._trackedModal,"aria-owns",t)}}_attachOverlay(e){this.autocomplete;let t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new ci(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),t=this._overlay.create(this._getOverlayConfig()),this._overlayRef=t,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&t&&t.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe(ui.HandsetLandscape).subscribe(r=>{r.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),t&&!t.hasAttached()&&(t.attach(this._portal),this._valueOnAttach=e,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());let i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){let e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new mi({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){let e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){let t=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,r=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}],s;this.position==="above"?s=r:this.position==="below"?s=t:s=[...t,...r],e.withPositions(s)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){let e=this.autocomplete;if(e.autoActiveFirstOption){let t=-1;for(let i=0;i<e.options.length;i++)if(!e.options.get(i).disabled){t=i;break}e._keyManager.setActiveItem(t)}else e._keyManager.setActiveItem(-1)}_canOpen(){let e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(e){let t=this.autocomplete,i=bi(e,t.options,t.optionGroups);if(e===0&&i===1)t._setScrollTop(0);else if(t.panel){let r=t.options.toArray()[e];if(r){let s=r._getHostElement(),f=yi(s.offsetTop,s.offsetHeight,t._getScrollTop(),t.panel.nativeElement.offsetHeight);t._setScrollTop(f)}}}_applyModalPanelOwnership(){let e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let t=this.autocomplete.id;this._trackedModal&&Je(this._trackedModal,"aria-owns",t),vt(e,"aria-owns",t),this._trackedModal=e}_clearFromModal(){if(this._trackedModal){let e=this.autocomplete.id;Je(this._trackedModal,"aria-owns",e),this._trackedModal=null}}static{this.\u0275fac=function(t){return new(t||o)(u(pt),u(Ve),u(Ht),u(Wt),u(Re),u(ln),u(ai,8),u(Pi,9),u(ei,8),u(si),u(an,8))}}static{this.\u0275dir=Vt({type:o,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(t,i){t&1&&S("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(s){return i._handleInput(s)})("keydown",function(s){return i._handleKeydown(s)})("click",function(){return i._handleClick()}),t&2&&ht("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-controls",i.autocompleteDisabled||!i.panelOpen||i.autocomplete==null?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",ue]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[ft([Jn]),ut,Nt]})}}return o})(),at=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=Rt({type:o})}static{this.\u0275inj=Pt({providers:[eo],imports:[di,Ne,gt,ae,li,Ne,gt]})}}return o})();function no(o,n){if(o&1&&(l(0,"mat-option",14),m(1),c()),o&2){let e=n.$implicit;_("value",e.name),a(),Y(e.name)}}function oo(o,n){o&1&&(l(0,"div",22),m(1),d(2,"translate"),c()),o&2&&(a(),h(" ",p(2,1,"SELECT_WORKFLOW")," "))}function ro(o,n){if(o&1&&(l(0,"div"),E(1,oo,3,3,"div",21),c()),o&2){let e,t=y();a(),_("ngIf",(e=t.documentworkflowForm.get("workflowId").errors)==null?null:e.required)}}var Hr=(()=>{class o{constructor(e,t,i,r,s,f){this.fb=e,this.toastrService=t,this.translationService=i,this.documentWorkflowService=r,this.dialogRef=s,this.data=f,this.workflows=[],this.workflowStore=Q(qi)}ngOnInit(){this.createForm(),this.filteredWorkflows=this.documentworkflowForm.get("workflowName").valueChanges.pipe(qe(""),He(e=>this._filter(e||"")))}createForm(){this.documentworkflowForm=this.fb.group({workflowId:["",[V.required]],documentId:[this.data.document.id],workflowName:[""]})}onWorkflowSelected(e){let t=this.workflowStore.activeWorkflows().find(i=>i.name.toLowerCase()===e.toLowerCase());this.documentworkflowForm.get("workflowId").setValue(t.id),this.documentworkflowForm.markAllAsTouched(),this.documentworkflowForm.updateValueAndValidity()}saveWorkflowInstance(){if(this.documentworkflowForm.invalid){this.documentworkflowForm.markAllAsTouched();return}let t={workflowId:this.documentworkflowForm.get("workflowId").value,documentId:this.data.document.id};this.documentWorkflowService.addDocumentWorkflow(t).subscribe(i=>{this.toastrService.success(this.translationService.getValue("WORKFLOW_CREATED_SUCCESSFULLY")),this.dialogRef.close(t)})}closeDialog(){this.dialogRef.close()}_filter(e){let t=e.toLowerCase();return t||(this.documentworkflowForm.get("workflowId").setValue(""),this.documentworkflowForm.updateValueAndValidity()),this.workflowStore.activeWorkflows().filter(i=>i.name.toLowerCase().includes(t))}static{this.\u0275fac=function(t){return new(t||o)(u(ee),u(j),u(G),u(Ki),u(N),u(O))}}static{this.\u0275cmp=I({type:o,selectors:[["app-document-workflow-dialog"]],standalone:!0,features:[J],decls:33,vars:21,consts:[["auto","matAutocomplete"],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],[3,"code"],["mat-icon-button","",1,"ms-auto",3,"click"],["name","x",1,"close-icon","text-danger"],[3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"form-group"],[1,"form-label"],["name","refresh-cw","title","Refresh",1,"ms-1","cursor-pointer","text-primary","medium-icon",3,"click"],["type","text","aria-label","Number","matInput","","formControlName","workflowName",1,"form-control",3,"placeholder","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],[3,"value"],[4,"ngIf"],[1,"mt-2","col-md-12"],["type","button","cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,i){if(t&1){let r=T();l(0,"div",1)(1,"span",2),m(2),d(3,"translate"),g(4,"app-page-help-text",3),c(),l(5,"button",4),S("click",function(){return w(r),x(i.closeDialog())}),g(6,"i-feather",5),c()(),l(7,"mat-dialog-content")(8,"form",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),m(13),d(14,"translate"),l(15,"i-feather",11),S("click",function(){return w(r),x(i.workflowStore.loadWorkflows())}),c()(),g(16,"input",12),d(17,"translate"),l(18,"mat-autocomplete",13,0),S("optionSelected",function(f){return w(r),x(i.onWorkflowSelected(f.option.value))}),zt(20,no,2,2,"mat-option",14,Kt),d(22,"async"),c(),E(23,ro,2,1,"div",15),c()(),l(24,"div",16)(25,"button",17),S("click",function(){return w(r),x(i.saveWorkflowInstance())}),g(26,"i-feather",18),m(27),d(28,"translate"),c(),l(29,"button",19),S("click",function(){return w(r),x(i.closeDialog())}),g(30,"i-feather",20),m(31),d(32,"translate"),c()()()()()}if(t&2){let r=be(19);a(2),h(" ",p(3,9,"START_WORKFLOW")," "),a(2),_("code","MANAGE_WORKFLOW"),a(4),_("formGroup",i.documentworkflowForm),a(5),h("",p(14,11,"WORKFLOW")," "),a(3),Fe("placeholder",p(17,13,"NONE")),_("matAutocomplete",r),a(4),Qt(p(22,15,i.filteredWorkflows)),a(3),_("ngIf",i.documentworkflowForm.get("workflowId").touched&&i.documentworkflowForm.get("workflowId").errors),a(4),h(" ",p(28,17,"SAVE")," "),a(4),h("",p(32,19,"CANCEL")," ")}},dependencies:[se,M,F,xe,ie,ce,A,W,Z,q,B,U,K,P,Ri,H,ti,L,Ee,ke,ot,ae,at,sn,ye,Et]})}}return o})();var Oe=class{constructor(n,e,t,i){if(isNaN(n)||isNaN(e))throw new Error(`Point is invalid: (${n}, ${e})`);this.x=+n,this.y=+e,this.pressure=t||0,this.time=i||Date.now()}distanceTo(n){return Math.sqrt(Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2))}equals(n){return this.x===n.x&&this.y===n.y&&this.pressure===n.pressure&&this.time===n.time}velocityFrom(n){return this.time!==n.time?this.distanceTo(n)/(this.time-n.time):0}},Ct=class o{static fromPoints(n,e){let t=this.calculateControlPoints(n[0],n[1],n[2]).c2,i=this.calculateControlPoints(n[1],n[2],n[3]).c1;return new o(n[1],t,i,n[2],e.start,e.end)}static calculateControlPoints(n,e,t){let i=n.x-e.x,r=n.y-e.y,s=e.x-t.x,f=e.y-t.y,b={x:(n.x+e.x)/2,y:(n.y+e.y)/2},v={x:(e.x+t.x)/2,y:(e.y+t.y)/2},C=Math.sqrt(i*i+r*r),D=Math.sqrt(s*s+f*f),$=b.x-v.x,k=b.y-v.y,R=C+D==0?0:D/(C+D),ge={x:v.x+$*R,y:v.y+k*R},xt=e.x-ge.x,Dt=e.y-ge.y;return{c1:new Oe(b.x+xt,b.y+Dt),c2:new Oe(v.x+xt,v.y+Dt)}}constructor(n,e,t,i,r,s){this.startPoint=n,this.control2=e,this.control1=t,this.endPoint=i,this.startWidth=r,this.endWidth=s}length(){let e=0,t,i;for(let r=0;r<=10;r+=1){let s=r/10,f=this.point(s,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),b=this.point(s,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(r>0){let v=f-t,C=b-i;e+=Math.sqrt(v*v+C*C)}t=f,i=b}return e}point(n,e,t,i,r){return e*(1-n)*(1-n)*(1-n)+3*t*(1-n)*(1-n)*n+3*i*(1-n)*n*n+r*n*n*n}},wt=class{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(n,e,t){this._et.addEventListener(n,e,t)}dispatchEvent(n){return this._et.dispatchEvent(n)}removeEventListener(n,e,t){this._et.removeEventListener(n,e,t)}};function ao(o,n=250){let e=0,t=null,i,r,s,f=()=>{e=Date.now(),t=null,i=o.apply(r,s),t||(r=null,s=[])};return function(...v){let C=Date.now(),D=n-(C-e);return r=this,s=v,D<=0||D>n?(t&&(clearTimeout(t),t=null),e=C,i=o.apply(r,s),t||(r=null,s=[])):t||(t=window.setTimeout(f,D)),i}}var st=class o extends wt{constructor(n,e={}){var t,i,r;super(),this.canvas=n,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=s=>{!this._isLeftButtonPressed(s,!0)||this._drawingStroke||this._strokeBegin(this._pointerEventToSignatureEvent(s))},this._handleMouseMove=s=>{if(!this._isLeftButtonPressed(s,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(s),!1);return}this._strokeMoveUpdate(this._pointerEventToSignatureEvent(s))},this._handleMouseUp=s=>{this._isLeftButtonPressed(s)||this._strokeEnd(this._pointerEventToSignatureEvent(s))},this._handleTouchStart=s=>{s.targetTouches.length!==1||this._drawingStroke||(s.cancelable&&s.preventDefault(),this._strokeBegin(this._touchEventToSignatureEvent(s)))},this._handleTouchMove=s=>{if(s.targetTouches.length===1){if(s.cancelable&&s.preventDefault(),!this._drawingStroke){this._strokeEnd(this._touchEventToSignatureEvent(s),!1);return}this._strokeMoveUpdate(this._touchEventToSignatureEvent(s))}},this._handleTouchEnd=s=>{s.targetTouches.length===0&&(s.cancelable&&s.preventDefault(),this._strokeEnd(this._touchEventToSignatureEvent(s)))},this._handlePointerDown=s=>{!s.isPrimary||!this._isLeftButtonPressed(s)||this._drawingStroke||typeof this._strokePointerId<"u"&&this._strokePointerId!==this._getPointerId(s)||(this._strokePointerId=this._getPointerId(s),s.preventDefault(),this._strokeBegin(this._pointerEventToSignatureEvent(s)))},this._handlePointerMove=s=>{if(!(!s.isPrimary||this._strokePointerId!==this._getPointerId(s))){if(!this._isLeftButtonPressed(s,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(s),!1);return}s.preventDefault(),this._strokeMoveUpdate(this._pointerEventToSignatureEvent(s))}},this._handlePointerUp=s=>{!s.isPrimary||this._isLeftButtonPressed(s)||this._strokePointerId!==this._getPointerId(s)||(this._strokePointerId=void 0,s.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(s)))},this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle=(t=e.throttle)!==null&&t!==void 0?t:16,this.minDistance=(i=e.minDistance)!==null&&i!==void 0?i:5,this.dotSize=e.dotSize||0,this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=e.compositeOperation||"source-over",this.canvasContextOptions=(r=e.canvasContextOptions)!==null&&r!==void 0?r:{},this._strokeMoveUpdate=this.throttle?ao(o.prototype._strokeUpdate,this.throttle):o.prototype._strokeUpdate,this._ctx=n.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){let{_ctx:n,canvas:e}=this;n.fillStyle=this.backgroundColor,n.clearRect(0,0,e.width,e.height),n.fillRect(0,0,e.width,e.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(n,e={}){return new Promise((t,i)=>{let r=new Image,s=e.ratio||window.devicePixelRatio||1,f=e.width||this.canvas.width/s,b=e.height||this.canvas.height/s,v=e.xOffset||0,C=e.yOffset||0;this._reset(this._getPointGroupOptions()),r.onload=()=>{this._ctx.drawImage(r,v,C,f,b),t()},r.onerror=D=>{i(D)},r.crossOrigin="anonymous",r.src=n,this._isEmpty=!1})}toDataURL(n="image/png",e){switch(n){case"image/svg+xml":return typeof e!="object"&&(e=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(e))}`;default:return typeof e!="number"&&(e=void 0),this.canvas.toDataURL(n,e)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";let n=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!n?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerDown),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this._removeMoveUpEventListeners()}_getListenerFunctions(){var n;let e=window.document===this.canvas.ownerDocument?window:(n=this.canvas.ownerDocument.defaultView)!==null&&n!==void 0?n:this.canvas.ownerDocument;return{addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}_removeMoveUpEventListeners(){let{removeEventListener:n}=this._getListenerFunctions();n("pointermove",this._handlePointerMove),n("pointerup",this._handlePointerUp),n("mousemove",this._handleMouseMove),n("mouseup",this._handleMouseUp),n("touchmove",this._handleTouchMove),n("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(n,{clear:e=!0}={}){e&&this.clear(),this._fromData(n,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(n)}toData(){return this._data}_isLeftButtonPressed(n,e){return e?n.buttons===1:(n.buttons&1)===1}_pointerEventToSignatureEvent(n){return{event:n,type:n.type,x:n.clientX,y:n.clientY,pressure:"pressure"in n?n.pressure:0}}_touchEventToSignatureEvent(n){let e=n.changedTouches[0];return{event:n,type:n.type,x:e.clientX,y:e.clientY,pressure:e.force}}_getPointerId(n){return n.persistentDeviceId||n.pointerId}_getPointGroupOptions(n){return{penColor:n&&"penColor"in n?n.penColor:this.penColor,dotSize:n&&"dotSize"in n?n.dotSize:this.dotSize,minWidth:n&&"minWidth"in n?n.minWidth:this.minWidth,maxWidth:n&&"maxWidth"in n?n.maxWidth:this.maxWidth,velocityFilterWeight:n&&"velocityFilterWeight"in n?n.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:n&&"compositeOperation"in n?n.compositeOperation:this.compositeOperation}}_strokeBegin(n){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:n,cancelable:!0})))return;let{addEventListener:t}=this._getListenerFunctions();switch(n.event.type){case"mousedown":t("mousemove",this._handleMouseMove,{passive:!1}),t("mouseup",this._handleMouseUp,{passive:!1});break;case"touchstart":t("touchmove",this._handleTouchMove,{passive:!1}),t("touchend",this._handleTouchEnd,{passive:!1});break;case"pointerdown":t("pointermove",this._handlePointerMove,{passive:!1}),t("pointerup",this._handlePointerUp,{passive:!1});break}this._drawingStroke=!0;let i=this._getPointGroupOptions(),r=Object.assign(Object.assign({},i),{points:[]});this._data.push(r),this._reset(i),this._strokeUpdate(n)}_strokeUpdate(n){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(n);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:n}));let e=this._createPoint(n.x,n.y,n.pressure),t=this._data[this._data.length-1],i=t.points,r=i.length>0&&i[i.length-1],s=r?e.distanceTo(r)<=this.minDistance:!1,f=this._getPointGroupOptions(t);if(!r||!(r&&s)){let b=this._addPoint(e,f);r?b&&this._drawCurve(b,f):this._drawDot(e,f),i.push({time:e.time,x:e.x,y:e.y,pressure:e.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:n}))}_strokeEnd(n,e=!0){this._removeMoveUpEventListeners(),this._drawingStroke&&(e&&this._strokeUpdate(n),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:n})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerDown,{passive:!1})}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown,{passive:!1})}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart,{passive:!1})}_reset(n){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(n.minWidth+n.maxWidth)/2,this._ctx.fillStyle=n.penColor,this._ctx.globalCompositeOperation=n.compositeOperation}_createPoint(n,e,t){let i=this.canvas.getBoundingClientRect();return new Oe(n-i.left,e-i.top,t,new Date().getTime())}_addPoint(n,e){let{_lastPoints:t}=this;if(t.push(n),t.length>2){t.length===3&&t.unshift(t[0]);let i=this._calculateCurveWidths(t[1],t[2],e),r=Ct.fromPoints(t,i);return t.shift(),r}return null}_calculateCurveWidths(n,e,t){let i=t.velocityFilterWeight*e.velocityFrom(n)+(1-t.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(i,t),s={end:r,start:this._lastWidth};return this._lastVelocity=i,this._lastWidth=r,s}_strokeWidth(n,e){return Math.max(e.maxWidth/(n+1),e.minWidth)}_drawCurveSegment(n,e,t){let i=this._ctx;i.moveTo(n,e),i.arc(n,e,t,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(n,e){let t=this._ctx,i=n.endWidth-n.startWidth,r=Math.ceil(n.length())*2;t.beginPath(),t.fillStyle=e.penColor;for(let s=0;s<r;s+=1){let f=s/r,b=f*f,v=b*f,C=1-f,D=C*C,$=D*C,k=$*n.startPoint.x;k+=3*D*f*n.control1.x,k+=3*C*b*n.control2.x,k+=v*n.endPoint.x;let R=$*n.startPoint.y;R+=3*D*f*n.control1.y,R+=3*C*b*n.control2.y,R+=v*n.endPoint.y;let ge=Math.min(n.startWidth+v*i,e.maxWidth);this._drawCurveSegment(k,R,ge)}t.closePath(),t.fill()}_drawDot(n,e){let t=this._ctx,i=e.dotSize>0?e.dotSize:(e.minWidth+e.maxWidth)/2;t.beginPath(),this._drawCurveSegment(n.x,n.y,i),t.closePath(),t.fillStyle=e.penColor,t.fill()}_fromData(n,e,t){for(let i of n){let{points:r}=i,s=this._getPointGroupOptions(i);if(r.length>1)for(let f=0;f<r.length;f+=1){let b=r[f],v=new Oe(b.x,b.y,b.pressure,b.time);f===0&&this._reset(s);let C=this._addPoint(v,s);C&&e(C,s)}else this._reset(s),t(r[0],s)}}toSVG({includeBackgroundColor:n=!1}={}){let e=this._data,t=Math.max(window.devicePixelRatio||1,1),i=0,r=0,s=this.canvas.width/t,f=this.canvas.height/t,b=document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.setAttribute("xmlns","http://www.w3.org/2000/svg"),b.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),b.setAttribute("viewBox",`${i} ${r} ${s} ${f}`),b.setAttribute("width",s.toString()),b.setAttribute("height",f.toString()),n&&this.backgroundColor){let v=document.createElement("rect");v.setAttribute("width","100%"),v.setAttribute("height","100%"),v.setAttribute("fill",this.backgroundColor),b.appendChild(v)}return this._fromData(e,(v,{penColor:C})=>{let D=document.createElement("path");if(!isNaN(v.control1.x)&&!isNaN(v.control1.y)&&!isNaN(v.control2.x)&&!isNaN(v.control2.y)){let $=`M ${v.startPoint.x.toFixed(3)},${v.startPoint.y.toFixed(3)} C ${v.control1.x.toFixed(3)},${v.control1.y.toFixed(3)} ${v.control2.x.toFixed(3)},${v.control2.y.toFixed(3)} ${v.endPoint.x.toFixed(3)},${v.endPoint.y.toFixed(3)}`;D.setAttribute("d",$),D.setAttribute("stroke-width",(v.endWidth*2.25).toFixed(3)),D.setAttribute("stroke",C),D.setAttribute("fill","none"),D.setAttribute("stroke-linecap","round"),b.appendChild(D)}},(v,{penColor:C,dotSize:D,minWidth:$,maxWidth:k})=>{let R=document.createElement("circle"),ge=D>0?D:($+k)/2;R.setAttribute("r",ge.toString()),R.setAttribute("cx",v.x.toString()),R.setAttribute("cy",v.y.toString()),R.setAttribute("fill",C),b.appendChild(R)}),b.outerHTML}};var so=["canvas"];function lo(o,n){if(o&1&&(l(0,"div",25)(1,"div",26),g(2,"img",27),l(3,"div",28)(4,"p")(5,"strong"),m(6),d(7,"translate"),c(),m(8),c(),l(9,"p")(10,"strong"),m(11),d(12,"translate"),c(),m(13),d(14,"utcToLocalTime"),c()()()()),o&2){let e=n.$implicit;a(2),_("src","data:image/png;base64,"+e.base64,jt),a(4),h("",p(7,5,"SIGNED_BY"),":"),a(2),h(" ",e.signatureBy," "),a(3),h("",p(12,7,"SIGNED_DATE"),":"),a(2),h(" ",pe(14,9,e.createdDate,"full")," ")}}function co(o,n){if(o&1&&(l(0,"div",23),E(1,lo,15,12,"div",24),c()),o&2){let e=y();a(),_("ngForOf",e.documentSignatures)}}var ra=(()=>{class o{constructor(e,t,i,r,s,f){this.toastrService=e,this.translationService=t,this.documentService=i,this.dialogRef=r,this.data=s,this.commonService=f,this.documentSignatures=[],this.uploadedSignature=null,this.mode="indeterminate"}ngOnInit(){this.initializeSignaturePad(),this.getDocumentSignatures()}getDocumentSignatures(){this.documentService.getDocumentSignature(this.data.id).subscribe(e=>{this.documentSignatures=e})}initializeSignaturePad(){let e=this.canvasRef.nativeElement;this.signaturePad=new st(e),this.signaturePad.addEventListener("beginStroke",()=>{if(this.uploadedSignature){this.uploadedSignature=null;let t=document.querySelector('input[type="file"].signature-upload');t&&(t.value="")}}),this.resizeCanvas()}resizeCanvas(){let e=this.canvasRef.nativeElement,t=Math.max(window.devicePixelRatio||1,1);e.width=e.offsetWidth*t,e.height=e.offsetHeight*t,e.getContext("2d")?.scale(t,t)}clearSignature(){this.signaturePad.clear()}saveSignature(){let e=null;if(this.signaturePad&&!this.signaturePad.isEmpty()?e=this.signaturePad.toDataURL():this.uploadedSignature&&(e=this.uploadedSignature),!e||e==="data:image/png;base64,"||e==="data:image/jpeg;base64,"){this.toastrService.error(this.translationService.getValue("PLEASE_PROVIDE_SIGNATURE"));return}this.uploadSignature(e)}uploadSignature(e){let t={documentId:this.data.id,signatureUrl:e};this.documentService.saveDocumentSignature(t).subscribe({next:i=>{this.documentSignatures.push(i),this.addDocumentTrail(),this.dialogRef.close(!0),this.uploadedSignature=null,this.signaturePad?.clear()},error:()=>{this.toastrService.error(this.translationService.getValue("SIGNATURE_UPLOAD_FAILED"))}})}onFileSelected(e){let i=e.target.files?.[0];if(!i)return;if(i.type!=="image/png"&&i.type!=="image/jpeg"){this.toastrService.error(this.translationService.getValue("INVALID_FILE_TYPE"));return}let r=new FileReader;r.onload=()=>{let s=new Image;s.src=r.result,s.onload=()=>{let f=this.canvasRef.nativeElement;if(!f.getContext("2d"))return;let v=document.createElement("canvas");v.width=f.width,v.height=f.height;let C=v.getContext("2d");C&&(C.clearRect(0,0,v.width,v.height),C.drawImage(s,0,0,v.width,v.height),this.uploadedSignature=v.toDataURL(i.type==="image/jpeg"?"image/jpeg":"image/png"),this.signaturePad.clear())}},r.readAsDataURL(i)}addDocumentTrail(){let e={documentId:this.data.id,operationName:Ce.Added_Signature.toString()};this.commonService.addDocumentAuditTrail(e).subscribe(()=>{})}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(t){return new(t||o)(u(j),u(G),u(le),u(N),u(O),u(we))}}static{this.\u0275cmp=I({type:o,selectors:[["app-document-signature"]],viewQuery:function(t,i){if(t&1&&Le(so,7),t&2){let r;me(r=de())&&(i.canvasRef=r.first)}},standalone:!0,features:[J],decls:42,vars:23,consts:[["canvas",""],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],[3,"code"],["mat-icon-button","",1,"ms-auto",3,"click"],["name","x",1,"close-icon","text-danger"],[1,"row"],["for","signature"],[1,"col-md-12"],[1,"signature-container"],["type","button",1,"float-end","btn","btn-danger","btn-sm","mt-1",3,"click"],["name","trash-2",1,"small-icon"],["for","or",1,"text-danger","d-flex","justify-content-center","align-items-center","w-100"],[1,"col-sm-12"],[1,"form-group"],["type","file","accept","image/png, image/jpeg",1,"form-control","signature-upload",3,"change"],[1,"mt-2","col-md-12"],["type","button","cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],[1,"row","mt-2"],["class","row mb-3",4,"ngIf"],[1,"row","mb-3"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"previous-signature"],["alt","Signature",1,"signature-img",3,"src"],[1,"signature-details"]],template:function(t,i){if(t&1){let r=T();l(0,"div",1)(1,"span",2),m(2),d(3,"translate"),g(4,"app-page-help-text",3),c(),l(5,"button",4),S("click",function(){return w(r),x(i.closeDialog())}),g(6,"i-feather",5),c()(),l(7,"mat-dialog-content")(8,"div",6)(9,"label",7),m(10),d(11,"translate"),c(),l(12,"div",8)(13,"div",9),g(14,"canvas",null,0),c()(),l(16,"div",8)(17,"button",10),S("click",function(){return w(r),x(i.clearSignature())}),g(18,"i-feather",11),m(19),d(20,"translate"),c()(),l(21,"label",12),m(22),d(23,"translate"),c(),l(24,"div",13)(25,"div",14)(26,"label",7),m(27),d(28,"translate"),c(),l(29,"input",15),S("change",function(f){return w(r),x(i.onFileSelected(f))}),c()()(),l(30,"div",16)(31,"button",17),S("click",function(){return w(r),x(i.saveSignature())}),g(32,"i-feather",18),m(33),d(34,"translate"),c(),l(35,"button",19),S("click",function(){return w(r),x(i.closeDialog())}),g(36,"i-feather",20),m(37),d(38,"translate"),c()()(),l(39,"div",21)(40,"div",8),E(41,co,2,1,"div",22),c()()()}t&2&&(a(2),h(" ",p(3,9,"DOCUMENT_SIGNATURE")," "),a(2),_("code","DOCUMENT_SIGNATURE"),a(6),h(" ",p(11,11,"ADD_YOUR_SIGNATURE"),""),a(9),h(" ",p(20,13,"CLEAR")," "),a(3),h(" ",p(23,15,"OR")," "),a(5),h(" ",p(28,17,"UPLOAD_YOUR_SIGNATURE"),""),a(6),h(" ",p(34,19,"SAVE")," "),a(4),h(" ",p(38,21,"CANCEL")," "),a(4),_("ngIf",i.documentSignatures.length>0))},dependencies:[se,M,F,xe,ie,ce,re,A,P,H,L,De,Ee,ke,Ne,nt,Mi,ae,Vi],styles:[".signature-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.signature-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{border:1px solid #ccc;width:100%}.signature-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{margin-top:10px;display:flex;gap:10px}.previous-signature[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.previous-signature[_ngcontent-%COMP%]   .signature-img[_ngcontent-%COMP%]{width:200px;height:55px;margin-right:1rem;border:1px solid #ddd}.previous-signature[_ngcontent-%COMP%]   .signature-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}@media screen and (max-width: 600px){.signature-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-width:90vw}}"]})}}return o})();function mo(o,n){if(o&1&&(l(0,"mat-option",17),m(1),c()),o&2){let e=n.$implicit;_("value",e.id),a(),oe(" ",e.label," \u2014 ",e.description," ")}}function po(o,n){if(o&1&&(ze(0),l(1,"mat-optgroup",15),E(2,mo,2,3,"mat-option",16),c(),Qe()),o&2){let e=n.$implicit,t=y();a(),_("label",e),a(),_("ngForOf",t.groupedModels[e])}}function uo(o,n){if(o&1){let e=T();l(0,"div",18)(1,"div",19)(2,"h3",20),m(3),d(4,"translate"),c(),l(5,"button",21),S("click",function(){w(e);let i=y();return x(i.copySummary())}),l(6,"mat-icon"),m(7,"content_copy"),c()()(),g(8,"p",22),c()}if(o&2){let e=y();a(3),Y(p(4,2,"AI_SUMMARY")),a(5),_("innerHTML",e.summary,Ut)}}var Ea=(()=>{class o{get providers(){return Object.keys(this.groupedModels)}constructor(e,t){this.data=e,this.dialog=t,this.summary=null,this.fb=Q(it),this.models=Qi,this.groupedModels={},this.aiSummary=Q(zi),this.toastrService=Q(j),this.translationService=Q(G),this.isLoading=!1,this.summaryForm=this.fb.group({model:["gemini-2.5-flash-lite"]}),this.groupedModels=this.models.reduce((i,r)=>((i[r.provider]=i[r.provider]||[]).push(r),i),{})}generateSummary(){this.summary=null;let{model:e}=this.summaryForm.value;this.isLoading=!0,this.aiSummary.summarize(e,this.data.id).subscribe({next:t=>{this.isLoading=!1,this.summary=Xi.parse(t.summary),this.toastrService.success(this.translationService.getValue("SUMMARY_GENERATED_SUCCESSFULLY"))},error:()=>{this.isLoading=!1}})}closeDialog(){this.dialog.close()}copySummary(){this.summary&&navigator.clipboard.writeText(this.summary.replace(/<[^>]+>/g,"")).then(()=>{this.toastrService.success(this.translationService.getValue("SUMMARY_COPIED_TO_CLIPBOARD"))})}static{this.\u0275fac=function(t){return new(t||o)(u(O),u(_i))}}static{this.\u0275cmp=I({type:o,selectors:[["app-ai-document-summary"]],standalone:!0,features:[J],decls:29,vars:16,consts:[[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],["mat-icon-button","",1,"ms-auto",3,"click"],["color","warn",1,"close-icon"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-sm-12"],[1,"form-group"],["panelClass","mat-select-control","formControlName","model",1,"form-control"],[4,"ngFor","ngForOf"],[1,"col-sm-12","mt-2"],["role","alert",1,"alert","alert-warning","d-flex","align-items-start"],["color","warn","aria-hidden","true",1,"me-2"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["class","mt-4 p-3 border rounded bg-gray-100",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mt-4","p-3","border","rounded","bg-gray-100"],[1,"d-flex","align-items-center"],[1,"mb-0"],["mat-icon-button","","aria-label","Copy summary",1,"ms-auto",3,"click"],[3,"innerHTML"]],template:function(t,i){t&1&&(l(0,"div",0)(1,"span",1),m(2),d(3,"translate"),c(),l(4,"button",2),S("click",function(){return i.closeDialog()}),l(5,"mat-icon",3),m(6,"close"),c()()(),l(7,"mat-dialog-content")(8,"form",4),S("ngSubmit",function(){return i.generateSummary()}),l(9,"div",5)(10,"div",6)(11,"div",7)(12,"label"),m(13),d(14,"translate"),c(),l(15,"mat-select",8),E(16,po,3,2,"ng-container",9),c()()()(),l(17,"div",5)(18,"div",10)(19,"div",11)(20,"mat-icon",12),m(21,"warning"),c(),l(22,"div"),m(23),d(24,"translate"),c()(),l(25,"button",13),m(26),d(27,"translate"),c()()()(),E(28,uo,9,4,"div",14),c()),t&2&&(a(2),h("",p(3,8,"DOCUMENT_SUMMARY")," "),a(6),_("formGroup",i.summaryForm),a(5),h(" ",p(14,10,"SELECT_MODEL")," "),a(3),_("ngForOf",i.providers),a(7),h(" ",p(24,12,"AI_SUMMARY_WARNING")," "),a(2),_("disabled",i.isLoading),a(),h(" ",p(27,14,"GENERATE_SUMMARY")," "),a(2),_("ngIf",i.summary))},dependencies:[Di,W,q,B,se,M,F,nt,Ni,ye,gi,Fi,z,ce,re,A,U,K,Li,P,L]})}}return o})();function ho(o,n){o&1&&(l(0,"div",16),m(1),d(2,"translate"),c()),o&2&&(a(),h(" ",p(2,1,"WATERMARK_TEXT_IS_REQUIRED")," "))}function _o(o,n){if(o&1&&(l(0,"div"),E(1,ho,3,3,"div",15),c()),o&2){let e,t=y();a(),_("ngIf",t.documentWatermarkForm.get("watermarkText").touched&&((e=t.documentWatermarkForm.get("watermarkText").errors)==null?null:e.required))}}var Fa=(()=>{class o extends te{constructor(e,t,i,r){super(),this.dialogRef=e,this.data=t,this.fb=i,this.documentService=r,this.isEditMode=!1}ngOnInit(){this.createDocumentLinkForm(),this.data&&(this.isEditMode=!0,this.pathValue())}pathValue(){this.documentWatermarkForm.get("documentId").setValue(this.data.id)}createDocumentLinkForm(){this.documentWatermarkForm=this.fb.group({documentId:[""],watermarkText:["",[V.required]]})}createWatermark(){if(!this.documentWatermarkForm.valid){this.documentWatermarkForm.markAllAsTouched();return}let e=this.documentWatermarkForm.getRawValue();this.sub$.sink=this.documentService.watermarkDocument(e).subscribe({next:()=>{this.dialogRef.close(!0)}})}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(t){return new(t||o)(u(N),u(O),u(ee),u(le))}}static{this.\u0275cmp=I({type:o,selectors:[["app-document-watermark"]],standalone:!0,features:[X,J],decls:24,vars:15,consts:[[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],[3,"code"],["mat-icon-button","",1,"close-button","ms-auto",3,"click"],["color","warn",1,"close-icon"],["mat-dialog-content","",1,"pt-0"],[3,"formGroup"],[1,"row"],[1,"col-md-12","mt-2"],[1,"form-label"],["formControlName","watermarkText","type","text","id","link",1,"form-control"],[4,"ngIf"],[1,"m-t-10","col-md-12"],["type","submit",1,"btn","btn-success",3,"click"],["type","submit",1,"btn","btn-danger","ms-2",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,i){if(t&1&&(l(0,"div",0)(1,"span",1),m(2),d(3,"translate"),g(4,"app-page-help-text",2),c(),l(5,"button",3),S("click",function(){return i.closeDialog()}),l(6,"mat-icon",4),m(7,"close"),c()()(),l(8,"div",5)(9,"form",6)(10,"div",7)(11,"div",8)(12,"label",9),m(13),d(14,"translate"),c(),g(15,"input",10),E(16,_o,2,1,"div",11),c(),l(17,"div",12)(18,"button",13),S("click",function(){return i.createWatermark()}),m(19),d(20,"translate"),c(),l(21,"button",14),S("click",function(){return i.closeDialog()}),m(22),d(23,"translate"),c()()()()()),t&2){let r;a(2),h("",p(3,7,"WATERMARK_DOCUMENT")," "),a(2),_("code","WATERMARK_DOCUMENT"),a(5),_("formGroup",i.documentWatermarkForm),a(4),Y(p(14,9,"WATERMARK_TEXT")),a(3),_("ngIf",i.documentWatermarkForm.get("watermarkText").touched&&((r=i.documentWatermarkForm.get("watermarkText"))==null?null:r.errors)),a(3),h(" ",p(20,11,"ADD_WATERMARK")," "),a(3),h(" ",p(23,13,"CANCEL")," ")}},dependencies:[se,M,F,xe,ce,A,W,Z,q,B,U,K,P,z,H,L,Ee,ke,ot,ae,at]})}}return o})();export{bo as a,Mo as b,jo as c,Qo as d,Hr as e,ra as f,Ea as g,Fa as h};
