import{a as Yt}from"./chunk-4MF5KQNW.js";import{e as It}from"./chunk-BA7IEC3F.js";import{a as jt}from"./chunk-ADSK4K64.js";import"./chunk-CZA53JXZ.js";import{a as ae}from"./chunk-4JQNLXHD.js";import"./chunk-EDFYBFRY.js";import{a as T,b as L,c as b,d as bt,e as Mt,f as Nt,g as qt,h as Lt}from"./chunk-XCK6F3VT.js";import{a as Bt,b as kt,c as Ot,d as Vt,e as Ut}from"./chunk-DL7A26HC.js";import{a as At,b as wt}from"./chunk-3NG6G7DU.js";import{a as oe,b as me,c as Qt}from"./chunk-WGGER5HX.js";import{a as ne}from"./chunk-DL4SMTXP.js";import{C as at,E as ot,H as mt,I as dt,J as lt,K as st,L as pt,M as ct,N as ut,O as ft,P as _t,Q as ht,R as vt,S as Rt,T as gt,U as yt,V as Et,W as Ct,Y as te,Z as xt,_ as St,ba as ie,c as He,ca as Dt,d as Ge,e as We,ea as Tt,f as Pe,ha as re,i as ze,j as Je,ja as Ft,k as Ke,n as et,o as tt,p as it,q as rt,t as nt}from"./chunk-H5SZDBVN.js";import"./chunk-XE6VZSAJ.js";import{a as ee}from"./chunk-KX634QZQ.js";import{F as be,J as Me,L as w}from"./chunk-3O3IKF6A.js";import{ia as J,ja as Z,ma as Xe,na as Ze}from"./chunk-TR4MAYT5.js";import{p as K,t as X}from"./chunk-AWIVOLPG.js";import"./chunk-J2LIJEQH.js";import"./chunk-AGIEFCW2.js";import"./chunk-F5F27R7A.js";import{B as je,C as Ye,D as $e,c as P,e as A,h as z,i as we,n as Ne,o as qe,r as Le,s as Be,t as ke,u as Oe,v as Ve,w as Ue,x as Qe}from"./chunk-6EN4EXPL.js";import{$ as Ee,$b as _,B as Re,Ba as De,Ca as k,Cb as f,Ea as pe,Fc as d,Gb as s,Gc as p,Hc as q,J as ge,Ka as O,Kd as Ae,La as V,Md as G,Nd as W,Pd as _e,Q as ye,Qb as a,Rb as n,Sb as h,Ta as E,Tb as v,Ua as C,Ub as R,Wb as S,Zb as x,a as he,ba as Ce,cc as D,cd as $,dd as Ie,fa as xe,fc as ce,gc as ue,hc as fe,kc as M,mc as l,nc as g,o as ve,ob as i,oc as u,pb as y,pc as Te,pd as H,sc as Q,tc as j,uc as Y,wa as Se,yc as I,zb as U,zc as Fe}from"./chunk-SXJN2XK6.js";var ni=()=>["/reminders"];function ai(t,m){t&1&&(a(0,"div",35),l(1),d(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"SUBJECT_IS_REQUIRED")," "))}function oi(t,m){t&1&&(a(0,"div",35),l(1),d(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"MESSAGE_IS_REQUIRED")," "))}function mi(t,m){if(t&1&&(a(0,"ng-option",36),l(1),n()),t&2){let e=m.$implicit;s("value",e),i(),Te(" ",e.firstName," ",e.lastName," ")}}function di(t,m){if(t&1&&(a(0,"option",36),l(1),d(2,"translate"),n()),t&2){let e=m.$implicit;s("value",e==null?null:e.id),i(),u(" ",p(2,2,e==null?null:e.name.toUpperCase())," ")}}function li(t,m){t&1&&(a(0,"div",35),l(1),d(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"FREQUENCY_IS_REQUIRED")," "))}function si(t,m){if(t&1){let e=S();a(0,"div",7)(1,"div",37)(2,"label",38),l(3),d(4,"translate"),n(),a(5,"select",39),x("change",function(){E(e);let r=_();return C(r.onFrequencyChange())}),a(6,"option",40),l(7),d(8,"translate"),n(),f(9,di,3,4,"option",26),n(),f(10,li,3,3,"div",18),n()()}if(t&2){let e,o=_();i(3),u(" ",p(4,4,"FREQUENCY"),""),i(4),u("--",p(8,6,"NONE"),"--"),i(2),s("ngForOf",o.reminderFrequencies),i(),s("ngIf",(e=o.reminderForm.get("frequency"))==null?null:e.hasError("required"))}}function pi(t,m){if(t&1&&(a(0,"div",45),v(1,46),a(2,"mat-checkbox",47),l(3),d(4,"translate"),n(),R(),n()),t&2){let e=m.$implicit,o=m.index;i(),s("formGroupName",o),i(2),u(" ",p(4,2,e.get("name").value.toUpperCase())," ")}}function ci(t,m){if(t&1&&(a(0,"div")(1,"label",42),l(2),d(3,"translate"),n(),a(4,"div",43),f(5,pi,5,4,"div",44),n()()),t&2){let e=_(2);i(2),g(p(3,2,"WEEK_DAYS")),i(3),s("ngForOf",e.dailyRemindersArray.controls)}}function ui(t,m){if(t&1&&(a(0,"mat-radio-button",52),l(1),d(2,"translate"),n()),t&2){let e=m.$implicit;s("value",e.id),i(),g(p(2,2,e.name))}}function fi(t,m){if(t&1&&(a(0,"div")(1,"label",48),l(2),d(3,"translate"),n(),a(4,"div",49)(5,"mat-radio-group",50),f(6,ui,3,4,"mat-radio-button",51),n()()()),t&2){let e=_(2);i(2),g(p(3,2,"WEEK_DAYS")),i(4),s("ngForOf",e.dayOfWeek)}}function _i(t,m){if(t&1&&(a(0,"option",36),l(1),d(2,"translate"),n()),t&2){let e=m.$implicit;s("value",e.id),i(),u(" ",p(2,2,e.name)," ")}}function hi(t,m){if(t&1&&(a(0,"option",36),l(1),n()),t&2){let e=m.$implicit;s("value",e),i(),u(" ",e," ")}}function vi(t,m){t&1&&(a(0,"div")(1,"div",35),l(2),d(3,"translate"),n()()),t&2&&(i(2),u(" ",p(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function Ri(t,m){if(t&1){let e=S();a(0,"tr"),v(1,46),a(2,"td"),l(3),d(4,"translate"),n(),a(5,"td")(6,"select",58),x("change",function(){let r=E(e).$implicit,c=_(3);return C(c.onDateChange(r))}),f(7,_i,3,4,"option",26),n()(),a(8,"td")(9,"select",59),x("change",function(){let r=E(e).$implicit,c=_(3);return C(c.onDateChange(r))}),f(10,hi,2,2,"option",26),n(),f(11,vi,4,3,"div",41),n(),R(),n()}if(t&2){let e=m.$implicit,o=m.index,r=_(3);i(),s("formGroupName",o),i(2),u(" ",p(4,5,e.get("name").value),""),i(4),s("ngForOf",e.get("monthValues").value),i(3),s("ngForOf",r.days),i(),s("ngIf",e.get("day").touched&&e.hasError("invalidDate"))}}function gi(t,m){if(t&1&&(a(0,"div")(1,"label",53),l(2),d(3,"translate"),n(),a(4,"div",54)(5,"table",55)(6,"thead")(7,"tr"),h(8,"th"),a(9,"th"),l(10),d(11,"translate"),n(),a(12,"th"),l(13),d(14,"translate"),n()()(),a(15,"tbody",56),f(16,Ri,12,7,"tr",57),n()()()()),t&2){let e=_(2);i(2),g(p(3,4,"SELECT_QUARTER_DATE")),i(8),g(p(11,6,"MONTH")),i(3),g(p(14,8,"DAY")),i(3),s("ngForOf",e.quarterlyRemindersArray.controls)}}function yi(t,m){if(t&1&&(a(0,"option",36),l(1),d(2,"translate"),n()),t&2){let e=m.$implicit;s("value",e.id),i(),u(" ",p(2,2,e.name)," ")}}function Ei(t,m){if(t&1&&(a(0,"option",36),l(1),n()),t&2){let e=m.$implicit;s("value",e),i(),u(" ",e," ")}}function Ci(t,m){t&1&&(a(0,"div")(1,"div",35),l(2),d(3,"translate"),n()()),t&2&&(i(2),u(" ",p(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function xi(t,m){if(t&1){let e=S();a(0,"tr"),v(1,46),a(2,"td"),l(3),d(4,"translate"),n(),a(5,"td")(6,"select",58),x("change",function(){let r=E(e).$implicit,c=_(3);return C(c.onDateChange(r))}),f(7,yi,3,4,"option",26),n()(),a(8,"td")(9,"select",59),x("change",function(){let r=E(e).$implicit,c=_(3);return C(c.onDateChange(r))}),f(10,Ei,2,2,"option",26),n(),f(11,Ci,4,3,"div",41),n(),R(),n()}if(t&2){let e=m.$implicit,o=m.index,r=_(3);i(),s("formGroupName",o),i(2),g(p(4,5,e.get("name").value)),i(4),s("ngForOf",e.get("monthValues").value),i(3),s("ngForOf",r.days),i(),s("ngIf",e.get("day").touched&&e.hasError("invalidDate"))}}function Si(t,m){if(t&1&&(a(0,"div")(1,"label",60),l(2),d(3,"translate"),n(),a(4,"div",61)(5,"table",55)(6,"thead")(7,"tr"),h(8,"th"),a(9,"th"),l(10),d(11,"translate"),n(),a(12,"th"),l(13),d(14,"translate"),n()()(),a(15,"tbody",62),f(16,xi,12,7,"tr",57),n()()()()),t&2){let e=_(2);i(2),g(p(3,4,"SELECT_DATE")),i(8),g(p(11,6,"MONTH")),i(3),g(p(14,8,"DAY")),i(3),s("ngForOf",e.halfYearlyRemindersArray.controls)}}function Di(t,m){if(t&1&&(a(0,"div",7)(1,"div",15),f(2,ci,6,4,"div",41)(3,fi,7,4,"div",41)(4,gi,17,10,"div",41)(5,Si,17,10,"div",41),n()()),t&2){let e=_();i(2),s("ngIf",e.reminderForm.get("frequency").value=="0"),i(),s("ngIf",e.reminderForm.get("frequency").value=="1"),i(),s("ngIf",e.reminderForm.get("frequency").value=="3"),i(),s("ngIf",e.reminderForm.get("frequency").value=="4")}}function Ti(t,m){t&1&&(a(0,"div",35),l(1),d(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"DATE_IS_REQUIRED")," "))}function Fi(t,m){t&1&&(a(0,"div",35),l(1),d(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function Ii(t,m){if(t&1&&(a(0,"div",37)(1,"label",38),l(2),d(3,"translate"),n(),h(4,"input",63),d(5,"translate"),h(6,"owl-date-time",null,0),f(8,Ti,3,3,"div",18)(9,Fi,3,3,"div",18),n()),t&2){let e=M(7),o=_();i(2),u(" ",p(3,7,"REMINDER_DATE"),""),i(2),D("placeholder",p(5,9,"DATE")),s("owlDateTimeTrigger",e)("min",o.minDate)("owlDateTime",e),i(4),s("ngIf",o.reminderForm.get("startDate").touched&&o.reminderForm.get("startDate").hasError("required")),i(),s("ngIf",o.reminderForm.get("startDate").touched&&o.reminderForm.get("startDate").hasError("owlDateTimeMin"))}}function bi(t,m){t&1&&(a(0,"div",35),l(1),d(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"START_DATE_IS_REQUIRED")," "))}function Mi(t,m){t&1&&(a(0,"div",35),l(1),d(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function Ai(t,m){if(t&1&&(a(0,"div",37)(1,"label",38),l(2),d(3,"translate"),n(),h(4,"input",63),d(5,"translate"),h(6,"owl-date-time",null,1),f(8,bi,3,3,"div",18)(9,Mi,3,3,"div",18),n()),t&2){let e,o=M(7),r=_();i(2),u(" ",p(3,7,"REMINDER_START_DATE"),""),i(2),D("placeholder",p(5,9,"START_DATE")),s("owlDateTimeTrigger",o)("min",r.minDate)("owlDateTime",o),i(4),s("ngIf",r.reminderForm.get("startDate").touched&&r.reminderForm.get("startDate").hasError("required")),i(),s("ngIf",r.reminderForm.get("startDate").touched&&((e=r.reminderForm.get("startDate"))==null?null:e.hasError("owlDateTimeMin")))}}function wi(t,m){if(t&1&&(a(0,"div",37)(1,"label",38),l(2),d(3,"translate"),n(),h(4,"input",64),d(5,"translate"),h(6,"owl-date-time",null,2),n()),t&2){let e=M(7);i(2),g(p(3,4,"REMINDER_END_DATE")),i(2),D("placeholder",p(5,6,"END_DATE")),s("owlDateTimeTrigger",e)("owlDateTime",e)}}var B=(()=>{class t extends J{get dailyRemindersArray(){return this.reminderForm.get("dailyReminders")}get quarterlyRemindersArray(){return this.reminderForm.get("quarterlyReminders")}get halfYearlyRemindersArray(){return this.reminderForm.get("halfYearlyReminders")}constructor(e,o,r,c,N,se,Pt){super(),this.fb=e,this.reminderService=o,this.commonService=r,this.toastrService=c,this.route=N,this.activatedRoute=se,this.translationService=Pt,this.reminderFrequencies=[],this.minDate=new Date,this.users=[],this.showSpinners=!0,this.showSeconds=!1,this.touchUi=!1,this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.dayOfWeek=bt,this.months=Mt,this.days=[],this.firstQuaterMonths=this.months.filter(F=>[1,2,3].indexOf(F.id)>=0),this.secondQuaterMonths=this.months.filter(F=>[4,5,6].indexOf(F.id)>=0),this.thirdQuaterMonths=this.months.filter(F=>[7,8,9].indexOf(F.id)>=0),this.forthQuaterMonths=this.months.filter(F=>[10,11,12].indexOf(F.id)>=0)}ngOnInit(){for(let e=1;e<=31;e++)this.days.push(e);this.getReminderFrequency(),this.createReminderForm(),this.sub$.sink=this.activatedRoute.data.subscribe(e=>{e.reminder&&(this.reminder=he({},e.reminder),this.reminder.dailyReminders=this.reminder.dailyReminders.sort((o,r)=>o.dayOfWeek-r.dayOfWeek),this.reminder.quarterlyReminders=this.reminder.quarterlyReminders.sort((o,r)=>o.quarter-r.quarter),this.reminder.halfYearlyReminders=this.reminder.halfYearlyReminders.sort((o,r)=>o.quarter-r.quarter),this.reminderForm.patchValue(this.reminder),this.onFrequencyChange(),this.reminderForm.patchValue(this.reminder),this.reminderForm.get("isRepeated").value&&this.reminderForm.get("frequency").setValidators([A.required]))}),this.getUsers()}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(e=>this.reminderFrequencies=[...e])}createReminderForm(){let e=new Date;this.reminderForm=this.fb.group({id:[""],subject:["",[A.required]],message:["",[A.required]],frequency:[""],isRepeated:[!1],isEmailNotification:[!1],startDate:[e,[A.required]],endDate:[null],dayOfWeek:[new Date().getDay()],documentId:[null],selectedUsers:[]})}checkData(e){e.checked?this.reminderForm.get("frequency").setValidators([A.required]):(this.reminderForm.get("frequency").setValidators([]),this.reminderForm.get("frequency").updateValueAndValidity()),this.reminderForm.markAllAsTouched()}createReminder(){if(!this.reminderForm.valid){this.reminderForm.markAllAsTouched();return}let e=this.reminderForm.value,o=this.reminderForm.get("selectedUsers").value??[];e.reminderUsers=o?.map(r=>({reminderId:e.id,userId:r.id})),e.isRepeated||(e.dailyReminders=[],e.quarterlyReminders=[],e.halfYearlyReminders=[]),this.reminder?(e.dailyReminders&&(e.dailyReminders=e.dailyReminders.map(r=>(r.reminderId=this.reminder.id,r))),e.quarterlyReminders&&(e.quarterlyReminders=e.quarterlyReminders.map(r=>(r.reminderId=this.reminder.id,r))),e.halfYearlyReminders&&(e.halfYearlyReminders=e.halfYearlyReminders.map(r=>(r.reminderId=this.reminder.id,r))),this.sub$.sink=this.reminderService.updateReminder(e).subscribe(()=>{this.toastrService.success(this.translationService.getValue("REMINDER_UPDATED_SUCCESSFULLY")),this.route.navigate(["/reminders"])})):this.sub$.sink=this.reminderService.addReminder(e).subscribe(()=>{this.toastrService.success(this.translationService.getValue("REMINDER_CREATED_SUCCESSFULLY")),this.route.navigate(["/reminders"])})}getUsers(){this.sub$.sink=this.commonService.getUsersForDropdown().subscribe(e=>{if(this.users=e,this.reminder){let o=this.reminder.reminderUsers.map(c=>c.userId),r=this.users.filter(c=>o.indexOf(c.id)>=0);this.reminderForm.get("selectedUsers").setValue(r)}})}onFrequencyChange(){let e=this.reminderForm.get("frequency").value;e=e==0?"0":e,e==L.Daily.toString()?(this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.addDailReminders(),this.reminderForm.get("dayOfWeek").setValue("")):e==L.Weekly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(new Date().getDay())):e==L.Quarterly.toString()?(this.addQuarterlyReminders(),this.removeDailReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):e==L.HalfYearly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.addHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(""))}addDailReminders(){if(!this.reminderForm.contains("dailyReminders")){let e=this.fb.array([]);e.push(this.createDailyReminderFormGroup(T.Sunday)),e.push(this.createDailyReminderFormGroup(T.Monday)),e.push(this.createDailyReminderFormGroup(T.Tuesday)),e.push(this.createDailyReminderFormGroup(T.Wednesday)),e.push(this.createDailyReminderFormGroup(T.Thursday)),e.push(this.createDailyReminderFormGroup(T.Friday)),e.push(this.createDailyReminderFormGroup(T.Saturday)),this.reminderForm.addControl("dailyReminders",e)}}addQuarterlyReminders(){if(!this.reminderForm.contains("quarterlyReminders")){let e=this.fb.array([]);e.push(this.createQuarterlyReminderFormGroup(b.Quarter1,"JAN_MAR",this.firstQuaterMonths)),e.push(this.createQuarterlyReminderFormGroup(b.Quarter2,"APR_JUN",this.secondQuaterMonths)),e.push(this.createQuarterlyReminderFormGroup(b.Quarter3,"JUL_SEPT",this.thirdQuaterMonths)),e.push(this.createQuarterlyReminderFormGroup(b.Quarter4,"OCT_DEC",this.forthQuaterMonths)),this.reminderForm.addControl("quarterlyReminders",e)}}addHalfYearlyReminders(){if(!this.reminderForm.contains("halfYearlyReminders")){let e=this.fb.array([]),o=this.months.filter(c=>[1,2,3,4,5,6].indexOf(c.id)>=0),r=this.months.filter(c=>[7,8,9,10,11,12].indexOf(c.id)>=0);e.push(this.createHalfYearlyReminderFormGroup(b.Quarter1,"JAN_JUN",o)),e.push(this.createHalfYearlyReminderFormGroup(b.Quarter2,"JUL_DEC",r)),this.reminderForm.addControl("halfYearlyReminders",e)}}removeDailReminders(){this.reminderForm.contains("dailyReminders")&&this.reminderForm.removeControl("dailyReminders")}removeQuarterlyReminders(){this.reminderForm.contains("quarterlyReminders")&&this.reminderForm.removeControl("quarterlyReminders")}removeHalfYearlyReminders(){this.reminderForm.contains("halfYearlyReminders")&&this.reminderForm.removeControl("halfYearlyReminders")}createDailyReminderFormGroup(e){return this.fb.group({id:[""],reminderId:[""],dayOfWeek:[e],isActive:[!0],name:[T[e]]})}createQuarterlyReminderFormGroup(e,o,r){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[this.getCurrentDay()],month:[r[0].id],name:[o],monthValues:[r]})}createHalfYearlyReminderFormGroup(e,o,r){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[this.getCurrentDay()],month:[r[0].id],name:[o],monthValues:[r]})}getCurrentDay(){return new Date().getDate()}onDateChange(e){let o=e.get("day").value,r=e.get("month").value,c=new Date(new Date().getFullYear(),Number.parseInt(r),0).getDate();o>c&&(e.setErrors({invalidDate:"Invalid Date"}),e.markAllAsTouched())}static{this.\u0275fac=function(o){return new(o||t)(y(je),y(ae),y(w),y(K),y(G),y(Ae),y(Z))}}static{this.\u0275cmp=O({type:t,selectors:[["app-add-reminder"]],features:[U],decls:57,vars:37,consts:[["dt2",""],["dt3",""],["dt4",""],[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],[3,"code"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body","table-responsive"],[3,"formGroup"],[1,"col-md-12"],["for","subject",1,"form-label"],["formControlName","subject","type","text","id","subject",1,"form-control"],["class","text-danger",4,"ngIf"],["for","message",1,"form-label"],["formControlName","message","id","message","cols","30",1,"form-control"],[1,"col-md-2"],["color","primary","formControlName","isRepeated",3,"change"],["color","primary","formControlName","isEmailNotification"],[1,"col-md-4"],["formControlName","selectedUsers",3,"multiple","placeholder"],[3,"value",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["class","col-md-6",4,"ngIf"],["class"," col-md-6",4,"ngIf"],[1,"m-t-2","col-md-12"],["type","submit",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],["name","save",1,"small-icon"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],["name","x-circle",1,"small-icon"],[1,"text-danger"],[3,"value"],[1,"col-md-6"],["for","frequency",1,"form-label"],["formControlName","frequency","id","frequency",1,"form-select",3,"change"],["value",""],[4,"ngIf"],["for","weekDays",1,"form-label"],["id","weekDays",1,"row"],["class","col-sm-auto m-r-1","formArrayName","dailyReminders",4,"ngFor","ngForOf"],["formArrayName","dailyReminders",1,"col-sm-auto","m-r-1"],[3,"formGroupName"],["color","primary","formControlName","isActive",1,"m-r-1"],["for","weekDay",1,"form-label"],["id","weekDay"],["formControlName","dayOfWeek"],["class","mr-2","color","primary",3,"value",4,"ngFor","ngForOf"],["color","primary",1,"mr-2",3,"value"],["for","Quarterly",1,"form-label"],["id","Quarterly",1,"row"],[1,"table"],["formArrayName","quarterlyReminders"],[4,"ngFor","ngForOf"],["formControlName","month",1,"form-select",3,"change"],["formControlName","day",1,"form-select",3,"change"],["for","HalfYearly"],["id","HalfYearly",1,"row"],["formArrayName","halfYearlyReminders"],["formControlName","startDate",1,"form-control",3,"owlDateTimeTrigger","min","owlDateTime","placeholder"],["formControlName","endDate",1,"form-control",3,"owlDateTimeTrigger","owlDateTime","placeholder"]],template:function(o,r){if(o&1&&(a(0,"section",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"span",9),l(7),d(8,"translate"),n(),h(9,"app-page-help-text",10),n()()()(),a(10,"div",7)(11,"div",11)(12,"div",12)(13,"div",13)(14,"form",14)(15,"div",7)(16,"div",15)(17,"label",16),l(18),d(19,"translate"),n(),h(20,"input",17),f(21,ai,3,3,"div",18),n()(),a(22,"div",7)(23,"div",15)(24,"label",19),l(25),d(26,"translate"),n(),h(27,"textarea",20),f(28,oi,3,3,"div",18),n()(),a(29,"div",7)(30,"div",21)(31,"mat-checkbox",22),x("change",function(N){return r.checkData(N)}),l(32),d(33,"translate"),n()(),a(34,"div",21)(35,"mat-checkbox",23),l(36),d(37,"translate"),n()(),a(38,"div",24)(39,"ng-select",25),d(40,"translate"),f(41,mi,2,3,"ng-option",26),n()()(),f(42,si,11,8,"div",27)(43,Di,6,4,"div",27),a(44,"div",7),f(45,Ii,10,11,"div",28)(46,Ai,10,11,"div",29)(47,wi,8,8,"div",28),a(48,"div",30)(49,"button",31),x("click",function(){return r.createReminder()}),h(50,"i-feather",32),l(51),d(52,"translate"),n(),a(53,"button",33),h(54,"i-feather",34),l(55),d(56,"translate"),n()()()()()()()()()()),o&2){let c;i(7),g(p(8,20,"MANAGE_REMINDER")),i(2),s("code","ADD_REMINDER"),i(5),s("formGroup",r.reminderForm),i(4),u(" ",p(19,22,"SUBJECT"),""),i(3),s("ngIf",r.reminderForm.get("subject").touched&&((c=r.reminderForm.get("subject"))==null?null:c.hasError("required"))),i(4),u(" ",p(26,24,"MESSAGE"),""),i(3),s("ngIf",r.reminderForm.get("message").touched&&r.reminderForm.get("message").hasError("required")),i(4),u(" ",p(33,26,"REPEATE_REMINDER")," "),i(4),g(p(37,28,"SEND_EMAIL")),i(3),D("placeholder",p(40,30,"SELECT_USERS")),s("multiple",!0),i(2),s("ngForOf",r.users),i(),s("ngIf",r.reminderForm.get("isRepeated").value),i(),s("ngIf",r.reminderForm.get("isRepeated").value),i(2),s("ngIf",!r.reminderForm.get("isRepeated").value),i(),s("ngIf",r.reminderForm.get("isRepeated").value),i(),s("ngIf",r.reminderForm.get("isRepeated").value),i(4),u(" ",p(52,32,"SAVE")," "),i(2),s("routerLink",I(36,ni)),i(2),u(" ",p(56,34,"CANCEL")," ")}},dependencies:[$,Ie,qe,Ue,Qe,P,Ve,z,we,W,Le,Oe,Be,ke,At,ee,re,Nt,qt,Bt,Ot,kt,me,oe,X]})}}return t})();var Ni=()=>["action-search","date-search","enddate-search","subject-search","message-search","frequency-search","document-search"],qi=()=>["/reminders/add"],Li=()=>["REMINDER_EDIT_REMINDER","REMINDER_DELETE_REMINDER"],Bi=t=>["/reminders/manage",t],ki=()=>[10,20,30];function Oi(t,m){t&1&&(a(0,"button",42),h(1,"i-feather",43),a(2,"span",44),l(3),d(4,"translate"),n()()),t&2&&(s("routerLink",I(4,qi)),i(3),u(" ",p(4,2,"ADD_REMINDER"),""))}function Vi(t,m){t&1&&h(0,"th",45)}function Ui(t,m){if(t&1&&(a(0,"button",50)(1,"mat-icon"),l(2,"more_vert"),n()()),t&2){_();let e=M(3);s("matMenuTriggerFor",e)}}function Qi(t,m){if(t&1&&(a(0,"button",51)(1,"mat-icon"),l(2,"edit"),n(),a(3,"span"),l(4),d(5,"translate"),n()()),t&2){let e=_().$implicit;s("routerLink",Fe(4,Bi,e.id)),i(4),g(p(5,2,"EDIT"))}}function ji(t,m){if(t&1){let e=S();a(0,"button",52),x("click",function(){E(e);let r=_().$implicit,c=_();return C(c.deleteReminder(r))}),a(1,"mat-icon"),l(2,"delete"),n(),a(3,"span"),l(4),d(5,"translate"),n()()}t&2&&(i(4),g(p(5,1,"DELETE")))}function Yi(t,m){t&1&&(a(0,"td",46),f(1,Ui,3,1,"button",47),a(2,"mat-menu",null,0),f(4,Qi,6,6,"button",48)(5,ji,6,3,"button",49),n()()),t&2&&(i(),s("hasClaim",I(3,Li)),i(3),s("hasClaim","REMINDER_EDIT_REMINDER"),i(),s("hasClaim","REMINDER_DELETE_REMINDER"))}function $i(t,m){t&1&&(a(0,"th",53),l(1),d(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"START_DATE")," "))}function Hi(t,m){if(t&1&&(a(0,"td",46),l(1),d(2,"utcToLocalTime"),n()),t&2){let e=m.$implicit;i(),u(" ",q(2,1,e.startDate,"short")," ")}}function Gi(t,m){t&1&&(a(0,"th",53),l(1),d(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"END_DATE")," "))}function Wi(t,m){if(t&1&&(a(0,"td",46),l(1),d(2,"utcToLocalTime"),n()),t&2){let e=m.$implicit;i(),u(" ",q(2,1,e.endDate,"short")," ")}}function Pi(t,m){t&1&&(a(0,"th",53),l(1),d(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"SUBJECT")," "))}function zi(t,m){if(t&1&&(a(0,"td",46),l(1),d(2,"limitTo"),n()),t&2){let e=m.$implicit;i(),u(" ",q(2,1,e.subject,"100")," ")}}function Ji(t,m){t&1&&(a(0,"th",53),l(1),d(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"MESSAGE")," "))}function Ki(t,m){if(t&1&&(a(0,"td",46),l(1),d(2,"limitTo"),n()),t&2){let e=m.$implicit;i(),u(" ",q(2,1,e.message,"150")," ")}}function Xi(t,m){t&1&&(a(0,"th",45),l(1),d(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"FREQUENCY")," "))}function Zi(t,m){if(t&1&&(a(0,"td",46),l(1),d(2,"frequency"),d(3,"translate"),n()),t&2){let e=m.$implicit;i(),u(" ",p(3,3,p(2,1,e.frequency))," ")}}function er(t,m){t&1&&(a(0,"th",53),l(1),d(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"DOCUMENT")," "))}function tr(t,m){if(t&1&&(a(0,"td",46),l(1),n()),t&2){let e=m.$implicit;i(),u(" ",e.documentName," ")}}function ir(t,m){t&1&&h(0,"th",45)}function rr(t,m){t&1&&h(0,"th",45)}function nr(t,m){t&1&&h(0,"th",45)}function ar(t,m){if(t&1){let e=S();a(0,"th",45)(1,"input",54),d(2,"translate"),Y("ngModelChange",function(r){E(e);let c=_();return j(c.SubjectFilter,r)||(c.SubjectFilter=r),C(r)}),n()()}if(t&2){let e=_();i(),D("placeholder",p(2,2,"SUBJECT")),Q("ngModel",e.SubjectFilter)}}function or(t,m){if(t&1){let e=S();a(0,"th",45)(1,"input",55),d(2,"translate"),Y("ngModelChange",function(r){E(e);let c=_();return j(c.MessageFilter,r)||(c.MessageFilter=r),C(r)}),n()()}if(t&2){let e=_();i(),D("placeholder",p(2,2,"MESSAGE")),Q("ngModel",e.MessageFilter)}}function mr(t,m){if(t&1&&(a(0,"ng-option",57),l(1),d(2,"translate"),n()),t&2){let e=m.$implicit;s("value",e==null?null:e.id),i(),u(" ",p(2,2,e==null?null:e.name.toUpperCase())," ")}}function dr(t,m){if(t&1){let e=S();a(0,"th",45)(1,"ng-select",56),d(2,"translate"),Y("ngModelChange",function(r){E(e);let c=_();return j(c.FrequencyFilter,r)||(c.FrequencyFilter=r),C(r)}),a(3,"ng-option",57),l(4),d(5,"translate"),n(),f(6,mr,3,4,"ng-option",58),n()()}if(t&2){let e=_();i(),D("placeholder",p(2,4,"FREQUENCY")),Q("ngModel",e.FrequencyFilter),i(3),u(" ",p(5,6,"NONE"),""),i(2),s("ngForOf",e.reminderFrequencies)}}function lr(t,m){t&1&&h(0,"th",45)}function sr(t,m){if(t&1&&(a(0,"td",59),h(1,"mat-paginator",60),n()),t&2){let e=_();i(),s("length",e.reminderResource.totalCount)("pageSize",e.reminderResource.pageSize)("pageSizeOptions",I(3,ki))}}function pr(t,m){t&1&&(a(0,"tr")(1,"td",61)(2,"div",62)(3,"b"),l(4),d(5,"translate"),n()()()()),t&2&&(i(4),u(" ",p(5,1,"NO_DATA_FOUND"),""))}function cr(t,m){t&1&&h(0,"tr",63)}function ur(t,m){t&1&&h(0,"tr",64)}function fr(t,m){t&1&&h(0,"tr",63)}function _r(t,m){t&1&&h(0,"tr",65)}var Gt=(()=>{class t extends J{get SubjectFilter(){return this._subjectFilter}set SubjectFilter(e){this._subjectFilter=e;let o=`subject:${e}`;this.filterObservable$.next(o)}set FrequencyFilter(e){e=="0"?this._frequencyFilter="0":this._frequencyFilter=e?e.toString():"";let o=`frequency:${this._frequencyFilter}`;this.filterObservable$.next(o)}get FrequencyFilter(){return this.reminderFrequencies.find(e=>e.id?.toString()==this._frequencyFilter)?.name}get MessageFilter(){return this._messageFilter}set MessageFilter(e){this._messageFilter=e;let o=`message:${e}`;this.filterObservable$.next(o)}constructor(e,o,r,c,N,se){super(),this.reminderService=e,this.dialog=o,this.commonService=r,this.commonDialogService=c,this.toastrService=N,this.translationService=se,this.reminders=[],this.reminderFrequencies=[],this.displayedColumns=["action","startDate","endDate","subject","message","frequency","documentName"],this.footerToDisplayed=["footer"],this.filterObservable$=new ve,this.reminderResource=new jt,this.reminderResource.pageSize=10,this.reminderResource.orderBy="startDate desc"}ngOnInit(){this.getReminderFrequency(),this.dataSource=new Yt(this.reminderService),this.dataSource.loadData(this.reminderResource),this.getResourceParameter(),this.sub$.sink=this.filterObservable$.pipe(Ee(1e3),xe()).subscribe(e=>{this.reminderResource.skip=0;let o=e.split(":");o[0]==="subject"?this.reminderResource.subject=o[1]:o[0]==="message"?this.reminderResource.message=o[1]:o[0]==="frequency"&&(this.reminderResource.frequency=o[1]),this.paginator.pageIndex=0,this.reminderResource.skip=0,this.dataSource.loadData(this.reminderResource)})}ngAfterViewInit(){this.sub$.sink=this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=ye(this.sort.sortChange,this.paginator.page).pipe(Se(()=>{this.reminderResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.reminderResource.pageSize=this.paginator.pageSize,this.reminderResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadData(this.reminderResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(e=>{e&&(this.reminderResource.pageSize=e.pageSize,this.reminderResource.skip=e.skip,this.reminderResource.totalCount=e.totalCount)})}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(e=>this.reminderFrequencies=[...e])}editReminder(e){this.sub$.sink=this.commonService.getReminder(e.id).subscribe(o=>{let r=this.dialog.open(B,{width:"60vw",data:Object.assign({},{frequencies:this.reminderFrequencies,reminder:o})});this.sub$.sink=r.afterClosed().subscribe(c=>{c&&this.dataSource.loadData(this.reminderResource)})})}deleteReminder(e){this.sub$.sink=this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(o=>{o&&this.reminderService.deleteReminder(e.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("REMINDER_DELETED_SUCCESSFULLY")),this.dataSource.loadData(this.reminderResource)})})}static{this.\u0275fac=function(o){return new(o||t)(y(ae),y(be),y(w),y(Tt),y(K),y(Z))}}static{this.\u0275cmp=O({type:t,selectors:[["app-reminder-list"]],viewQuery:function(o,r){if(o&1&&(ce(ie,5),ce(te,5)),o&2){let c;ue(c=fe())&&(r.paginator=c.first),ue(c=fe())&&(r.sort=c.first)}},features:[U],decls:62,vars:11,consts:[["menu","matMenu"],[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row","align-items-center"],[1,"col"],[1,"page-title"],["code","REMINDERS"],[1,"col-auto"],[1,"breadcrumb-list"],[1,"breadcrumb-item","bcrumb-1"],["class","btn btn-success btn-sm",3,"routerLink",4,"hasClaim"],[1,"row"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body","table-responsive"],[1,"grid-height-medium"],["mat-table","","matSort","","matSortActive","startDate","matSortDirection","desc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","startDate"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","endDate"],["matColumnDef","subject"],["matColumnDef","message"],["matColumnDef","frequency"],["matColumnDef","documentName"],["matColumnDef","action-search"],["matColumnDef","date-search"],["matColumnDef","enddate-search"],["matColumnDef","subject-search"],["matColumnDef","message-search"],["matColumnDef","frequency-search"],["matColumnDef","document-search"],["matColumnDef","footer"],["mat-footer-cell","","colspan","7",4,"matFooterCellDef"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[1,"btn","btn-success","btn-sm",3,"routerLink"],["name","Plus",1,"btn-success","small-icon"],[1,"d-none","d-sm-inline"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor",4,"hasClaim"],["mat-menu-item","",3,"routerLink",4,"hasClaim"],["mat-menu-item","",3,"click",4,"hasClaim"],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header",""],["type","text",1,"form-control","w-90",3,"ngModelChange","placeholder","ngModel"],["type","text",1,"form-control","w-90","ml-2",3,"ngModelChange","placeholder","ngModel"],["appendTo","body",1,"ml-3","mdc-menu-surface-open",3,"ngModelChange","placeholder","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["mat-footer-cell","","colspan","7"],[3,"length","pageSize","pageSizeOptions"],["colspan","7"],[1,"pt-2","pl-2"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(o,r){o&1&&(a(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"span",7),l(7),d(8,"translate"),h(9,"app-page-help-text",8),n()(),a(10,"div",9)(11,"ul",10)(12,"li",11),f(13,Oi,5,5,"button",12),n()()()()()(),a(14,"div",13)(15,"div",14)(16,"div",15)(17,"div",16)(18,"div",17)(19,"table",18),v(20,19),f(21,Vi,1,0,"th",20)(22,Yi,6,4,"td",21),R(),v(23,22),f(24,$i,3,3,"th",23)(25,Hi,3,4,"td",21),R(),v(26,24),f(27,Gi,3,3,"th",23)(28,Wi,3,4,"td",21),R(),v(29,25),f(30,Pi,3,3,"th",23)(31,zi,3,4,"td",21),R(),v(32,26),f(33,Ji,3,3,"th",23)(34,Ki,3,4,"td",21),R(),v(35,27),f(36,Xi,3,3,"th",20)(37,Zi,4,5,"td",21),R(),v(38,28),f(39,er,3,3,"th",23)(40,tr,2,1,"td",21),R(),v(41,29),f(42,ir,1,0,"th",20),R(),v(43,30),f(44,rr,1,0,"th",20),R(),v(45,31),f(46,nr,1,0,"th",20),R(),v(47,32),f(48,ar,3,4,"th",20),R(),v(49,33),f(50,or,3,4,"th",20),R(),v(51,34),f(52,dr,7,8,"th",20),R(),v(53,35),f(54,lr,1,0,"th",20),R(),v(55,36),f(56,sr,2,4,"td",37),R(),f(57,pr,6,3,"tr",38)(58,cr,1,0,"tr",39)(59,ur,1,0,"tr",40)(60,fr,1,0,"tr",39)(61,_r,1,0,"tr",41),n()()()()()()()()),o&2&&(i(7),u("",p(8,8,"REMINDERS")," "),i(6),s("hasClaim","REMINDER_CREATE_REMINDER"),i(6),s("dataSource",r.dataSource),i(39),s("matHeaderRowDef",r.displayedColumns),i(),s("matRowDefColumns",r.displayedColumns),i(),s("matHeaderRowDef",I(10,Ni)),i(),s("matFooterRowDef",r.footerToDisplayed)("matFooterRowDefSticky",!0))},dependencies:[$,P,z,Ne,W,Xe,Je,tt,et,it,mt,lt,_t,pt,dt,vt,st,ht,ct,ft,ut,Rt,yt,gt,Et,te,xt,ie,ee,He,re,me,oe,X,Ge,We,Pe]})}}return t})();var le=(()=>{class t{constructor(e,o){this.cs=e,this.router=o}resolve(e,o){let r=e.paramMap.get("id");return r==="add"?null:this.cs.getReminder(r).pipe(Ce(1),ge(c=>c?Re(c):(this.router.navigate(["/reminders"]),null)))}static{this.\u0275fac=function(o){return new(o||t)(pe(w),pe(G))}}static{this.\u0275prov=De({token:t,factory:t.\u0275fac})}}return t})();var hr=[{path:"",component:Gt,data:{claimType:"REMINDER_VIEW_REMINDERS"},canActivate:[ne]},{path:"add",component:B,data:{claimType:"REMINDER_CREATE_REMINDER"},canActivate:[ne]},{path:"manage/:id",resolve:{reminder:le},component:B,data:{claimType:"REMINDER_EDIT_REMINDER"},canActivate:[ne]}],Wt=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=V({type:t})}static{this.\u0275inj=k({imports:[H,_e.forChild(hr),_e]})}}return t})();var An=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=V({type:t})}static{this.\u0275inj=k({providers:[le],imports:[H,Ye,Wt,$e,wt,Me,ot,Ft,rt,Ze,It,Dt,St,at,Ct,nt,Lt,Ke,ze,Vt,Ut,Qt]})}}return t})();export{An as ReminderModule};
