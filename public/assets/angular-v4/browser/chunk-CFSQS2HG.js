import{a as zi,b as ut,c as Xi}from"./chunk-FZPT5RJC.js";import"./chunk-NHJQYGB7.js";import{a as rt,b as at,c as st,d as dt,e as ji,f as qi,g as Wi,h as Qi}from"./chunk-NR2EX3RM.js";import"./chunk-GAXRZ4S7.js";import{c as $i,d as mt,e as ct}from"./chunk-KKMMKVFL.js";import"./chunk-MS6J53NI.js";import{a as pt}from"./chunk-XALYLCQ4.js";import{b as Hi}from"./chunk-5ETFIZHZ.js";import{a as Ri}from"./chunk-5DGY2OXT.js";import{a as Ii}from"./chunk-VBYTSXUA.js";import{a as Ni}from"./chunk-4JQNLXHD.js";import"./chunk-EDFYBFRY.js";import{a as Gi,b as Yi}from"./chunk-HCZMPLJU.js";import"./chunk-BPDXJVZ2.js";import{a as O,b as De,c as W,d as wi,e as Ai,f as Vi,g as ki,h as Li}from"./chunk-XCK6F3VT.js";import{a as Ui}from"./chunk-SRO5SYC3.js";import{a as lt}from"./chunk-I3ONU5H4.js";import"./chunk-34Z7KJYM.js";import{a as oe,b as re,c as ae,d as Fi,e as Oi}from"./chunk-DL7A26HC.js";import{a as q,b as Mi}from"./chunk-3NG6G7DU.js";import{b as nt}from"./chunk-6RIQ7ZPY.js";import{b as it}from"./chunk-6KAN7QFK.js";import{a as Bi,b as ot}from"./chunk-I5DMEMR4.js";import"./chunk-DDGV2SYP.js";import"./chunk-4PLUQBVO.js";import{a as me,b as le,c as Pi}from"./chunk-WGGER5HX.js";import{a as tt}from"./chunk-DL4SMTXP.js";import"./chunk-V4GBUP5U.js";import{C as hi,E as fi,H as He,I as Ge,J as je,K as gi,L as Ye,M as qe,N as Ci,O as We,P as Qe,Q as Di,R as ze,S as Xe,T as vi,U as Ke,V as Je,W as xi,Y as ie,Z as Si,_ as Ei,ba as Ze,c as Z,ca as bi,ea as et,f as Oe,g as ci,h as si,ha as Y,j as ee,ja as yi,k as pi,n as Ue,o as Pe,p as $e,q as ui,w as _i}from"./chunk-H5SZDBVN.js";import{b as V,c as ke,d as Fe,e as ne,h as Ti}from"./chunk-XE6VZSAJ.js";import{a as j}from"./chunk-KX634QZQ.js";import{C as qt,D as Wt,F as X,G as Qt,H as zt,J as Xt,L,f as Ie}from"./chunk-3O3IKF6A.js";import{ia as k,ja as F,la as Be,ma as te,na as di}from"./chunk-TR4MAYT5.js";import{p as H,t as G}from"./chunk-AWIVOLPG.js";import{a as li}from"./chunk-J2LIJEQH.js";import{c as Le}from"./chunk-AGIEFCW2.js";import"./chunk-F5F27R7A.js";import{B as Ve,D as mi,c as P,e as w,h as $,i as K,k as Jt,l as Zt,m as Ce,n as ei,o as J,p as ti,q as ii,r as we,s as Ae,t as Ne,u as Me,v as ni,w as oi,x as ri,y as ai}from"./chunk-6EN4EXPL.js";import{$ as xe,$a as Lt,$b as u,Ac as $t,B as Nt,Ca as Ee,Cb as h,Fa as B,Fc as p,Gb as s,Gc as d,Hc as ge,Ka as N,La as be,Mb as Te,Md as Kt,N as vt,Nd as Re,Pc as Ht,Pd as xt,Q as Mt,Qb as r,Rb as o,Sb as v,Ta as g,Tb as E,Ua as C,Ub as b,W as Vt,Wb as D,Zb as f,a as At,bd as Gt,cc as I,cd as Q,dd as U,fa as Se,fc as de,gc as ue,ha as kt,hc as _e,hd as z,kc as R,mc as l,md as jt,nc as T,ob as i,oc as _,p as ve,pb as y,pc as he,pd as Yt,qc as Ft,sc as Ot,tc as Bt,uc as Ut,ud as ye,wa as pe,wc as Pt,yc as fe,zb as M,zc as A}from"./chunk-SXJN2XK6.js";function pn(t,m){t&1&&(r(0,"div",34),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"SUBJECT_IS_REQUIRED")," "))}function dn(t,m){t&1&&(r(0,"div",34),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"MESSAGE_IS_REQUIRED")," "))}function un(t,m){if(t&1&&(r(0,"ng-option",35),l(1),o()),t&2){let e=m.$implicit;s("value",e),i(),he(" ",e.firstName," ",e.lastName," ")}}function _n(t,m){if(t&1&&(r(0,"option",35),l(1),p(2,"translate"),o()),t&2){let e=m.$implicit;s("value",e==null?null:e.id),i(),_(" ",d(2,2,e==null?null:e.name.toUpperCase())," ")}}function hn(t,m){t&1&&(r(0,"div",34),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"FREQUENCY_IS_REQUIRED")," "))}function fn(t,m){if(t&1){let e=D();r(0,"div",10)(1,"div",36)(2,"label",37),l(3),p(4,"translate"),o(),r(5,"select",38),f("change",function(){g(e);let n=u();return C(n.onFrequencyChange())}),r(6,"option",39),l(7),p(8,"translate"),o(),h(9,_n,3,4,"option",24),o(),h(10,hn,3,3,"div",15),o()()}if(t&2){let e=u();i(3),_(" ",d(4,4,"FREQUENCY"),""),i(4),T(d(8,6,"NONE")),i(2),s("ngForOf",e.reminderFrequencies),i(),s("ngIf",e.reminderForm.get("frequency").hasError("required"))}}function gn(t,m){if(t&1&&(r(0,"div",45),E(1,46),r(2,"mat-checkbox",47),l(3),p(4,"translate"),o(),b(),o()),t&2){let e=m.$implicit,a=m.index;i(),s("formGroupName",a),i(2),_(" ",d(4,2,e.get("name").value.toUpperCase())," ")}}function Cn(t,m){if(t&1&&(r(0,"div")(1,"label",42),l(2),p(3,"translate"),o(),r(4,"div",43),h(5,gn,5,4,"div",44),o()()),t&2){let e=u(2);i(2),T(d(3,2,"WEEK_DAYS")),i(3),s("ngForOf",e.dailyRemindersArray.controls)}}function Dn(t,m){if(t&1&&(r(0,"mat-radio-button",52),l(1),p(2,"translate"),o()),t&2){let e=m.$implicit;s("value",e.id),i(),_(" ",d(2,2,e.name),"")}}function vn(t,m){if(t&1&&(r(0,"div")(1,"label",48),l(2),p(3,"translate"),o(),r(4,"div",49)(5,"mat-radio-group",50),h(6,Dn,3,4,"mat-radio-button",51),o()()()),t&2){let e=u(2);i(2),T(d(3,2,"WEEK_DAYS")),i(4),s("ngForOf",e.dayOfWeek)}}function xn(t,m){if(t&1&&(r(0,"option",35),l(1),p(2,"translate"),o()),t&2){let e=m.$implicit;s("value",e.id),i(),_(" ",d(2,2,e.name)," ")}}function Sn(t,m){if(t&1&&(r(0,"option",35),l(1),o()),t&2){let e=m.$implicit;s("value",e),i(),_(" ",e," ")}}function En(t,m){t&1&&(r(0,"div")(1,"div",34),l(2),p(3,"translate"),o()()),t&2&&(i(2),_(" ",d(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function bn(t,m){if(t&1){let e=D();r(0,"tr"),E(1,46),r(2,"td"),l(3),p(4,"translate"),o(),r(5,"td")(6,"select",58),f("change",function(){let n=g(e).$implicit,c=u(3);return C(c.onDateChange(n))}),h(7,xn,3,4,"option",24),o()(),r(8,"td")(9,"select",59),f("change",function(){let n=g(e).$implicit,c=u(3);return C(c.onDateChange(n))}),h(10,Sn,2,2,"option",24),o(),h(11,En,4,3,"div",41),o(),b(),o()}if(t&2){let e=m.$implicit,a=m.index,n=u(3);i(),s("formGroupName",a),i(2),T(d(4,5,e.get("name").value)),i(4),s("ngForOf",e.get("monthValues").value),i(3),s("ngForOf",n.days),i(),s("ngIf",e.get("day").touched&&e.hasError("invalidDate"))}}function Tn(t,m){if(t&1&&(r(0,"div")(1,"label",53),l(2),p(3,"translate"),o(),r(4,"div",54)(5,"table",55)(6,"thead")(7,"tr"),v(8,"th"),r(9,"th"),l(10),p(11,"translate"),o(),r(12,"th"),l(13),p(14,"translate"),o()()(),r(15,"tbody",56),h(16,bn,12,7,"tr",57),o()()()()),t&2){let e=u(2);i(2),T(d(3,4,"SELECT_QUARTER_DATE")),i(8),T(d(11,6,"SELECT_REMINDER_MONTH")),i(3),T(d(14,8,"SELECT_REMINDER_DAY")),i(3),s("ngForOf",e.quarterlyRemindersArray.controls)}}function yn(t,m){if(t&1&&(r(0,"option",35),l(1),p(2,"translate"),o()),t&2){let e=m.$implicit;s("value",e.id),i(),_(" ",d(2,2,e.name)," ")}}function In(t,m){if(t&1&&(r(0,"option",35),l(1),o()),t&2){let e=m.$implicit;s("value",e),i(),_(" ",e," ")}}function Rn(t,m){t&1&&(r(0,"div")(1,"div",34),l(2),p(3,"translate"),o()()),t&2&&(i(2),_(" ",d(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function wn(t,m){if(t&1){let e=D();r(0,"tr"),E(1,46),r(2,"td"),l(3),p(4,"translate"),o(),r(5,"td")(6,"select",58),f("change",function(){let n=g(e).$implicit,c=u(3);return C(c.onDateChange(n))}),h(7,yn,3,4,"option",24),o()(),r(8,"td")(9,"select",59),f("change",function(){let n=g(e).$implicit,c=u(3);return C(c.onDateChange(n))}),h(10,In,2,2,"option",24),o(),h(11,Rn,4,3,"div",41),o(),b(),o()}if(t&2){let e=m.$implicit,a=m.index,n=u(3);i(),s("formGroupName",a),i(2),T(d(4,5,e.get("name").value)),i(4),s("ngForOf",e.get("monthValues").value),i(3),s("ngForOf",n.days),i(),s("ngIf",e.get("day").touched&&e.hasError("invalidDate"))}}function An(t,m){if(t&1&&(r(0,"div")(1,"label",60),l(2),p(3,"translate"),o(),r(4,"div",61)(5,"table",55)(6,"thead")(7,"tr"),v(8,"th"),r(9,"th"),l(10),p(11,"translate"),o(),r(12,"th"),l(13),p(14,"translate"),o()()(),r(15,"tbody",62),h(16,wn,12,7,"tr",57),o()()()()),t&2){let e=u(2);i(2),T(d(3,4,"SELECT_DATE")),i(8),T(d(11,6,"SELECT_REMINDER_MONTH")),i(3),T(d(14,8,"SELECT_REMINDER_DAY")),i(3),s("ngForOf",e.halfYearlyRemindersArray.controls)}}function Nn(t,m){if(t&1&&(r(0,"div",10)(1,"div",40),h(2,Cn,6,4,"div",41)(3,vn,7,4,"div",41)(4,Tn,17,10,"div",41)(5,An,17,10,"div",41),o()()),t&2){let e=u();i(2),s("ngIf",e.reminderForm.get("frequency").value==="0"),i(),s("ngIf",e.reminderForm.get("frequency").value==="1"),i(),s("ngIf",e.reminderForm.get("frequency").value==="3"),i(),s("ngIf",e.reminderForm.get("frequency").value==="4")}}function Mn(t,m){t&1&&(r(0,"div",34),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"DATE_IS_REQUIRED")," "))}function Vn(t,m){t&1&&(r(0,"div",34),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function kn(t,m){if(t&1&&(r(0,"div",19)(1,"label",37),l(2),p(3,"translate"),o(),v(4,"input",63),p(5,"translate"),h(6,Mn,3,3,"div",15)(7,Vn,3,3,"div",15),v(8,"owl-date-time",null,0),o()),t&2){let e,a=R(9),n=u();i(2),_(" ",d(3,7,"REMINDER_DATE"),""),i(2),I("placeholder",d(5,9,"DATE")),s("owlDateTimeTrigger",a)("min",n.minDate)("owlDateTime",a),i(2),s("ngIf",n.reminderForm.get("startDate").touched&&((e=n.reminderForm.get("startDate").errors)==null?null:e.required)),i(),s("ngIf",n.reminderForm.get("startDate").touched&&n.reminderForm.get("startDate").hasError("owlDateTimeMin"))}}function Ln(t,m){t&1&&(r(0,"div",34),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"START_DATE_IS_REQUIRED")," "))}function Fn(t,m){t&1&&(r(0,"div",34),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function On(t,m){if(t&1&&(r(0,"div",36)(1,"label",37),l(2),p(3,"translate"),o(),v(4,"input",63),p(5,"translate"),h(6,Ln,3,3,"div",15)(7,Fn,3,3,"div",15),v(8,"owl-date-time",null,1),o()),t&2){let e=R(9),a=u();i(2),_(" ",d(3,7,"REMINDER_START_DATE"),""),i(2),I("placeholder",d(5,9,"START_DATE")),s("owlDateTimeTrigger",e)("min",a.minDate)("owlDateTime",e),i(2),s("ngIf",a.reminderForm.get("startDate").touched&&a.reminderForm.get("startDate").hasError("required")),i(),s("ngIf",a.reminderForm.get("startDate").touched&&a.reminderForm.get("startDate").hasError("owlDateTimeMin"))}}function Bn(t,m){if(t&1&&(r(0,"div",36)(1,"label",37),l(2),p(3,"translate"),o(),v(4,"input",64),p(5,"translate"),v(6,"owl-date-time",null,2),o()),t&2){let e=R(7);i(2),T(d(3,4,"REMINDER_END_DATE")),i(2),I("placeholder",d(5,6,"END_DATE")),s("owlDateTimeTrigger",e)("owlDateTime",e)}}var ft=(()=>{class t extends k{get dailyRemindersArray(){return this.reminderForm.get("dailyReminders")}get quarterlyRemindersArray(){return this.reminderForm.get("quarterlyReminders")}get halfYearlyRemindersArray(){return this.reminderForm.get("halfYearlyReminders")}constructor(e,a,n,c,x,S,se){super(),this.fb=e,this.reminderService=a,this.commonService=n,this.toastrService=c,this.data=x,this.dialogRef=S,this.translationService=se,this.reminderFrequencies=[],this.minDate=new Date,this.users=[],this.showSpinners=!0,this.showSeconds=!1,this.touchUi=!1,this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.dayOfWeek=wi,this.months=Ai,this.days=[]}ngOnInit(){for(let e=1;e<=31;e++)this.days.push(e);this.getReminderFrequency(),this.createReminderForm(),this.getUsers()}closeDialog(){this.dialogRef.close()}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(e=>this.reminderFrequencies=[...e])}createReminderForm(){let e=new Date;this.reminderForm=this.fb.group({id:[""],subject:["",[w.required]],message:["",[w.required]],frequency:[""],isRepeated:[!1],isEmailNotification:[!1],startDate:[e,[w.required]],endDate:[null],dayOfWeek:[new Date().getDay()],documentId:[this.data.id],selectedUsers:[]})}checkData(e){e.checked?this.reminderForm.get("frequency").setValidators([w.required]):(this.reminderForm.get("frequency").setValidators([]),this.reminderForm.get("frequency").updateValueAndValidity()),this.reminderForm.markAllAsTouched()}createReminder(){if(!this.reminderForm.valid){this.reminderForm.markAllAsTouched();return}let e=this.reminderForm.value,a=this.reminderForm.get("selectedUsers").value??[];e.reminderUsers=a?.map(n=>({reminderId:e.id,userId:n.id})),e.isRepeated||(e.dailyReminders=[],e.quarterlyReminders=[],e.halfYearlyReminders=[]),this.reminder?(e.dailyReminders&&(e.dailyReminders=e.dailyReminders.map(n=>(n.reminderId=this.reminder.id,n))),e.quarterlyReminders&&(e.quarterlyReminders=e.quarterlyReminders.map(n=>(n.reminderId=this.reminder.id,n))),e.halfYearlyReminders&&(e.halfYearlyReminders=e.halfYearlyReminders.map(n=>(n.reminderId=this.reminder.id,n))),this.sub$.sink=this.reminderService.updateReminder(e).subscribe(()=>{this.toastrService.success(this.translationService.getValue("REMINDER_UPDATED_SUCCESSFULLY")),this.dialogRef.close()})):this.sub$.sink=this.reminderService.addDocumentReminder(e).subscribe(()=>{this.toastrService.success(this.translationService.getValue("REMINDER_CREATED_SUCCESSFULLY")),this.dialogRef.close()})}getUsers(){this.sub$.sink=this.commonService.getUsersForDropdown().subscribe(e=>{if(this.users=e,this.reminder){let a=this.reminder.reminderUsers.map(c=>c.userId),n=this.users.filter(c=>a.indexOf(c.id)>=0);this.reminderForm.get("selectedUsers").setValue(n)}})}onFrequencyChange(){let e=this.reminderForm.get("frequency").value;e=e==0?"0":e,e==De.Daily.toString()?(this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.addDailReminders(),this.reminderForm.get("dayOfWeek").setValue("")):e==De.Weekly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(new Date().getDay())):e==De.Quarterly.toString()?(this.removeDailReminders(),this.removeHalfYearlyReminders(),this.addQuarterlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):e==De.HalfYearly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.addHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(""))}addDailReminders(){if(!this.reminderForm.contains("dailyReminders")){let e=this.fb.array([]);e.push(this.createDailyReminderFormGroup(O.Sunday)),e.push(this.createDailyReminderFormGroup(O.Monday)),e.push(this.createDailyReminderFormGroup(O.Tuesday)),e.push(this.createDailyReminderFormGroup(O.Wednesday)),e.push(this.createDailyReminderFormGroup(O.Thursday)),e.push(this.createDailyReminderFormGroup(O.Friday)),e.push(this.createDailyReminderFormGroup(O.Saturday)),this.reminderForm.addControl("dailyReminders",e)}}addQuarterlyReminders(){if(!this.reminderForm.contains("quarterlyReminders")){let e=this.fb.array([]),a=this.months.filter(S=>[1,2,3].indexOf(S.id)>=0),n=this.months.filter(S=>[4,5,6].indexOf(S.id)>=0),c=this.months.filter(S=>[7,8,9].indexOf(S.id)>=0),x=this.months.filter(S=>[10,11,12].indexOf(S.id)>=0);e.push(this.createQuarterlyReminderFormGroup(W.Quarter1,"JAN_MAR",a)),e.push(this.createQuarterlyReminderFormGroup(W.Quarter2,"APR_JUN",n)),e.push(this.createQuarterlyReminderFormGroup(W.Quarter3,"JUL_SEPT",c)),e.push(this.createQuarterlyReminderFormGroup(W.Quarter4,"OCT_DEC",x)),this.reminderForm.addControl("quarterlyReminders",e)}}addHalfYearlyReminders(){if(!this.reminderForm.contains("halfYearlyReminders")){let e=this.fb.array([]),a=this.months.filter(c=>[1,2,3,4,5,6].indexOf(c.id)>=0),n=this.months.filter(c=>[7,8,9,10,11,12].indexOf(c.id)>=0);e.push(this.createHalfYearlyReminderFormGroup(W.Quarter1,"JAN_JUN",a)),e.push(this.createHalfYearlyReminderFormGroup(W.Quarter2,"JUL_DEC",n)),this.reminderForm.addControl("halfYearlyReminders",e)}}removeDailReminders(){this.reminderForm.contains("dailyReminders")&&this.reminderForm.removeControl("dailyReminders")}removeQuarterlyReminders(){this.reminderForm.contains("quarterlyReminders")&&this.reminderForm.removeControl("quarterlyReminders")}removeHalfYearlyReminders(){this.reminderForm.contains("halfYearlyReminders")&&this.reminderForm.removeControl("halfYearlyReminders")}createDailyReminderFormGroup(e){return this.fb.group({id:[""],reminderId:[""],dayOfWeek:[e],isActive:[!0],name:[O[e]]})}createQuarterlyReminderFormGroup(e,a,n){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[this.getCurrentDay()],month:[n[0].id],name:[a],monthValues:[n]})}createHalfYearlyReminderFormGroup(e,a,n){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[this.getCurrentDay()],month:[n[0].id],name:[a],monthValues:[n]})}getCurrentDay(){return new Date().getDate()}onDateChange(e){let a=e.get("day").value,n=e.get("month").value,c=new Date(new Date().getFullYear(),Number.parseInt(n),0).getDate();a>c&&(e.setErrors({invalidDate:"Invalid Date"}),e.markAllAsTouched())}onCancel(){this.dialogRef.close()}static{this.\u0275fac=function(a){return new(a||t)(y(Ve),y(Ni),y(L),y(H),y(Wt),y(qt),y(F))}}static{this.\u0275cmp=N({type:t,selectors:[["app-document-reminder"]],features:[M],decls:54,vars:36,consts:[["dt2",""],["dt3",""],["dt4",""],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],[3,"code"],["mat-icon-button","",1,"close-button","ms-auto",3,"click"],["color","warn",1,"close-icon"],[3,"formGroup"],["mat-dialog-content",""],[1,"row"],[1,"col-sm-12"],[1,"col-md-12"],["for","subject",1,"form-label"],["formControlName","subject","type","text","id","subject",1,"form-control"],["class","text-danger",4,"ngIf"],["for","message",1,"form-label"],["formControlName","message","id","message","cols","30",1,"form-control"],[1,"row","m-t-10"],[1,"col-md-4"],["color","primary","formControlName","isRepeated",3,"change"],[1,"col-md-2"],["color","primary","formControlName","isEmailNotification"],["formControlName","selectedUsers",3,"placeholder","multiple"],[3,"value",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"row","mt-2"],["class","col-md-4",4,"ngIf"],["class","col-md-6",4,"ngIf"],[1,"m-t-10"],["type","submit",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],["name","save",1,"small-icon"],["type","button",1,"btn","btn-danger","btn-sm","m-r-10",3,"click"],["name","x-circle",1,"small-icon"],[1,"text-danger"],[3,"value"],[1,"col-md-6"],["for","frequency",1,"form-label"],["formControlName","frequency","id","frequency",1,"form-select",3,"change"],["value",""],[1,"col-md-12","m-t-10"],[4,"ngIf"],["for","weekDays",1,"form-label"],["id","weekDays",1,"row"],["class","col-sm-auto mr-1","formArrayName","dailyReminders",4,"ngFor","ngForOf"],["formArrayName","dailyReminders",1,"col-sm-auto","mr-1"],[3,"formGroupName"],["color","primary","formControlName","isActive",1,"mr-1"],["for","weekDay",1,"form-label"],["id","weekDay"],["formControlName","dayOfWeek"],["class","mr-2","color","primary",3,"value",4,"ngFor","ngForOf"],["color","primary",1,"mr-2",3,"value"],["for","Quarterly",1,"form-label"],["id","Quarterly",1,"row"],[1,"table"],["formArrayName","quarterlyReminders"],[4,"ngFor","ngForOf"],["formControlName","month",1,"form-select",3,"change"],["formControlName","day",1,"form-select",3,"change"],["for","HalfYearly"],["id","HalfYearly",1,"row"],["formArrayName","halfYearlyReminders"],["formControlName","startDate",1,"form-control",3,"owlDateTimeTrigger","min","owlDateTime","placeholder"],["formControlName","endDate",1,"form-control",3,"owlDateTimeTrigger","owlDateTime","placeholder"]],template:function(a,n){if(a&1&&(r(0,"div",3)(1,"span",4),l(2),p(3,"translate"),v(4,"app-page-help-text",5),o(),r(5,"button",6),f("click",function(){return n.closeDialog()}),r(6,"mat-icon",7),l(7,"close"),o()()(),r(8,"form",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",10)(13,"div",12)(14,"label",13),l(15),p(16,"translate"),o(),v(17,"input",14),h(18,pn,3,3,"div",15),o()(),r(19,"div",10)(20,"div",12)(21,"label",16),l(22),p(23,"translate"),o(),v(24,"textarea",17),h(25,dn,3,3,"div",15),o()(),r(26,"div",18)(27,"div",19)(28,"mat-checkbox",20),f("change",function(x){return n.checkData(x)}),l(29),p(30,"translate"),o()(),r(31,"div",21)(32,"mat-checkbox",22),l(33),p(34,"translate"),o()(),r(35,"div",19)(36,"ng-select",23),p(37,"translate"),h(38,un,2,3,"ng-option",24),o()()(),h(39,fn,11,8,"div",25)(40,Nn,6,4,"div",25),r(41,"div",26),h(42,kn,10,11,"div",27)(43,On,10,11,"div",28)(44,Bn,8,8,"div",28),o()()(),r(45,"div",29)(46,"button",30),f("click",function(){return n.createReminder()}),v(47,"i-feather",31),l(48),p(49,"translate"),o(),r(50,"button",32),f("click",function(){return n.onCancel()}),v(51,"i-feather",33),l(52),p(53,"translate"),o()()()()),a&2){let c;i(2),he(" ",d(3,20,"ADD_REMINDER")," :: ",n.data==null?null:n.data.name," "),i(2),s("code","ADD_REMINDER"),i(4),s("formGroup",n.reminderForm),i(7),_(" ",d(16,22,"SUBJECT"),""),i(3),s("ngIf",n.reminderForm.get("subject").touched&&((c=n.reminderForm.get("subject"))==null?null:c.hasError("required"))),i(4),_(" ",d(23,24,"MESSAGE"),""),i(3),s("ngIf",n.reminderForm.get("message").touched&&n.reminderForm.get("message").hasError("required")),i(4),_(" ",d(30,26,"REPEATE_REMINDER")," "),i(4),_("",d(34,28,"SEND_EMAIL")," "),i(3),I("placeholder",d(37,30,"SELECT_USERS")),s("multiple",!0),i(2),s("ngForOf",n.users),i(),s("ngIf",n.reminderForm.get("isRepeated").value),i(),s("ngIf",n.reminderForm.get("isRepeated").value),i(2),s("ngIf",!n.reminderForm.get("isRepeated").value),i(),s("ngIf",n.reminderForm.get("isRepeated").value),i(),s("ngIf",n.reminderForm.get("isRepeated").value),i(4),_(" ",d(49,32,"SAVE")," "),i(4),_(" ",d(53,34,"CANCEL")," ")}},dependencies:[Q,U,J,oi,ri,P,ni,$,K,we,Me,Ae,Ne,Qt,zt,ee,te,j,Y,q,Vi,ki,oe,ae,re,le,me,G]})}}return t})();var gt=class{get count(){return this._count}get data(){return this._data}set data(m){this._data=m}constructor(m){this.documentService=m,this.documentsSubject=new ve([]),this.responseHeaderSubject=new ve(null),this.loadingSubject=new ve(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this.responseHeaderSubject.asObservable()}connect(m){return this.documentsSubject.asObservable()}disconnect(m){this.documentsSubject.complete(),this.loadingSubject.complete()}loadDocuments(m){this.loadingSubject.next(!0),this.documentService.getDocuments(m).pipe(Vt(()=>Nt([])),kt(()=>this.loadingSubject.next(!1))).subscribe(e=>{let a=new Ri;a.pageSize=parseInt(e.headers.get("pageSize")),a.totalCount=parseInt(e.headers.get("totalCount")),a.skip=parseInt(e.headers.get("skip")),this.responseHeaderSubject.next(At({},a)),this._data=[...e.body];let n=["pdf","doc","docx","xls","xlsx","txt"];this._data.forEach(c=>{c.location=c.location??"local",c.isIndexable=n.includes(c.url.split(".").pop())}),this._count=this._data.length,this.documentsSubject.next(this._data)})}};var qn=["input"],Wn=["metatag"],Qn=()=>["/documents/add"],zn=t=>({"margin-right.px":t}),Xn=t=>({"margin-left.px":t}),rn=t=>({color:t}),Kn=t=>["/document-details",t],Jn=(t,m)=>({"text-success":t,"text-danger":m}),Zn=()=>[10,20,30];function eo(t,m){t&1&&(r(0,"button",57),v(1,"i-feather",58),r(2,"span",59),l(3),p(4,"translate"),o()()),t&2&&(s("routerLink",fe(4,Qn)),i(3),_(" ",d(4,2,"ADD_DOCUMENT"),""))}function to(t,m){if(t&1&&(r(0,"div")(1,"b"),l(2),o()()),t&2){let e=u().$implicit;i(2),_(" ",e.name,"")}}function io(t,m){if(t&1&&(r(0,"div"),l(1),o()),t&2){let e=u().$implicit;i(),_(" ",e.name," ")}}function no(t,m){if(t&1&&(r(0,"ng-option",26)(1,"div",60),h(2,to,3,1,"div",61)(3,io,2,1,"div",61),o()()),t&2){let e=m.$implicit,a=u();s("value",e.id),i(),s("ngStyle",a.direction==="rtl"?A(4,zn,e.deafLevel*20):A(6,Xn,e.deafLevel*20)),i(),s("ngIf",!e.parentId),i(),s("ngIf",e.parentId)}}function oo(t,m){if(t&1&&(r(0,"ng-option",26)(1,"span"),l(2),o()()),t&2){let e=m.$implicit;s("value",e.id),i(2),_(" ",e.companyName," ")}}function ro(t,m){if(t&1&&(r(0,"ng-option",26)(1,"span",62),l(2),o()()),t&2){let e=m.$implicit;s("value",e.id),i(),s("ngStyle",A(3,rn,e==null?null:e.colorCode)),i(),_(" ",e.name," ")}}function ao(t,m){if(t&1){let e=D();E(0),r(1,"mat-checkbox",64),f("change",function(n){g(e);let c=u(2);return C(n?c.masterToggle():null)}),o(),b()}if(t&2){let e=u(2);i(),s("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function mo(t,m){if(t&1){let e=D();r(0,"button",66),f("click",function(){g(e);let n=u(3);return C(n.onSharedSelectDocument())}),r(1,"mat-icon"),l(2,"share"),o()()}}function lo(t,m){t&1&&(E(0),h(1,mo,3,0,"button",65),b()),t&2&&(i(),s("hasClaim","ALL_DOCUMENTS_SHARE_DOCUMENT"))}function co(t,m){if(t&1&&(r(0,"th",63),h(1,ao,2,2,"ng-container",61)(2,lo,2,1,"ng-container",61),o()),t&2){let e=u();i(),s("ngIf",e.selection.isEmpty()),i(),s("ngIf",!e.selection.isEmpty())}}function so(t,m){if(t&1){let e=D();r(0,"td",67)(1,"mat-checkbox",68),f("click",function(n){return g(e),C(n.stopPropagation())})("change",function(n){let c=g(e).$implicit,x=u();return C(n?x.selection.toggle(c):null)}),o()()}if(t&2){let e=m.$implicit,a=u();i(),s("checked",a.selection.isSelected(e))}}function po(t,m){t&1&&(r(0,"th",69),l(1),p(2,"translate"),o()),t&2&&(i(),_("",d(2,1,"ACTION")," "))}function uo(t,m){if(t&1){let e=D();r(0,"button",77),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.editDocument(n))}),r(1,"mat-icon"),l(2,"edit"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"EDIT")," "))}function _o(t,m){if(t&1){let e=D();r(0,"button",78),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.manageDocumentPermission(n))}),r(1,"mat-icon"),l(2,"share"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"SHARE")," "))}function ho(t,m){if(t&1){let e=D();r(0,"button",79),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.onCreateShareableLink(n))}),r(1,"mat-icon"),l(2," link"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"GET_SHAREABLE_LINK")," "))}function fo(t,m){if(t&1){let e=D();r(0,"button",79),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.signDocument(n))}),r(1,"mat-icon"),l(2," draw"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"DOCUMENT_SIGNATURE")," "))}function go(t,m){if(t&1){let e=D();r(0,"button",79),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.generateSummary(n))}),r(1,"mat-icon"),l(2," memory"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"AI_POWERED_SUMMARY")," "))}function Co(t,m){if(t&1){let e=D();r(0,"button",77),f("click",function(){g(e);let n=u(2).$implicit,c=u();return C(c.manageWorkflowInstance(n))}),r(1,"mat-icon"),l(2,"sync_alt"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"START_WORKFLOW")," "))}function Do(t,m){t&1&&(E(0),h(1,Co,5,3,"button",72),b()),t&2&&(i(),s("hasClaim","ALL_DOCUMENTS_START_WORKFLOW"))}function vo(t,m){if(t&1&&(r(0,"button",80)(1,"mat-icon"),l(2,"info"),o(),l(3),p(4,"translate"),o()),t&2){let e=u().$implicit;s("routerLink",A(4,Kn,e.id)),i(3),_(" ",d(4,2,"DETAILS")," ")}}function xo(t,m){if(t&1){let e=D();r(0,"button",78),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.downloadDocument(n))}),r(1,"mat-icon"),l(2,"download"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"DOWNLOAD")," "))}function So(t,m){if(t&1){let e=D();r(0,"button",79),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.watermarkDocument(n))}),r(1,"mat-icon"),l(2," branding_watermark"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"ADD_WATERMARK")," "))}function Eo(t,m){if(t&1){let e=D();r(0,"button",78),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.uploadNewVersion(n))}),r(1,"mat-icon"),l(2,"upload"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"UPLOAD_NEW_VERSION_FILE")," "))}function bo(t,m){if(t&1){let e=D();r(0,"button",79),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.onVersionHistoryClick(n))}),r(1,"mat-icon"),l(2," history"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"VERSION_HISTORY")," "))}function To(t,m){if(t&1){let e=D();r(0,"button",78),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.addComment(n))}),r(1,"mat-icon"),l(2," chat"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"COMMENT")," "))}function yo(t,m){if(t&1){let e=D();r(0,"button",78),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.addReminder(n))}),r(1,"mat-icon"),l(2,"notifications"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"ADD_REMINDER")," "))}function Io(t,m){if(t&1){let e=D();r(0,"button",78),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.sendEmail(n))}),r(1,"mat-icon"),l(2,"forward_to_inbox"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"SEND_EMAIL")," "))}function Ro(t,m){if(t&1){let e=D();r(0,"button",78),f("click",function(){g(e);let n=u(2).$implicit,c=u();return C(c.addIndexing(n))}),r(1,"mat-icon"),l(2,"find_in_page"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"ADD_INDEXING")," "))}function wo(t,m){t&1&&(E(0),h(1,Ro,5,3,"button",73),b()),t&2&&(i(),s("hasClaim","DEEP_SEARCH_ADD_INDEXING"))}function Ao(t,m){if(t&1){let e=D();r(0,"button",78),f("click",function(){g(e);let n=u(2).$implicit,c=u();return C(c.removeIndexing(n))}),r(1,"mat-icon"),l(2,"zoom_out"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"REMOVE_INDEXING")," "))}function No(t,m){t&1&&(E(0),h(1,Ao,5,3,"button",73),b()),t&2&&(i(),s("hasClaim","DEEP_SEARCH_REMOVE_INDEXING"))}function Mo(t,m){if(t&1){let e=D();r(0,"button",78),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.archiveDocument(n))}),r(1,"mat-icon"),l(2,"archive"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"ARCHIVE")," "))}function Vo(t,m){if(t&1){let e=D();r(0,"button",78),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.deleteDocument(n))}),r(1,"mat-icon"),l(2,"delete"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"DELETE")," "))}function ko(t,m){if(t&1){let e=D();r(0,"button",82),f("click",function(){g(e);let n=u(2).$implicit,c=u();return C(c.addComment(n))}),r(1,"mat-icon"),l(2,"chat"),o()()}}function Lo(t,m){t&1&&(E(0),h(1,ko,3,0,"button",81),b()),t&2&&(i(),s("hasClaim","ALL_DOCUMENTS_MANAGE_COMMENT"))}function Fo(t,m){if(t&1){let e=D();r(0,"button",84),f("click",function(){g(e);let n=u(2).$implicit,c=u();return C(c.onVersionHistoryClick(n))}),r(1,"mat-icon"),l(2,"history"),o()()}}function Oo(t,m){t&1&&(E(0),h(1,Fo,3,0,"button",83),b()),t&2&&(i(),s("hasClaim","ALL_DOCUMENTS_MANAGE_COMMENT"))}function Bo(t,m){if(t&1&&(r(0,"td",70)(1,"div",16)(2,"button",71)(3,"mat-icon"),l(4,"more_vert"),o()(),r(5,"mat-menu",null,3),h(7,uo,5,3,"button",72)(8,_o,5,3,"button",73)(9,ho,5,3,"button",74)(10,fo,5,3,"button",74)(11,go,5,3,"button",74)(12,Do,2,1,"ng-container",61)(13,vo,5,6,"button",75)(14,xo,5,3,"button",76)(15,So,5,3,"button",74)(16,Eo,5,3,"button",73)(17,bo,5,3,"button",74)(18,To,5,3,"button",76)(19,yo,5,3,"button",76)(20,Io,5,3,"button",76)(21,wo,2,1,"ng-container",61)(22,No,2,1,"ng-container",61)(23,Mo,5,3,"button",73)(24,Vo,5,3,"button",73),o(),h(25,Lo,2,1,"ng-container",61)(26,Oo,2,1,"ng-container",61),o()()),t&2){let e=m.$implicit,a=R(6);i(2),s("matMenuTriggerFor",a),i(5),s("hasClaim","ALL_DOCUMENTS_EDIT_DOCUMENT"),i(),s("hasClaim","ALL_DOCUMENTS_SHARE_DOCUMENT"),i(),s("hasClaim","ALL_DOCUMENTS_MANAGE_SHARABLE_LINK"),i(),s("hasClaim","ALL_DOC_ADD_SIGNATURE"),i(),s("hasClaim","ALL_DOC_GENERATE_SUMMARY"),i(),s("ngIf",!e.documentWorkflowId||e.isWorkflowCompleted),i(),s("hasClaim","ALL_DOCUMENTS_VIEW_DETAIL"),i(),s("hasClaim","ALL_DOCUMENTS_DOWNLOAD_DOCUMENT"),i(),s("hasClaim","ALL_DOC_WATERMARK"),i(),s("hasClaim","ALL_DOCUMENTS_UPLOAD_NEW_VERSION"),i(),s("hasClaim","ALL_DOCUMENTS_VIEW_VERSION_HISTORY"),i(),s("hasClaim","ALL_DOCUMENTS_MANAGE_COMMENT"),i(),s("hasClaim","ALL_DOCUMENTS_ADD_REMINDER"),i(),s("hasClaim","ALL_DOCUMENTS_SEND_EMAIL"),i(),s("ngIf",e.isIndexable&&!e.isIndexed),i(),s("ngIf",e.isIndexable&&e.isIndexed),i(),s("hasClaim","ALL_DOCUMENTS_ARCHIVE_DOCUMENT"),i(),s("hasClaim","ALL_DOCUMENTS_DELETE_DOCUMENT"),i(),s("ngIf",e.commentCount>0),i(),s("ngIf",e.versionCount>0)}}function Uo(t,m){t&1&&(r(0,"th",85),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"WORKFLOW_NAME")," "))}function Po(t,m){if(t&1){let e=D();r(0,"td",67)(1,"a",86),f("click",function(){let n=g(e).$implicit,c=u();return C(c.viewVisualWorkflow(n))}),r(2,"span",87),l(3),o()()()}if(t&2){let e=m.$implicit;i(2),s("ngClass",$t(2,Jn,(e==null?null:e.documentWorkflowStatus)=="Completed",(e==null?null:e.documentWorkflowStatus)=="Cancelled")),i(),_(" ",e.workflowName," ")}}function $o(t,m){t&1&&(r(0,"th",85),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"NAME")," "))}function Ho(t,m){if(t&1){let e=D();r(0,"td",88)(1,"a",86),f("click",function(){let n=g(e).$implicit,c=u();return C(c.onDocumentView(n))}),l(2),o()()}if(t&2){let e=m.$implicit;i(2),T(e.name)}}function Go(t,m){t&1&&(r(0,"th",85),l(1),p(2,"translate"),o()),t&2&&(i(),T(d(2,1,"DOCUMENT_CATEGORY")))}function jo(t,m){if(t&1&&(r(0,"td",67),l(1),o()),t&2){let e=m.$implicit;i(),_(" ",e.categoryName," ")}}function Yo(t,m){t&1&&(r(0,"th",85),l(1),p(2,"translate"),o()),t&2&&(i(),T(d(2,1,"STORAGE")))}function qo(t,m){if(t&1&&(r(0,"td",67),l(1),p(2,"translate"),o()),t&2){let e=m.$implicit;i(),_(" ",d(2,1,e.location.toUpperCase())," ")}}function Wo(t,m){t&1&&(r(0,"th",85),l(1),p(2,"translate"),o()),t&2&&(i(),T(d(2,1,"CLIENT")))}function Qo(t,m){if(t&1&&(r(0,"td",67),l(1),p(2,"translate"),o()),t&2){let e=m.$implicit;i(),_(" ",d(2,1,e==null?null:e.companyName)," ")}}function zo(t,m){t&1&&(r(0,"th",85),l(1),p(2,"translate"),o()),t&2&&(i(),T(d(2,1,"STATUS")))}function Xo(t,m){if(t&1&&(r(0,"td",67)(1,"span",62),l(2),p(3,"translate"),o()()),t&2){let e=m.$implicit;i(),s("ngStyle",A(4,rn,e==null?null:e.colorCode)),i(),_(" ",d(3,2,e==null?null:e.statusName)," ")}}function Ko(t,m){t&1&&(r(0,"th",85),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"CREATED_DATE")," "))}function Jo(t,m){if(t&1&&(r(0,"td",67),l(1),p(2,"utcToLocalTime"),o()),t&2){let e=m.$implicit;i(),_(" ",ge(2,1,e==null?null:e.createdDate,"shortDate")," ")}}function Zo(t,m){t&1&&(r(0,"th",85),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"CREATED_BY")," "))}function er(t,m){if(t&1&&(r(0,"td",67),l(1),o()),t&2){let e=m.$implicit;i(),_(" ",e.createdByName," ")}}function tr(t,m){t&1&&(r(0,"th",69),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"SIGN_DATE")," "))}function ir(t,m){if(t&1&&(l(0),p(1,"utcToLocalTime")),t&2){let e=u().$implicit;_(" ",ge(1,1,e==null?null:e.signDate,"shortDate")," ")}}function nr(t,m){if(t&1&&(r(0,"td",67),h(1,ir,2,4),o()),t&2){let e=m.$implicit;i(),Te(e!=null&&e.signDate?1:-1)}}function or(t,m){t&1&&(r(0,"th",69),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"SIGN_BY")," "))}function rr(t,m){if(t&1&&(r(0,"span",89),v(1,"i-feather",90),o(),l(2)),t&2){let e=u().$implicit;i(2),_(" ",e==null?null:e.signByUserName," ")}}function ar(t,m){if(t&1&&(r(0,"td",67),h(1,rr,3,1),o()),t&2){let e=m.$implicit;i(),Te(e!=null&&e.signByUserName?1:-1)}}function mr(t,m){t&1&&(r(0,"th",69),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"RETENTION_PERIOD")," "))}function lr(t,m){if(t&1&&(r(0,"small"),l(1),p(2,"translate"),p(3,"retentionAction"),o()),t&2){let e=u().$implicit;i(),Ft(" ",e==null?null:e.retentionPeriod," (",d(2,3,"DAYS"),") ",d(3,5,e==null?null:e.retentionAction)," ")}}function cr(t,m){if(t&1&&(r(0,"td",67),h(1,lr,4,7,"small"),o()),t&2){let e=m.$implicit;i(),Te(!(e==null||e.retentionAction==null)&&e.retentionAction.toString()?1:-1)}}function sr(t,m){if(t&1&&(r(0,"td",91),v(1,"mat-paginator",92),o()),t&2){let e=u();i(),s("length",e.documentResource.totalCount)("pageSize",e.documentResource.pageSize)("pageSizeOptions",fe(3,Zn))}}function pr(t,m){t&1&&(r(0,"tr")(1,"td",93)(2,"div",94)(3,"b"),l(4),p(5,"translate"),o()()()()),t&2&&(i(4),_(" ",d(5,1,"NO_DATA_FOUND"),""))}function dr(t,m){t&1&&v(0,"tr",95)}function ur(t,m){t&1&&v(0,"tr",96)}function _r(t,m){t&1&&v(0,"tr",97)}var an=(()=>{class t extends k{constructor(e,a,n,c,x,S,se,Ct,Dt){super(),this.documentService=e,this.commonDialogService=a,this.dialog=n,this.overlay=c,this.clonerService=x,this.translationService=S,this.commonService=se,this.toastrService=Ct,this.documentWorkflowService=Dt,this.documents=[],this.displayedColumns=["select","action","name","categoryName","createdDate","workflowName","location","companyName","statusName","createdBy","signDate","signByUserName","retentionPeriod"],this.footerToDisplayed=["footer"],this.createdDate=new Zt(""),this.selection=new Ie(!0,[]),this.max=new Date,this.clientStore=B(it),this.documentStatusStore=B(nt),this.categoryStore=B(ot),this.documentResource=new Ii,this.documentResource.pageSize=10,this.documentResource.orderBy="createdDate desc"}ngOnInit(){this.dataSource=new gt(this.documentService),this.dataSource.loadDocuments(this.documentResource),this.getResourceParameter(),this.getLangDir()}getLangDir(){this.sub$.sink=this.translationService.lanDir$.subscribe(e=>this.direction=e)}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=Mt(this.sort.sortChange,this.paginator.page).pipe(pe(()=>{this.documentResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.documentResource.pageSize=this.paginator.pageSize,this.documentResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadDocuments(this.documentResource),this.selection.clear()})).subscribe(),this.sub$.sink=vt(this.input.nativeElement,"keyup").pipe(xe(1e3),Se(),pe(()=>{this.paginator.pageIndex=0,this.documentResource.skip=0,this.documentResource.name=this.input.nativeElement.value,this.dataSource.loadDocuments(this.documentResource),this.selection.clear()})).subscribe(),this.sub$.sink=vt(this.metatag.nativeElement,"keyup").pipe(xe(1e3),Se(),pe(()=>{this.paginator.pageIndex=0,this.documentResource.skip=0,this.documentResource.metaTags=this.metatag.nativeElement.value,this.dataSource.loadDocuments(this.documentResource)})).subscribe(),this.sub$.sink=this.createdDate.valueChanges.pipe(xe(1e3),Se(),pe(e=>{this.paginator.pageIndex=0,this.documentResource.skip=0,e?this.documentResource.createDate=new Date(e).toISOString():this.documentResource.createDate=null,this.documentResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadDocuments(this.documentResource)})).subscribe()}isAllSelected(){let e=this.selection.selected.length,a=this.dataSource.data.length;return e===a}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}onCategoryChange(e){e?this.documentResource.categoryId=e:this.documentResource.categoryId="",this.documentResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadDocuments(this.documentResource)}onStorageChange(e){e?this.documentResource.location=e:this.documentResource.location="",this.documentResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadDocuments(this.documentResource)}onClientChange(e){e?this.documentResource.clientId=e:this.documentResource.clientId="",this.documentResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadDocuments(this.documentResource)}onDocumentStatusChange(e){e?this.documentResource.statusId=e:this.documentResource.statusId="",this.documentResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadDocuments(this.documentResource)}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(e=>{e&&(this.documentResource.pageSize=e.pageSize,this.documentResource.skip=e.skip,this.documentResource.totalCount=e.totalCount)})}archiveDocument(e){this.sub$.sink=this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_ARCHIVE"),e.name).subscribe(a=>{a&&(this.sub$.sink=this.documentService.archiveDocument(e.id).subscribe(()=>{this.addDocumentTrail(e.id,V.Archived.toString()),this.toastrService.success(this.translationService.getValue("DOCUMENT_ARCHIVED_SUCCESSFULLY")),this.dataSource.loadDocuments(this.documentResource)}))})}deleteDocument(e){this.dialog.open(pt,{width:"50vw",maxHeight:"70vh"}).afterClosed().subscribe(n=>{n&&(this.sub$.sink=this.documentService.deleteDocument(e.id).subscribe(()=>{this.addDocumentTrail(e.id,V.Deleted.toString()),this.toastrService.success(this.translationService.getValue("DOCUMENT_DELETED_SUCCESSFULLY")),this.dataSource.loadDocuments(this.documentResource)}))})}getDocuments(){this.sub$.sink=this.documentService.getDocuments(this.documentResource).subscribe(e=>{let a=JSON.parse(e.headers.get("X-Pagination"));this.documentResource.pageSize=a.pageSize,this.documentResource.skip=a.skip,this.documents=[...e.body]})}editDocument(e){let a={document:e,categories:this.categoryStore.categories(),clients:this.clientStore.clients()},n=this.dialog.open(mt,{width:"700px",data:Object.assign({},a)});this.sub$.sink=n.afterClosed().subscribe(c=>{c==="loaded"&&this.dataSource.loadDocuments(this.documentResource)})}addComment(e){let a=this.dialog.open(rt,{width:"800px",maxHeight:"70vh",data:Object.assign({},e)});this.sub$.sink=a.afterClosed().subscribe(n=>{n&&this.dataSource.loadDocuments(this.documentResource)})}manageDocumentPermission(e){this.dialog.open(lt,{data:e,width:"80vw",maxHeight:"80vh"})}onSharedSelectDocument(){let e=this.dialog.open(ut,{data:this.selection.selected,width:"80vw",maxHeight:"80vh"});this.sub$.sink=e.afterClosed().subscribe(a=>{this.selection.clear()})}uploadNewVersion(e){let a=this.dialog.open(ct,{width:"800px",maxHeight:"70vh",data:Object.assign({},e)});this.sub$.sink=a.afterClosed().subscribe(n=>{n&&this.dataSource.loadDocuments(this.documentResource)})}downloadDocument(e){let a={documentId:e.id,name:"",extension:e.url.split(".")[1],isVersion:!1,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1,isFromFileRequest:!1};this.sub$.sink=this.commonService.downloadDocument(a).subscribe(n=>{n.type===ye.Response&&(this.addDocumentTrail(e.id,V.Download.toString()),this.downloadFile(n,e))},()=>{this.toastrService.error(this.translationService.getValue("ERROR_WHILE_DOWNLOADING_DOCUMENT"))})}addDocumentTrail(e,a){let n={documentId:e,operationName:a};this.sub$.sink=this.commonService.addDocumentAuditTrail(n).subscribe()}sendEmail(e){this.dialog.open(st,{data:e,width:"80vw"})}addReminder(e){this.dialog.open(ft,{data:e,width:"80vw",maxHeight:"90vh"})}onDocumentView(e){let n=e.url.split(".")[1],c={documentId:e.id,name:e.name,extension:n,isVersion:!1,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1,isFromFileRequest:!1};this.overlay.open(Fe,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:c})}downloadFile(e,a){let n=new Blob([e.body],{type:e.body.type}),c=a.name.split("."),x=a.url.split("."),S=document.createElement("a");S.setAttribute("style","display:none;"),document.body.appendChild(S),S.download=`${c[0]}.${x[1]}`,S.href=URL.createObjectURL(n),S.target="_blank",S.click(),document.body.removeChild(S)}onVersionHistoryClick(e){let a=this.clonerService.deepClone(e);this.sub$.sink=this.documentService.getDocumentVersion(e.id).subscribe(n=>{a.documentVersions=n,this.dialog.open(at,{width:"70vw",maxHeight:"70vh",panelClass:"full-width-dialog",data:Object.assign({},a)}).afterClosed().subscribe(x=>{x&&this.dataSource.loadDocuments(this.documentResource)})})}onCreateShareableLink(e){this.sub$.sink=this.documentService.getDocumentShareableLink(e.id).subscribe(a=>{this.dialog.open(dt,{width:"500px",data:{document:e,link:a}})})}addIndexing(e){this.sub$.sink=this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_WANT_TO_ADD_DOCUMENT_PAGE_INDEXING"),e.name).subscribe(a=>{a&&this.documentService.addDcoumentToDeepSearch(e.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("DOCUMENT_PAGE_INDEXING_IS_ADDED"))})})}removeIndexing(e){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_WANT_TO_REMOVE_DOCUMENT_PAGE_INDEXING")} ${e.name}`,this.translationService.getValue("DEEP_SEARCH_REMOVE_NOTE")).subscribe(a=>{a&&this.documentService.removeDocumentFromDeepSearch(e.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("DOCUMENT_PAGE_INDEXING_IS_DELETED"))})})}manageWorkflowInstance(e){let a={document:e},n=this.dialog.open(ji,{width:"40vw",maxHeight:"70vh",data:Object.assign({},a)});this.sub$.sink=n.afterClosed().subscribe(c=>{c&&c?.workflowId&&this.dataSource.loadDocuments(this.documentResource)})}viewVisualWorkflow(e){this.documentWorkflowService.getRunningVisualWorkflow(e.documentWorkflowId).subscribe({next:a=>{a.documentId=e.id,a.documentName=e.name,this.dialog.open(Yi,{minWidth:"90vw",data:Object.assign({},a)})},error:a=>{}})}signDocument(e){this.dialog.open(qi,{width:"60vw",data:Object.assign({},e)}).afterClosed().subscribe(n=>{n&&(this.toastrService.success(this.translationService.getValue("SIGNATURE_UPLOADED_SUCCESSFULLY")),this.dataSource.loadDocuments(this.documentResource))})}generateSummary(e){this.dialog.open(Wi,{width:"60vw",data:Object.assign({},e)})}watermarkDocument(e){this.dialog.open(Qi,{width:"500px",data:Object.assign({},e)}).afterClosed().subscribe(n=>{n&&(this.toastrService.success(this.translationService.getValue("WATERMARK_CREATED_SUCCESSFULLY")),this.dataSource.loadDocuments(this.documentResource))})}static{this.\u0275fac=function(a){return new(a||t)(y(ne),y(et),y(X),y(ke),y(Le),y(F),y(L),y(H),y(Gi))}}static{this.\u0275cmp=N({type:t,selectors:[["app-document-list"]],viewQuery:function(a,n){if(a&1&&(de(Ze,5),de(ie,5),de(qn,5),de(Wn,5)),a&2){let c;ue(c=_e())&&(n.paginator=c.first),ue(c=_e())&&(n.sort=c.first),ue(c=_e())&&(n.input=c.first),ue(c=_e())&&(n.metatag=c.first)}},features:[Pt([],[jt]),M],decls:103,vars:47,consts:[["input",""],["metatag",""],["date1",""],["menu","matMenu"],[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row","align-items-center"],[1,"col"],[1,"page-title"],["code","ALL_DOCUMENTS"],[1,"col-auto"],[1,"breadcrumb-list"],[1,"breadcrumb-item","bcrumb-1"],["class","btn btn-success btn-sm",3,"routerLink",4,"hasClaim"],[1,"row"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body"],[1,"row","margin-2"],[1,"col-md-3"],["type","text",1,"form-control",3,"placeholder"],[1,"form-control",3,"placeholder"],[3,"change","placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-control",3,"max","placeholder","formControl","owlDateTimeTrigger","owlDateTime"],[3,"pickerType"],[1,"table-responsive"],[1,"grid-height-small"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["class","table-column-fix-30","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","table-column-fix-100",4,"matCellDef"],["matColumnDef","workflowName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["mat-cell","","class","doc-name",4,"matCellDef"],["matColumnDef","categoryName"],["matColumnDef","location"],["matColumnDef","companyName"],["matColumnDef","statusName"],["matColumnDef","createdDate"],["matColumnDef","createdBy"],["matColumnDef","signDate"],["matColumnDef","signByUserName"],["matColumnDef","retentionPeriod"],["matColumnDef","footer"],["mat-footer-cell","","colspan","13",4,"matFooterCellDef"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[1,"btn","btn-success","btn-sm",3,"routerLink"],["name","Plus",1,"btn-success","small-icon"],[1,"d-none","d-sm-inline"],[1,"country-item",3,"ngStyle"],[4,"ngIf"],[3,"ngStyle"],["mat-header-cell","",1,"table-column-fix-30"],["color","primary",3,"change","checked","indeterminate"],["mat-mini-fab","","class","btn btn-primary btn-sm","matTooltipPosition","above",3,"click",4,"hasClaim"],["mat-mini-fab","","matTooltipPosition","above",1,"btn","btn-primary","btn-sm",3,"click"],["mat-cell",""],["color","primary",3,"click","change","checked"],["mat-header-cell",""],["mat-cell","",1,"table-column-fix-100"],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor"],["mat-menu-item","","class","btn btn-light btn-sm",3,"click",4,"hasClaim"],["mat-menu-item","","class","btn btn-light btn-sm","type","button",3,"click",4,"hasClaim"],["mat-menu-item","",3,"click",4,"hasClaim"],["class","btn btn-light btn-sm","mat-menu-item","","type","button",3,"routerLink",4,"hasClaim"],["class","btn btn-light btn-sm","mat-menu-item","","type","button",3,"click",4,"hasClaim"],["mat-menu-item","",1,"btn","btn-light","btn-sm",3,"click"],["mat-menu-item","","type","button",1,"btn","btn-light","btn-sm",3,"click"],["mat-menu-item","",3,"click"],["mat-menu-item","","type","button",1,"btn","btn-light","btn-sm",3,"routerLink"],["mat-icon-button","","class","ms-2","aria-label","Comments",3,"click",4,"hasClaim"],["mat-icon-button","","aria-label","Comments",1,"ms-2",3,"click"],["mat-icon-button","","class","ms-2","aria-label","History",3,"click",4,"hasClaim"],["mat-icon-button","","aria-label","History",1,"ms-2",3,"click"],["mat-header-cell","","mat-sort-header",""],[1,"doc-link",3,"click"],[3,"ngClass"],["mat-cell","",1,"doc-name"],[1,"bg-success","text-light"],["name","check",1,"small-icon"],["mat-footer-cell","","colspan","13"],[3,"length","pageSize","pageSizeOptions"],["colspan","13"],[1,"m-2"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(a,n){if(a&1){let c=D();r(0,"section",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"span",10),l(7),p(8,"translate"),v(9,"app-page-help-text",11),o()(),r(10,"div",12)(11,"ul",13)(12,"li",14),h(13,eo,5,5,"button",15),o()()()()()(),r(14,"div",16)(15,"div",17)(16,"div",18)(17,"div",19)(18,"div",20)(19,"div",21),v(20,"input",22,0),p(22,"translate"),o(),r(23,"div",21),v(24,"input",23,1),p(26,"translate"),o(),r(27,"div",21)(28,"ng-select",24),p(29,"translate"),f("change",function(S){return g(c),C(n.onCategoryChange(S))}),h(30,no,4,8,"ng-option",25),o()(),r(31,"div",21)(32,"ng-select",24),p(33,"translate"),f("change",function(S){return g(c),C(n.onStorageChange(S))}),r(34,"ng-option",26),l(35),p(36,"translate"),o(),r(37,"ng-option",26),l(38),p(39,"translate"),o()()(),r(40,"div",21),v(41,"input",27),p(42,"translate"),v(43,"owl-date-time",28,2),o(),r(45,"div",21)(46,"ng-select",24),p(47,"translate"),f("change",function(S){return g(c),C(n.onClientChange(S))}),h(48,oo,3,2,"ng-option",25),o()(),r(49,"div",21)(50,"ng-select",24),p(51,"translate"),f("change",function(S){return g(c),C(n.onDocumentStatusChange(S))}),h(52,ro,3,5,"ng-option",25),o()()(),r(53,"div",16)(54,"div",9)(55,"div",29)(56,"div",30)(57,"table",31),E(58,32),h(59,co,3,2,"th",33)(60,so,2,1,"td",34),b(),E(61,35),h(62,po,3,3,"th",36)(63,Bo,27,21,"td",37),b(),E(64,38),h(65,Uo,3,3,"th",39)(66,Po,4,5,"td",34),b(),E(67,40),h(68,$o,3,3,"th",39)(69,Ho,3,1,"td",41),b(),E(70,42),h(71,Go,3,3,"th",39)(72,jo,2,1,"td",34),b(),E(73,43),h(74,Yo,3,3,"th",39)(75,qo,3,3,"td",34),b(),E(76,44),h(77,Wo,3,3,"th",39)(78,Qo,3,3,"td",34),b(),E(79,45),h(80,zo,3,3,"th",39)(81,Xo,4,6,"td",34),b(),E(82,46),h(83,Ko,3,3,"th",39)(84,Jo,3,4,"td",34),b(),E(85,47),h(86,Zo,3,3,"th",39)(87,er,2,1,"td",34),b(),E(88,48),h(89,tr,3,3,"th",36)(90,nr,2,1,"td",34),b(),E(91,49),h(92,or,3,3,"th",36)(93,ar,2,1,"td",34),b(),E(94,50),h(95,mr,3,3,"th",36)(96,cr,2,1,"td",34),b(),E(97,51),h(98,sr,2,4,"td",52),b(),h(99,pr,6,3,"tr",53)(100,dr,1,0,"tr",54)(101,ur,1,0,"tr",55)(102,_r,1,0,"tr",56),o()()()()()()()()()()()}if(a&2){let c=R(44);i(7),_("",d(8,27,"ALL_DOCUMENTS")," "),i(6),s("hasClaim","ALL_DOCUMENTS_CREATE_DOCUMENT"),i(7),I("placeholder",d(22,29,"SEARCH_DOCUMENT_BY_NAME_OR_DESCRIPTION")),i(4),I("placeholder",d(26,31,"SEARCH_DOCUMENT_BY_META_TAGS")),i(4),I("placeholder",d(29,33,"SELECT_CATEGORY")),i(2),s("ngForOf",n.categoryStore.categories()),i(2),I("placeholder",d(33,35,"STORAGE")),i(2),s("value","local"),i(),T(d(36,37,"LOCAL")),i(2),s("value","s3"),i(),T(d(39,39,"S3")),i(3),I("placeholder",d(42,41,"CREATED_DATE")),s("max",n.max)("formControl",n.createdDate)("owlDateTimeTrigger",c)("owlDateTime",c),i(2),s("pickerType","calendar"),i(3),I("placeholder",d(47,43,"SELECT_CLIENT")),i(2),s("ngForOf",n.clientStore.clients()),i(2),I("placeholder",d(51,45,"SELECT_STATUS")),i(2),s("ngForOf",n.documentStatusStore.statusList()),i(5),s("dataSource",n.dataSource),i(43),s("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),i(),s("matRowDefColumns",n.displayedColumns),i(),s("matFooterRowDef",n.footerToDisplayed)("matFooterRowDefSticky",!0)}},dependencies:[Gt,Q,U,z,Re,P,$,ii,He,je,Qe,Ye,Ge,ze,gi,Di,qe,We,Ci,Xe,Ke,vi,Je,ie,Si,Ze,ee,te,Be,Pe,Ue,$e,j,Z,Y,q,oe,ae,re,le,me,G,Oe,si]})}}return t})();var hr=()=>["/documents"],fr=t=>({"margin-right.px":t}),gr=t=>({"margin-left.px":t}),Cr=t=>({color:t});function Dr(t,m){t&1&&(r(0,"div",41),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"DOCUMENT_IS_REQUIRED")," "))}function vr(t,m){if(t&1&&(r(0,"div"),h(1,Dr,3,3,"div",20),o()),t&2){let e,a=u();i(),s("ngIf",a.documentForm.get("url").touched&&((e=a.documentForm.get("url").errors)==null?null:e.required))}}function xr(t,m){t&1&&(r(0,"div",41),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"DOCUMENT_TYPE_IS_NOT_ALLOWED")," "))}function Sr(t,m){if(t&1&&(r(0,"div"),h(1,xr,3,3,"div",20),o()),t&2){let e,a=u();i(),s("ngIf",(e=a.documentForm.get("extension").errors)==null?null:e.required)}}function Er(t,m){t&1&&(r(0,"div",41),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"NAME_IS_REQUIRED")," "))}function br(t,m){if(t&1&&(r(0,"div")(1,"b"),l(2),o()()),t&2){let e=u().$implicit;i(2),_(" ",e.name,"")}}function Tr(t,m){if(t&1&&(r(0,"div"),l(1),o()),t&2){let e=u().$implicit;i(),_(" ",e.name," ")}}function yr(t,m){if(t&1&&(r(0,"ng-option",26)(1,"div",42),h(2,br,3,1,"div",18)(3,Tr,2,1,"div",18),o()()),t&2){let e=m.$implicit,a=u();s("value",e.id),i(),s("ngStyle",a.direction==="rtl"?A(4,fr,e.deafLevel*20):A(6,gr,e.deafLevel*20)),i(),s("ngIf",!e.parentId),i(),s("ngIf",e.parentId)}}function Ir(t,m){if(t&1){let e=D();r(0,"div",43)(1,"button",44),f("click",function(){g(e);let n=u();return C(n.onAddCategory())}),v(2,"i-feather",45),o()()}}function Rr(t,m){t&1&&(r(0,"div",41),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"CATEGORY_IS_REQUIRED")," "))}function wr(t,m){t&1&&(r(0,"ng-option",26),l(1),p(2,"translate"),o()),t&2&&(s("value","s3"),i(),T(d(2,2,"S3")))}function Ar(t,m){if(t&1&&(r(0,"ng-option",26)(1,"span",46),l(2),o()()),t&2){let e=m.$implicit;s("value",e.id),i(),s("ngStyle",A(3,Cr,e==null?null:e.colorCode)),i(),_(" ",e.name," ")}}function Nr(t,m){if(t&1&&(r(0,"ng-option",26)(1,"span"),l(2),o()()),t&2){let e=m.$implicit;s("value",e.id),i(2),_(" ",e.companyName," ")}}function Mr(t,m){if(t&1&&(r(0,"ng-option",26),l(1),p(2,"translate"),o()),t&2){let e=m.$implicit;s("value",e.value),i(),_(" ",d(2,2,e.key)," ")}}function Vr(t,m){t&1&&(r(0,"label",16),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"META_TAGS")," "))}function kr(t,m){if(t&1){let e=D();r(0,"button",55),f("click",function(){g(e);let n=u(2);return C(n.onAddAnotherMetaTag())}),v(1,"i-feather",45),o()}}function Lr(t,m){if(t&1){let e=D();r(0,"button",56),f("click",function(){g(e);let n=u().index,c=u();return C(c.onDeleteMetaTag(n))}),v(1,"i-feather",57),o()}}function Fr(t,m){if(t&1){let e=D();E(0,47)(1,48),r(2,"div",7)(3,"div",49),h(4,Vr,3,3,"label",50),r(5,"div",51)(6,"input",52),f("change",function(n){let c=g(e).index,x=u();return C(x.onMetatagChange(n,c))}),o(),h(7,kr,2,0,"button",53)(8,Lr,2,0,"button",54),o()()(),b()()}if(t&2){let e=m.index;i(),s("formGroupName",e),i(3),s("ngIf",e===0),i(3),s("ngIf",e===0),i(),s("ngIf",e!==0)}}function Or(t,m){if(t&1&&(r(0,"ng-option",26),l(1),o()),t&2){let e=m.$implicit;s("value",e),i(),T(e.name)}}function Br(t,m){t&1&&(r(0,"mat-error",41),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"START_DATE_IS_REQURED")," "))}function Ur(t,m){t&1&&(r(0,"mat-error",41),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"END_DATE_IS_REQURED")," "))}function Pr(t,m){if(t&1&&(r(0,"div",7)(1,"div",58),v(2,"input",66),p(3,"translate"),v(4,"owl-date-time",null,1),h(6,Br,3,3,"mat-error",20),o(),r(7,"div",58),v(8,"input",67),p(9,"translate"),v(10,"owl-date-time",null,2),h(12,Ur,3,3,"mat-error",20),o()()),t&2){let e=R(5),a=R(11),n=u(3);i(2),I("placeholder",d(3,10,"CHOOSE_A_START_DATE")),s("min",n.minDate)("owlDateTimeTrigger",e)("owlDateTime",e),i(4),s("ngIf",n.rolePermissionFormGroup.get("startDate").touched&&n.rolePermissionFormGroup.get("startDate").hasError("required")),i(2),I("placeholder",d(9,12,"CHOOSE_A_END_DATE")),s("min",n.rolePermissionFormGroup.get("startDate").value)("owlDateTimeTrigger",a)("owlDateTime",a),i(4),s("ngIf",n.rolePermissionFormGroup.get("startDate").touched&&n.rolePermissionFormGroup.get("endDate").hasError("required"))}}function $r(t,m){if(t&1){let e=D();E(0,62),r(1,"div",7)(2,"mat-checkbox",63),f("change",function(n){g(e);let c=u(2);return C(c.roleTimeBoundChange(n))}),l(3),p(4,"translate"),o()(),h(5,Pr,13,14,"div",64),r(6,"div",7)(7,"mat-checkbox",65),l(8),p(9,"translate"),o()(),b()}if(t&2){let e=u(2);i(3),_(" ",d(4,3,"SPACIFY_THE_PERIOD"),""),i(2),s("ngIf",e.rolePermissionFormGroup.get("isTimeBound").value),i(3),T(d(9,5,"ALLOW_DOWNLOAD"))}}function Hr(t,m){if(t&1&&(r(0,"div",58)(1,"h6",59),l(2),p(3,"translate"),o(),r(4,"ng-select",60),h(5,Or,2,2,"ng-option",23),o(),h(6,$r,10,7,"ng-container",61),o()),t&2){let e,a=u();i(2),T(d(3,4,"ASSIGN_SHARE_WITH_ROLES")),i(2),s("multiple",!0),i(),s("ngForOf",a.roles),i(),s("ngIf",((e=a.documentForm.get("selectedRoles"))==null||e.value==null?null:e.value.length)>0)}}function Gr(t,m){if(t&1&&(r(0,"ng-option",26),l(1),o()),t&2){let e=m.$implicit;s("value",e),i(),he("",e.firstName," ",e.lastName,"")}}function jr(t,m){t&1&&(r(0,"mat-error",41),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"START_DATE_IS_REQURED")," "))}function Yr(t,m){t&1&&(r(0,"mat-error",41),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"END_DATE_IS_REQURED")," "))}function qr(t,m){if(t&1&&(r(0,"div",7)(1,"div",58),v(2,"input",66),p(3,"translate"),v(4,"owl-date-time",null,1),h(6,jr,3,3,"mat-error",20),o(),r(7,"div",58),v(8,"input",67),p(9,"translate"),v(10,"owl-date-time",null,2),h(12,Yr,3,3,"mat-error",20),o()()),t&2){let e=R(5),a=R(11),n=u(3);i(2),I("placeholder",d(3,10,"CHOOSE_A_START_DATE")),s("min",n.minDate)("owlDateTimeTrigger",e)("owlDateTime",e),i(4),s("ngIf",n.userPermissionFormGroup.get("startDate").touched&&n.userPermissionFormGroup.get("startDate").hasError("required")),i(2),I("placeholder",d(9,12,"CHOOSE_A_END_DATE")),s("min",n.userPermissionFormGroup.get("startDate").value)("owlDateTimeTrigger",a)("owlDateTime",a),i(4),s("ngIf",n.userPermissionFormGroup.get("startDate").touched&&n.userPermissionFormGroup.get("endDate").hasError("required"))}}function Wr(t,m){if(t&1){let e=D();E(0,70),r(1,"div",7)(2,"mat-checkbox",63),f("change",function(n){g(e);let c=u(2);return C(c.userTimeBoundChange(n))}),l(3),p(4,"translate"),o()(),h(5,qr,13,14,"div",64),r(6,"div",7)(7,"mat-checkbox",65),l(8),p(9,"translate"),o()(),b()}if(t&2){let e=u(2);i(3),_(" ",d(4,3,"SPACIFY_THE_PERIOD"),""),i(2),s("ngIf",e.userPermissionFormGroup.get("isTimeBound").value),i(3),T(d(9,5,"ALLOW_DOWNLOAD"))}}function Qr(t,m){if(t&1&&(r(0,"div",58)(1,"h6",59),l(2),p(3,"translate"),o(),r(4,"ng-select",68),h(5,Gr,2,3,"ng-option",23),o(),h(6,Wr,10,7,"ng-container",69),o()),t&2){let e,a=u();i(2),T(d(3,4,"ASSIGN_SHARE_WITH_USERS")),i(2),s("multiple",!0),i(),s("ngForOf",a.users),i(),s("ngIf",((e=a.documentForm.get("selectedUsers"))==null||e.value==null?null:e.value.length)>0)}}function zr(t,m){if(t&1){let e=D();r(0,"button",71),f("click",function(){g(e);let n=u();return C(n.SaveDocument())}),v(1,"i-feather",72),l(2),p(3,"translate"),o()}t&2&&(i(2),_(" ",d(3,1,"SAVE"),""))}var mn=(()=>{class t extends k{get documentMetaTagsArray(){return this.documentForm.get("documentMetaTags")}constructor(e,a,n,c,x,S){super(),this.fb=e,this.cd=a,this.commonService=n,this.securityService=c,this.translationService=x,this.mtDialog=S,this.extension="",this.retentionActions=[],this.onSaveDocument=new Lt,this.progress=0,this.message="",this.isFileUpload=!1,this.allowFileExtension=[],this.isS3Supported=!1,this.clientStore=B(it),this.documentstatusStore=B(nt),this.categoryStore=B(ot),this.minDate=new Date}ngOnInit(){this.retentionActions=this.getEnumValues(ci),this.createDocumentForm(),this.documentMetaTagsArray.push(this.buildDocumentMetaTag()),this.getUsers(),this.getRoles(),this.getCompanyProfile(),this.getLangDir(),this.getAllAllowFileExtension()}getEnumValues(e){return Object.keys(e).filter(a=>isNaN(Number(a))).map(a=>({key:a,value:e[a]}))}getLangDir(){this.sub$.sink=this.translationService.lanDir$.subscribe(e=>this.direction=e)}getCompanyProfile(){this.securityService.companyProfile.subscribe(e=>{e&&(this.isS3Supported=e.location=="s3")})}getUsers(){this.sub$.sink=this.commonService.getUsersForDropdown().subscribe(e=>this.users=e)}getRoles(){this.sub$.sink=this.commonService.getRolesForDropdown().subscribe(e=>this.roles=e)}getAllAllowFileExtension(){this.commonService.allowFileExtension$.subscribe(e=>{e&&(this.allowFileExtension=e)})}onDocumentChange(e){let n=(e.target.files||e.srcElement.files)[0];if(this.extension=n.name.split(".").pop(),this.fileExtesionValidation(this.extension)){let c=new FileReader;c.onload=x=>{this.documentSource=x.target.result,this.fileUploadValidation("upload")},c.readAsDataURL(n)}else this.documentSource=null,this.fileUploadValidation("")}fileUploadValidation(e){this.documentForm.patchValue({url:e}),this.documentForm.get("url").markAsTouched(),this.documentForm.updateValueAndValidity()}fileUploadExtensionValidation(e){this.documentForm.patchValue({extension:e}),this.documentForm.get("extension").markAsTouched(),this.documentForm.updateValueAndValidity()}fileExtesionValidation(e){return!!this.allowFileExtension.find(n=>n.extensions.split(",").some(c=>c.toLowerCase()===e.toLowerCase()))}createDocumentForm(){this.documentForm=this.fb.group({name:["",[w.required]],description:[""],categoryId:["",[w.required]],url:["",[w.required]],extension:["",[w.required]],documentMetaTags:this.fb.array([]),selectedRoles:[],selectedUsers:[],location:[""],clientId:[""],statusId:[""],retentionPeriod:[""],retentionAction:[""],rolePermissionForm:this.fb.group({isTimeBound:new Ce(!1),startDate:[""],endDate:[""],isAllowDownload:new Ce(!1)}),userPermissionForm:this.fb.group({isTimeBound:new Ce(!1),startDate:[""],endDate:[""],isAllowDownload:new Ce(!1)})}),this.companyProfileSubscription()}companyProfileSubscription(){this.securityService.companyProfile.subscribe(e=>{e&&this.documentForm.get("location").setValue(e.location??"local")})}buildDocumentMetaTag(){return this.fb.group({id:[""],documentId:[""],metatag:[""]})}get rolePermissionFormGroup(){return this.documentForm.get("rolePermissionForm")}get userPermissionFormGroup(){return this.documentForm.get("userPermissionForm")}onMetatagChange(e,a){if(!this.documentMetaTagsArray.at(a).get("metatag").value)return;let c=this.documentMetaTagsArray.at(a).get("metatag");c.setValidators([w.required]),c.updateValueAndValidity()}editDocmentMetaData(e){return this.fb.group({id:[e.id],documentId:[e.documentId],metatag:[e.metatag]})}SaveDocument(){if(this.documentForm.valid){let e=this.buildDocumentObject();this.onSaveDocument.emit(e)}else this.documentForm.markAllAsTouched()}buildDocumentObject(){let e=this.documentMetaTagsArray.getRawValue(),a={categoryId:this.documentForm.get("categoryId").value,description:this.documentForm.get("description").value,statusId:this.documentForm.get("statusId").value,name:this.documentForm.get("name").value,url:this.fileData.fileName,documentMetaDatas:[...e],fileData:this.fileData,extension:this.extension,location:this.documentForm.get("location").value,clientId:this.documentForm.get("clientId").value??"",retentionPeriod:this.documentForm.get("retentionPeriod").value??"",retentionAction:this.documentForm.get("retentionAction").value?.toString()??""},n=this.documentForm.get("selectedRoles").value??[];n?.length>0&&(a.documentRolePermissions=n.map(x=>Object.assign({},{id:"",documentId:"",roleId:x.id},this.rolePermissionFormGroup.value)));let c=this.documentForm.get("selectedUsers").value??[];return c?.length>0&&(a.documentUserPermissions=c.map(x=>Object.assign({},{id:"",documentId:"",userId:x.id},this.userPermissionFormGroup.value))),a}onAddAnotherMetaTag(){let e={id:"",documentId:this.document&&this.document.id?this.document.id:"",metatag:""};this.documentMetaTagsArray.insert(0,this.editDocmentMetaData(e))}onDeleteMetaTag(e){this.documentMetaTagsArray.removeAt(e)}upload(e){if(e.length!==0){if(this.extension=e[0].name.split(".").pop(),this.fileExtesionValidation(this.extension))this.fileUploadExtensionValidation("valid");else{this.fileUploadExtensionValidation(""),this.cd.markForCheck();return}this.fileData=e[0],this.documentForm.get("url").setValue(e[0].name),this.documentForm.get("name").setValue(e[0].name)}}roleTimeBoundChange(e){e.checked?(this.rolePermissionFormGroup.get("startDate").setValidators([w.required]),this.rolePermissionFormGroup.get("endDate").setValidators([w.required])):(this.rolePermissionFormGroup.get("startDate").clearValidators(),this.rolePermissionFormGroup.get("startDate").updateValueAndValidity(),this.rolePermissionFormGroup.get("endDate").clearValidators(),this.rolePermissionFormGroup.get("endDate").updateValueAndValidity())}userTimeBoundChange(e){e.checked?(this.userPermissionFormGroup.get("startDate").setValidators([w.required]),this.userPermissionFormGroup.get("endDate").setValidators([w.required])):(this.userPermissionFormGroup.get("startDate").clearValidators(),this.userPermissionFormGroup.get("startDate").updateValueAndValidity(),this.userPermissionFormGroup.get("endDate").clearValidators(),this.userPermissionFormGroup.get("endDate").updateValueAndValidity())}onAddCategory(){this.mtDialog.open(Ui,{width:"400px"}).afterClosed().subscribe(a=>{a&&setTimeout(()=>{this.documentForm.get("categoryId").setValue(this.categoryStore.currentCategoryId())},1e3)})}static{this.\u0275fac=function(a){return new(a||t)(y(Ve),y(Ht),y(L),y(li),y(F),y(X))}}static{this.\u0275cmp=N({type:t,selectors:[["app-document-manage-presentation"]],outputs:{onSaveDocument:"onSaveDocument"},features:[M],decls:91,vars:67,consts:[["file",""],["date1",""],["date2",""],[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],["code","ADD_DOCUMENT"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body"],[3,"formGroup"],[1,"col-md-3"],[1,"form-label"],["type","file",1,"form-control",3,"change"],[4,"ngIf"],["formControlName","name","type","text",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"input-group"],["formControlName","categoryId",1,"flex-grow-1",3,"placeholder","clearable"],[3,"value",4,"ngFor","ngForOf"],["class","input-group-append",4,"hasClaim"],["formControlName","location",3,"clearable"],[3,"value"],[3,"value",4,"ngIf"],["formControlName","statusId",3,"searchable","placeholder"],[1,"form-group"],["formControlName","clientId",3,"placeholder"],["formControlName","retentionPeriod","type","number","min","1",1,"form-control"],["formControlName","retentionAction",3,"clearable"],["formArrayName","documentMetaTags",4,"ngFor","ngForOf"],[1,"col-md-9"],["formControlName","description",1,"form-control"],["class","col-md-6",4,"hasClaim"],[1,"m-t-10","col-md-12"],["class","btn btn-success btn-sm m-r-10","cdkFocusInitial","",3,"click",4,"hasClaim"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],["name","x-circle",1,"small-icon"],[1,"text-danger"],[1,"country-item",3,"ngStyle"],[1,"input-group-append"],["type","button","aria-label","Add category",1,"btn","btn-primary","add-category-button",3,"click"],["name","plus",1,"small-icon"],[3,"ngStyle"],["formArrayName","documentMetaTags"],[3,"formGroupName"],[1,"col"],["class","form-label",4,"ngIf"],[1,"input-group","m-b-10"],["formControlName","metatag","type","text",1,"form-control",3,"change"],["class","btn btn-outline-success","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-danger","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-success",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["name","trash",1,"small-icon"],[1,"col-md-6"],[1,"vew-mail-header"],["formControlName","selectedRoles",3,"multiple"],["formGroupName","rolePermissionForm",4,"ngIf"],["formGroupName","rolePermissionForm"],["color","primary","formControlName","isTimeBound",3,"change"],["class","row",4,"ngIf"],["color","primary","formControlName","isAllowDownload"],["formControlName","startDate",1,"form-control",3,"min","placeholder","owlDateTimeTrigger","owlDateTime"],["formControlName","endDate",1,"form-control",3,"min","placeholder","owlDateTimeTrigger","owlDateTime"],["formControlName","selectedUsers",3,"multiple"],["formGroupName","userPermissionForm",4,"ngIf"],["formGroupName","userPermissionForm"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],["name","save",1,"small-icon"]],template:function(a,n){if(a&1){let c=D();r(0,"section",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"span",9),l(7),p(8,"translate"),v(9,"app-page-help-text",10),o()()()()(),r(10,"div",7)(11,"div",11)(12,"div",12)(13,"div",13)(14,"form",14)(15,"div",7)(16,"div",15)(17,"label",16),l(18),p(19,"translate"),o(),r(20,"input",17,0),f("change",function(){g(c);let S=R(21);return C(n.upload(S.files))}),o(),h(22,vr,2,1,"div",18)(23,Sr,2,1,"div",18),o(),r(24,"div",15)(25,"label",16),l(26),p(27,"translate"),o(),v(28,"input",19),h(29,Er,3,3,"div",20),o(),r(30,"div",15)(31,"label",16),l(32),p(33,"translate"),o(),r(34,"div",21)(35,"ng-select",22),p(36,"translate"),h(37,yr,4,8,"ng-option",23),o(),h(38,Ir,3,0,"div",24),o(),h(39,Rr,3,3,"div",20),o(),r(40,"div",15)(41,"label",16),l(42),p(43,"translate"),o(),r(44,"ng-select",25)(45,"ng-option",26),l(46),p(47,"translate"),o(),h(48,wr,3,4,"ng-option",27),o()(),r(49,"div",15)(50,"label",16),l(51),p(52,"translate"),o(),r(53,"ng-select",28),p(54,"translate"),h(55,Ar,3,5,"ng-option",23),o()(),r(56,"div",15)(57,"div",29)(58,"label",16),l(59),p(60,"translate"),o(),r(61,"ng-select",30),p(62,"translate"),h(63,Nr,3,2,"ng-option",23),o()()(),r(64,"div",15)(65,"label",16),l(66),p(67,"translate"),o(),v(68,"input",31),o(),r(69,"div",15)(70,"label",16),l(71),p(72,"translate"),o(),r(73,"ng-select",32),h(74,Mr,3,4,"ng-option",23),o()(),r(75,"div",15),h(76,Fr,9,4,"ng-container",33),o(),r(77,"div",34)(78,"label",16),l(79),p(80,"translate"),o(),r(81,"textarea",35),l(82,"                  "),o()(),h(83,Hr,7,6,"div",36)(84,Qr,7,6,"div",36),r(85,"div",37),h(86,zr,4,3,"button",38),r(87,"button",39),v(88,"i-feather",40),l(89),p(90,"translate"),o()()()()()()()()()()}if(a&2){let c,x;i(7),_("",d(8,36,"ADD_DOCUMENT")," "),i(7),s("formGroup",n.documentForm),i(4),T(d(19,38,"DOCUMENT_UPLOAD")),i(4),s("ngIf",n.documentForm.get("url").touched&&((c=n.documentForm.get("url"))==null?null:c.errors)),i(),s("ngIf",(n.documentForm.get("extension").touched||n.documentForm.get("extension").dirty)&&n.documentForm.get("url").errors),i(3),T(d(27,40,"NAME")),i(3),s("ngIf",n.documentForm.get("name").touched&&((x=n.documentForm.get("name"))==null?null:x.hasError("required"))),i(3),T(d(33,42,"CATEGORY")),i(3),I("placeholder",d(36,44,"CATEGORY")),s("clearable",!1),i(2),s("ngForOf",n.categoryStore.categories()),i(),s("hasClaim","DOCUMENT_CATEGORY_MANAGE_DOCUMENT_CATEGORY"),i(),s("ngIf",n.documentForm.get("categoryId").touched&&n.documentForm.get("categoryId").hasError("required")),i(3),T(d(43,46,"STORAGE")),i(2),s("clearable",!1),i(),s("value","local"),i(),T(d(47,48,"LOCAL")),i(2),s("ngIf",n.isS3Supported),i(3),T(d(52,50,"DOCUMENT_STATUS")),i(2),I("placeholder",d(54,52,"NONE")),s("searchable",!0),i(2),s("ngForOf",n.documentstatusStore.statusList()),i(4),T(d(60,54,"CLIENT")),i(2),I("placeholder",d(62,56,"CLIENT")),i(2),s("ngForOf",n.clientStore.clients()),i(3),T(d(67,58,"RETENTION_PERIOD")),i(5),T(d(72,60,"RETENTION_ACTION")),i(2),s("clearable",!0),i(),s("ngForOf",n.retentionActions),i(2),s("ngForOf",n.documentMetaTagsArray.controls),i(3),T(d(80,62,"DESCRIPTION")),i(4),s("hasClaim","ALL_DOCUMENTS_SHARE_DOCUMENT"),i(),s("hasClaim","ALL_DOCUMENTS_SHARE_DOCUMENT"),i(2),s("hasClaim","ALL_DOCUMENTS_CREATE_DOCUMENT"),i(),s("routerLink",fe(66,hr)),i(2),_(" ",d(90,64,"CANCEL"),"")}},dependencies:[Q,U,z,Re,J,P,ti,$,K,ai,we,Me,Ae,Ne,_i,j,Z,Y,q,oe,ae,re,le,me,G],changeDetection:0})}}return t})();var ln=(()=>{class t extends k{constructor(e,a,n,c,x){super(),this.toastrService=e,this.documentService=a,this.router=n,this.commonService=c,this.translationService=x}saveDocument(e){this.sub$.sink=this.documentService.addDocument(e).subscribe(a=>{this.addDocumentTrail(a),this.toastrService.success(this.translationService.getValue("DOCUMENT_SAVE_SUCCESSFULLY"))})}addDocumentTrail(e){let a={documentId:e.id,operationName:V.Created.toString()};this.sub$.sink=this.commonService.addDocumentAuditTrail(a).subscribe(n=>{this.router.navigate(["/documents"])})}static{this.\u0275fac=function(a){return new(a||t)(y(H),y(ne),y(Kt),y(L),y(F))}}static{this.\u0275cmp=N({type:t,selectors:[["app-document-manage"]],features:[M],decls:1,vars:0,consts:[[3,"onSaveDocument"]],template:function(a,n){a&1&&(r(0,"app-document-manage-presentation",0),f("onSaveDocument",function(x){return n.saveDocument(x)}),o())},dependencies:[mn]})}}return t})();var Kr=t=>({color:t});function Jr(t,m){if(t&1){let e=D();E(0),r(1,"mat-checkbox",42),f("change",function(n){g(e);let c=u(2);return C(n?c.masterToggle():null)}),o(),b()}if(t&2){let e=u(2);i(),s("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function Zr(t,m){if(t&1){let e=D();r(0,"button",44),f("click",function(){g(e);let n=u(3);return C(n.onSharedSelectDocument())}),r(1,"mat-icon"),l(2,"share"),o()()}}function ea(t,m){t&1&&(E(0),h(1,Zr,3,0,"button",43),b()),t&2&&(i(),s("hasClaim","ALL_DOCUMENTS_SHARE_DOCUMENT"))}function ta(t,m){if(t&1&&(r(0,"th",40),h(1,Jr,2,2,"ng-container",41)(2,ea,2,1,"ng-container",41),o()),t&2){let e=u();i(),s("ngIf",e.selection.isEmpty()),i(),s("ngIf",!e.selection.isEmpty())}}function ia(t,m){if(t&1){let e=D();r(0,"td",45)(1,"mat-checkbox",46),f("click",function(n){return g(e),C(n.stopPropagation())})("change",function(n){let c=g(e).$implicit,x=u();return C(n?x.selection.toggle(c):null)}),o()()}if(t&2){let e=m.$implicit,a=u();i(),s("checked",a.selection.isSelected(e))}}function na(t,m){t&1&&(r(0,"th",47),l(1),p(2,"translate"),o()),t&2&&(i(),_("",d(2,1,"ACTION")," "))}function oa(t,m){if(t&1){let e=D();r(0,"button",49),f("click",function(){g(e);let n=u(2).$implicit,c=u();return C(c.removeIndexing(n))}),r(1,"mat-icon"),l(2,"zoom_out"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"REMOVE_INDEXING")," "))}function ra(t,m){t&1&&(E(0),h(1,oa,5,3,"button",51),b()),t&2&&(i(),s("hasClaim","DEEP_SEARCH_REMOVE_INDEXING"))}function aa(t,m){if(t&1){let e=D();r(0,"button",54),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.editDocument(n))}),r(1,"mat-icon"),l(2,"edit"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"EDIT")," "))}function ma(t,m){if(t&1){let e=D();r(0,"button",49),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.manageDocumentPermission(n))}),r(1,"mat-icon"),l(2,"share"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"SHARE")," "))}function la(t,m){if(t&1){let e=D();r(0,"button",55),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.onCreateShareableLink(n))}),r(1,"mat-icon"),l(2," link"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"GET_SHAREABLE_LINK")," "))}function ca(t,m){if(t&1){let e=D();r(0,"button",49),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.downloadDocument(n))}),r(1,"mat-icon"),l(2,"download"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"DOWNLOAD")," "))}function sa(t,m){if(t&1){let e=D();r(0,"button",49),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.uploadNewVersion(n))}),r(1,"mat-icon"),l(2,"upload"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"UPLOAD_NEW_VERSION_FILE")," "))}function pa(t,m){if(t&1){let e=D();r(0,"button",55),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.onVersionHistoryClick(n))}),r(1,"mat-icon"),l(2," history"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"VERSION_HISTORY")," "))}function da(t,m){if(t&1){let e=D();r(0,"button",49),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.addComment(n))}),r(1,"mat-icon"),l(2," chat"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"COMMENT")," "))}function ua(t,m){if(t&1){let e=D();r(0,"button",49),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.addReminder(n))}),r(1,"mat-icon"),l(2,"notifications"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"ADD_REMINDER")," "))}function _a(t,m){if(t&1){let e=D();r(0,"button",49),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.sendEmail(n))}),r(1,"mat-icon"),l(2,"forward_to_inbox"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"SEND_EMAIL")," "))}function ha(t,m){if(t&1){let e=D();r(0,"button",49),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.archiveDocument(n))}),r(1,"mat-icon"),l(2,"archive"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"ARCHIVE")," "))}function fa(t,m){if(t&1){let e=D();r(0,"button",49),f("click",function(){g(e);let n=u().$implicit,c=u();return C(c.deleteDocument(n))}),r(1,"mat-icon"),l(2,"delete"),o(),l(3),p(4,"translate"),o()}t&2&&(i(3),_(" ",d(4,1,"DELETE")," "))}function ga(t,m){if(t&1){let e=D();r(0,"td",45)(1,"button",48)(2,"mat-icon"),l(3,"more_vert"),o()(),r(4,"mat-menu",null,1),h(6,ra,2,1,"ng-container",41),r(7,"button",49),f("click",function(){let n=g(e).$implicit,c=u();return C(c.onDocumentView(n))}),r(8,"mat-icon"),l(9,"visibility"),o(),l(10),p(11,"translate"),o(),h(12,aa,5,3,"button",50)(13,ma,5,3,"button",51)(14,la,5,3,"button",52)(15,ca,5,3,"button",53)(16,sa,5,3,"button",51)(17,pa,5,3,"button",52)(18,da,5,3,"button",53)(19,ua,5,3,"button",53)(20,_a,5,3,"button",53)(21,ha,5,3,"button",51)(22,fa,5,3,"button",51),o()()}if(t&2){let e=m.$implicit,a=R(5);i(),s("matMenuTriggerFor",a),i(5),s("ngIf",e.isIndexed),i(4),_(" ",d(11,14,"VIEW")," "),i(2),s("hasClaim","ALL_DOCUMENTS_EDIT_DOCUMENT"),i(),s("hasClaim","ALL_DOCUMENTS_SHARE_DOCUMENT"),i(),s("hasClaim","ALL_DOCUMENTS_MANAGE_SHARABLE_LINK"),i(),s("hasClaim","ALL_DOCUMENTS_DOWNLOAD_DOCUMENT"),i(),s("hasClaim","ALL_DOCUMENTS_UPLOAD_NEW_VERSION"),i(),s("hasClaim","ALL_DOCUMENTS_VIEW_VERSION_HISTORY"),i(),s("hasClaim","ALL_DOCUMENTS_MANAGE_COMMENT"),i(),s("hasClaim","ALL_DOCUMENTS_ADD_REMINDER"),i(),s("hasClaim","ALL_DOCUMENTS_SEND_EMAIL"),i(),s("hasClaim","ALL_DOCUMENTS_ARCHIVE_DOCUMENT"),i(),s("hasClaim","ALL_DOCUMENTS_DELETE_DOCUMENT")}}function Ca(t,m){t&1&&(r(0,"th",47),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"NAME")," "))}function Da(t,m){if(t&1){let e=D();r(0,"td",45)(1,"a",56),f("click",function(){let n=g(e).$implicit,c=u();return C(c.onDocumentView(n))}),l(2),o()()}if(t&2){let e=m.$implicit;i(2),T(e.name)}}function va(t,m){t&1&&(r(0,"th",47),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"DOCUMENT_CATEGORY"),""))}function xa(t,m){if(t&1&&(r(0,"td",45),l(1),o()),t&2){let e=m.$implicit;i(),_(" ",e.categoryName," ")}}function Sa(t,m){t&1&&(r(0,"th",47),l(1),p(2,"translate"),o()),t&2&&(i(),T(d(2,1,"STORAGE")))}function Ea(t,m){if(t&1&&(r(0,"td",45),l(1),p(2,"translate"),o()),t&2){let e=m.$implicit;i(),_(" ",d(2,1,e.location.toUpperCase())," ")}}function ba(t,m){t&1&&(r(0,"th",47),l(1),p(2,"translate"),o()),t&2&&(i(),T(d(2,1,"CLIENT")))}function Ta(t,m){if(t&1&&(r(0,"td",45),l(1),p(2,"translate"),o()),t&2){let e=m.$implicit;i(),_(" ",d(2,1,e==null?null:e.companyName)," ")}}function ya(t,m){t&1&&(r(0,"th",47),l(1),p(2,"translate"),o()),t&2&&(i(),T(d(2,1,"STATUS")))}function Ia(t,m){if(t&1&&(r(0,"td",45)(1,"span",57),l(2),p(3,"translate"),o()()),t&2){let e=m.$implicit;i(),s("ngStyle",A(4,Kr,e==null?null:e.colorCode)),i(),_(" ",d(3,2,e==null?null:e.statusName)," ")}}function Ra(t,m){t&1&&(r(0,"th",47),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"CREATED_DATE")," "))}function wa(t,m){if(t&1&&(r(0,"td",45),l(1),p(2,"utcToLocalTime"),o()),t&2){let e=m.$implicit;i(),_(" ",ge(2,1,e==null?null:e.createdDate,"shortDate")," ")}}function Aa(t,m){t&1&&(r(0,"th",47),l(1),p(2,"translate"),o()),t&2&&(i(),_(" ",d(2,1,"CREATED_BY")," "))}function Na(t,m){if(t&1&&(r(0,"td",45),l(1),o()),t&2){let e=m.$implicit;i(),_(" ",e.createdByName," ")}}function Ma(t,m){t&1&&(r(0,"tr")(1,"td",58)(2,"div",59)(3,"b"),l(4),p(5,"translate"),o()()()()),t&2&&(i(4),_(" ",d(5,1,"NO_DATA_FOUND"),""))}function Va(t,m){t&1&&v(0,"tr",60)}function ka(t,m){t&1&&v(0,"tr",61)}var cn=(()=>{class t extends k{constructor(e,a,n,c,x,S,se,Ct,Dt){super(),this.documentService=e,this.commonDialogService=a,this.categoryService=n,this.dialog=c,this.overlay=x,this.clonerService=S,this.translationService=se,this.commonService=Ct,this.toastrService=Dt,this.documents=[],this.displayedColumns=["select","action","name","categoryName","location","companyName","statusName","createdDate","createdBy"],this.dataSource=[],this.categories=[],this.selection=new Ie(!0,[]),this.searchQuery=""}ngOnInit(){this.getCategories()}searchDocuments(e=!1){this.searchQuery?this.sub$.sink=this.documentService.getDocumentsByDeepSearch(this.searchQuery).subscribe({next:a=>{a.length>0?this.dataSource=[...a]:(this.dataSource=[],e&&this.toastrService.warning(this.translationService.getValue("NO_DOCUMENTS_FOUND")))}}):this.dataSource=[]}isAllSelected(){let e=this.selection.selected.length,a=this.dataSource.length;return e===a}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.forEach(e=>this.selection.select(e))}getCategories(){this.categoryService.getAllCategoriesForDropDown().subscribe(e=>{this.categories=[...e]})}archiveDocument(e){this.sub$.sink=this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_ARCHIVE"),e.name).subscribe(a=>{a&&(this.sub$.sink=this.documentService.archiveDocument(e.id).subscribe(()=>{this.addDocumentTrail(e.id,V.Archived.toString()),this.toastrService.success(this.translationService.getValue("DOCUMENT_ARCHIVED_SUCCESSFULLY")),this.searchDocuments()}))})}deleteDocument(e){this.dialog.open(pt,{width:"50vw",maxHeight:"70vh"}).afterClosed().subscribe(n=>{n&&(this.sub$.sink=this.documentService.deleteDocument(e.id).subscribe(()=>{this.addDocumentTrail(e.id,V.Deleted.toString()),this.toastrService.success(this.translationService.getValue("DOCUMENT_DELETED_SUCCESSFULLY")),this.searchDocuments()}))})}editDocument(e){let a={document:e,categories:this.categories,clients:[]},n=this.dialog.open(mt,{width:"700px",data:Object.assign({},a)});this.sub$.sink=n.afterClosed().subscribe(c=>{c==="loaded"&&this.searchDocuments()})}addComment(e){let a=this.dialog.open(rt,{width:"800px",maxHeight:"70vh",data:Object.assign({},e)});this.sub$.sink=a.afterClosed().subscribe(n=>{n&&this.searchDocuments()})}manageDocumentPermission(e){this.dialog.open(lt,{data:e,width:"80vw",maxHeight:"80vh"})}onSharedSelectDocument(){let e=this.dialog.open(ut,{data:this.selection.selected,width:"80vw",maxHeight:"80vh"});this.sub$.sink=e.afterClosed().subscribe(a=>{this.selection.clear()})}uploadNewVersion(e){let a=this.dialog.open(ct,{width:"800px",maxHeight:"70vh",data:Object.assign({},e)});this.sub$.sink=a.afterClosed().subscribe(n=>{n&&this.searchDocuments()})}downloadDocument(e){let a={documentId:e.id,name:"",extension:e.url.split(".")[1],isVersion:!1,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1,isFromFileRequest:!1};this.sub$.sink=this.commonService.downloadDocument(a).subscribe(n=>{n.type===ye.Response&&(this.addDocumentTrail(e.id,V.Download.toString()),this.downloadFile(n,e))},()=>{this.toastrService.error(this.translationService.getValue("ERROR_WHILE_DOWNLOADING_DOCUMENT"))})}addDocumentTrail(e,a){let n={documentId:e,operationName:a};this.sub$.sink=this.commonService.addDocumentAuditTrail(n).subscribe()}sendEmail(e){this.dialog.open(st,{data:e,width:"80vw"})}addReminder(e){this.dialog.open(ft,{data:e,width:"80vw",maxHeight:"80vh"})}onDocumentView(e){let n=e.url.split(".")[1],c={documentId:e.id,name:e.name,extension:n,isVersion:!1,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1,isFromFileRequest:!1};this.overlay.open(Fe,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:c})}downloadFile(e,a){let n=new Blob([e.body],{type:e.body.type}),c=a.name.split("."),x=a.url.split("."),S=document.createElement("a");S.setAttribute("style","display:none;"),document.body.appendChild(S),S.download=`${c[0]}.${x[1]}`,S.href=URL.createObjectURL(n),S.target="_blank",S.click(),document.body.removeChild(S)}onVersionHistoryClick(e){let a=this.clonerService.deepClone(e);this.sub$.sink=this.documentService.getDocumentVersion(e.id).subscribe(n=>{a.documentVersions=n,this.dialog.open(at,{width:"70vw",maxHeight:"70vh",panelClass:"full-width-dialog",data:Object.assign({},a)}).afterClosed().subscribe(x=>{x&&this.searchDocuments()})})}onCreateShareableLink(e){this.sub$.sink=this.documentService.getDocumentShareableLink(e.id).subscribe(a=>{this.dialog.open(dt,{width:"500px",data:{document:e,link:a}})})}removeIndexing(e){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_WANT_TO_REMOVE_DOCUMENT_PAGE_INDEXING")} ${e.name}`,this.translationService.getValue("DEEP_SEARCH_REMOVE_NOTE")).subscribe(a=>{a&&this.documentService.removeDocumentFromDeepSearch(e.id).subscribe(()=>{this.searchDocuments(),this.toastrService.success(this.translationService.getValue("DOCUMENT_PAGE_INDEXING_IS_DELETED"))})})}static{this.\u0275fac=function(a){return new(a||t)(y(ne),y(et),y(Bi),y(X),y(ke),y(Le),y(F),y(L),y(H))}}static{this.\u0275cmp=N({type:t,selectors:[["app-document-deep-search"]],features:[M],decls:63,vars:17,consts:[["input",""],["menu","matMenu"],[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],["code","DEEP_SEARCH"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body"],[1,"d-flex","flex-wrap","flex-column","flex-sm-row"],[1,"p-1","flex-fill"],[1,"input-group","mb-3"],["name","searchQuery","id","txtSearch","type","text",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["type","submit","id","txtSearch",1,"btn","btn-primary","btn-sm",3,"click"],["name","zoom-in",1,"small-icon"],[1,"d-flex","flex-wrap","flex-column","flex-sm-row","ms-2"],[1,"flex-fill"],[1,"text-danger"],[1,"table-responsive"],[1,"grid-height-auto"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["class","table-column-fix-30","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","categoryName"],["matColumnDef","location"],["matColumnDef","companyName"],["matColumnDef","statusName"],["matColumnDef","createdDate"],["matColumnDef","createdBy"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"table-column-fix-30"],[4,"ngIf"],["color","primary",3,"change","checked","indeterminate"],["mat-mini-fab","","class","btn btn-primary btn-sm","matTooltipPosition","above",3,"click",4,"hasClaim"],["mat-mini-fab","","matTooltipPosition","above",1,"btn","btn-primary","btn-sm",3,"click"],["mat-cell",""],["color","primary",3,"click","change","checked"],["mat-header-cell",""],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor"],["mat-menu-item","","type","button",1,"btn","btn-light","btn-sm",3,"click"],["mat-menu-item","","class","btn btn-light btn-sm",3,"click",4,"hasClaim"],["mat-menu-item","","class","btn btn-light btn-sm","type","button",3,"click",4,"hasClaim"],["mat-menu-item","",3,"click",4,"hasClaim"],["class","btn btn-light btn-sm","mat-menu-item","","type","button",3,"click",4,"hasClaim"],["mat-menu-item","",1,"btn","btn-light","btn-sm",3,"click"],["mat-menu-item","",3,"click"],[1,"doc-link",3,"click"],[3,"ngStyle"],["colspan","8"],[1,"m-2"],["mat-header-row",""],["mat-row",""]],template:function(a,n){if(a&1){let c=D();r(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"span",8),l(7),p(8,"translate"),v(9,"app-page-help-text",9),o()()()()(),r(10,"div",6)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",6)(15,"div",13)(16,"div",14)(17,"form",15)(18,"input",16,0),p(20,"translate"),Ut("ngModelChange",function(S){return g(c),Bt(n.searchQuery,S)||(n.searchQuery=S),C(S)}),o(),r(21,"button",17),f("click",function(){return g(c),C(n.searchDocuments(!0))}),v(22,"i-feather",18),l(23),p(24,"translate"),o()()()(),r(25,"div",19)(26,"div",20)(27,"span",21),l(28),p(29,"translate"),o()()(),r(30,"div",22)(31,"div",23)(32,"table",24),E(33,25),h(34,ta,3,2,"th",26)(35,ia,2,1,"td",27),b(),E(36,28),h(37,na,3,3,"th",29)(38,ga,23,16,"td",27),b(),E(39,30),h(40,Ca,3,3,"th",29)(41,Da,3,1,"td",27),b(),E(42,31),h(43,va,3,3,"th",29)(44,xa,2,1,"td",27),b(),E(45,32),h(46,Sa,3,3,"th",29)(47,Ea,3,3,"td",27),b(),E(48,33),h(49,ba,3,3,"th",29)(50,Ta,3,3,"td",27),b(),E(51,34),h(52,ya,3,3,"th",29)(53,Ia,4,6,"td",27),b(),E(54,35),h(55,Ra,3,3,"th",29)(56,wa,3,4,"td",27),b(),E(57,36),h(58,Aa,3,3,"th",29)(59,Na,2,1,"td",27),b(),h(60,Ma,6,3,"tr",37)(61,Va,1,0,"tr",38)(62,ka,1,0,"tr",39),o()()()()()()()()()()}a&2&&(i(7),_("",d(8,9,"DEEP_SEARCH")," "),i(11),I("placeholder",d(20,11,"DEEP_SEARCH_TEXTBOX_PLACEHOLDER")),Ot("ngModel",n.searchQuery),i(5),_(" ",d(24,13,"SEARCH")," "),i(5),_(" ",d(29,15,"DEEP_SEARCH_NOTE")," "),i(4),s("dataSource",n.dataSource),i(29),s("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),i(),s("matRowDefColumns",n.displayedColumns))},dependencies:[U,z,J,P,$,K,He,je,Qe,Ye,Ge,ze,qe,We,Xe,Ke,Je,ie,ee,te,Be,ei,Jt,Pe,Ue,$e,j,Z,Y,q,G,Oe]})}}return t})();var La=[{path:"",component:an,data:{claimType:"ALL_DOCUMENTS_VIEW_DOCUMENTS"},canActivate:[tt]},{path:"deep-search",component:cn,data:{claimType:"DEEP_SEARCH_DEEP_SEARCH"},canActivate:[tt]},{path:"add",component:ln,data:{claimType:"ALL_DOCUMENTS_CREATE_DOCUMENT"},canActivate:[tt]},{path:"permission",loadChildren:()=>import("./chunk-VJTQCSEP.js").then(t=>t.DocumentPermissionModule)}],sn=(()=>{class t{static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275mod=be({type:t})}static{this.\u0275inj=Ee({imports:[xt.forChild(La),xt]})}}return t})();var sc=(()=>{class t{static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275mod=be({type:t})}static{this.\u0275inj=Ee({imports:[Yt,sn,mi,xi,Xt,fi,Ei,bi,hi,pi,di,yi,$i,Xi,Mi,ui,Ti,zi,Li,Fi,Oi,Pi,Hi]})}}return t})();export{sc as DocumentModule};
