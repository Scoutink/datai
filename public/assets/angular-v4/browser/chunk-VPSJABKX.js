import{a as Ht}from"./chunk-BCPCIHCF.js";import{b as zt}from"./chunk-FXCDIA6O.js";import{a as jt}from"./chunk-4REX6LI6.js";import{a as Ft,b as yt,c as Ie,d as Fe}from"./chunk-PP7DWUBX.js";import{a as Mt}from"./chunk-DP5HZIV3.js";import{e as Te}from"./chunk-BA7IEC3F.js";import{a as $t}from"./chunk-4XHRY5MP.js";import"./chunk-ADSK4K64.js";import{a as Ut}from"./chunk-CZA53JXZ.js";import"./chunk-7XEC6DZO.js";import{a as Vt}from"./chunk-L3VVSLNP.js";import"./chunk-NR2EX3RM.js";import"./chunk-GAXRZ4S7.js";import"./chunk-KKMMKVFL.js";import"./chunk-MS6J53NI.js";import"./chunk-XALYLCQ4.js";import"./chunk-5ETFIZHZ.js";import"./chunk-5DGY2OXT.js";import"./chunk-VBYTSXUA.js";import"./chunk-4JQNLXHD.js";import{a as qt}from"./chunk-EDFYBFRY.js";import"./chunk-HCZMPLJU.js";import"./chunk-BPDXJVZ2.js";import"./chunk-XCK6F3VT.js";import{a as kt}from"./chunk-SRO5SYC3.js";import"./chunk-I3ONU5H4.js";import"./chunk-34Z7KJYM.js";import"./chunk-DL7A26HC.js";import{b as Lt}from"./chunk-3NG6G7DU.js";import{b as At}from"./chunk-6RIQ7ZPY.js";import{b as wt}from"./chunk-6KAN7QFK.js";import{b as Ot}from"./chunk-I5DMEMR4.js";import"./chunk-DDGV2SYP.js";import"./chunk-4PLUQBVO.js";import{a as Nt,b as Pt,c as Bt}from"./chunk-WGGER5HX.js";import"./chunk-DL4SMTXP.js";import"./chunk-V4GBUP5U.js";import{A as j,C as H,E as St,H as ue,I as de,J as fe,K as xt,L as _e,M as Ce,N as Dt,O as he,P as ge,Q as Rt,R as ve,S as Se,T as Et,U as xe,V as De,W as z,Y as Re,_ as bt,a as nt,aa as Tt,b as oe,ba as Ee,c as B,ca as It,ea as be,f as pe,ha as Q,i as U,j as gt,ja as G,k as V,q as vt}from"./chunk-H5SZDBVN.js";import{b as ft,c as _t,d as ht}from"./chunk-XE6VZSAJ.js";import{a as P,b as me}from"./chunk-KX634QZQ.js";import{C as Ke,D as Ze,F as ne,G as et,H as tt,J as it,L as Ct}from"./chunk-3O3IKF6A.js";import{ia as re,ja as N,ma as ce,na as $}from"./chunk-TR4MAYT5.js";import{c as Je,d as We,g as we,h as Ae,j as Xe,p as O,t as k,u as le}from"./chunk-AWIVOLPG.js";import{a as se}from"./chunk-J2LIJEQH.js";import"./chunk-AGIEFCW2.js";import"./chunk-F5F27R7A.js";import{B as dt,C as w,D as A,c as at,e as L,h as rt,i as lt,o as mt,r as st,s as pt,t as ct,u as ut}from"./chunk-6EN4EXPL.js";import{$ as Ue,$a as He,$b as _,B as ke,Cb as u,Fa as v,Fb as ze,Fc as p,Gb as s,Gc as c,Hc as J,Ib as Qe,Ka as T,N as Ne,Na as je,Nd as ot,Pc as ie,Pd as ae,Q as Pe,Qb as a,Rb as o,Sb as C,Ta as D,Tb as h,Ua as R,Ub as g,W as Be,Wb as E,Zb as x,cc as I,cd as Ge,dd as M,fa as Ve,fc as K,gc as Z,ha as $e,hc as ee,hd as Ye,mc as m,nc as S,ob as i,oc as d,p as W,pb as b,pd as q,wa as Le,xc as F,yc as te,zb as X,zc as y}from"./chunk-SXJN2XK6.js";var Y=function(e){return e[e.CREATED=0]="CREATED",e[e.UPLOADED=1]="UPLOADED",e[e.APPROVED=2]="APPROVED",e[e.REJECTED=3]="REJECTED",e}(Y||{});var Qt=(()=>{class e{transform(t,...r){if(t===Y.CREATED)return"CREATED";if(t===Y.APPROVED)return"APPROVED";if(t===Y.REJECTED)return"REJECTED";if(t===Y.UPLOADED)return"UPLOADED"}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275pipe=je({name:"fileRequestStatus",type:e,pure:!0,standalone:!0})}}return e})();var ri=e=>({"margin-right.px":e}),li=e=>({"margin-left.px":e}),mi=e=>({color:e});function si(e,n){e&1&&(a(0,"div",30),m(1),p(2,"translate"),o()),e&2&&(i(),d(" ",c(2,1,"NAME_IS_REQUIRED")," "))}function pi(e,n){if(e&1&&(a(0,"div"),u(1,si,3,3,"div",15),o()),e&2){let t,r=_();i(),s("ngIf",(t=r.documentForm.get("name").errors)==null?null:t.required)}}function ci(e,n){if(e&1&&(a(0,"div")(1,"b"),m(2),o()()),e&2){let t=_().$implicit;i(2),d(" ",t.name,"")}}function ui(e,n){if(e&1&&(a(0,"div"),m(1),o()),e&2){let t=_().$implicit;i(),d(" ",t.name," ")}}function di(e,n){if(e&1&&(a(0,"ng-option",17)(1,"div",31),u(2,ci,3,1,"div",10)(3,ui,2,1,"div",10),o()()),e&2){let t=n.$implicit,r=_();s("value",t.id),i(),s("ngStyle",r.direction==="rtl"?y(4,ri,t.deafLevel*20):y(6,li,t.deafLevel*20)),i(),s("ngIf",!t.parentId),i(),s("ngIf",t.parentId)}}function fi(e,n){if(e&1){let t=E();a(0,"div",32)(1,"button",33),x("click",function(){D(t);let l=_();return R(l.onAddCategory())}),C(2,"i-feather",34),o()()}}function _i(e,n){e&1&&(a(0,"div",30),m(1),p(2,"translate"),o()),e&2&&(i(),d(" ",c(2,1,"CATEGORY_IS_REQUIRED")," "))}function Ci(e,n){e&1&&(a(0,"ng-option",17),m(1),p(2,"translate"),o()),e&2&&(s("value","s3"),i(),S(c(2,2,"S3")))}function hi(e,n){if(e&1&&(a(0,"ng-option",17)(1,"span",35),m(2),o()()),e&2){let t=n.$implicit;s("value",t.id),i(),s("ngStyle",y(3,mi,t==null?null:t.colorCode)),i(),d(" ",t.name," ")}}function gi(e,n){if(e&1&&(a(0,"ng-option",17)(1,"span"),m(2),o()()),e&2){let t=n.$implicit;s("value",t.id),i(2),d(" ",t.companyName," ")}}function vi(e,n){e&1&&(a(0,"label"),m(1),p(2,"translate"),o()),e&2&&(i(),d(" ",c(2,1,"META_TAGS")," "))}function Si(e,n){if(e&1){let t=E();a(0,"button",43),x("click",function(){D(t);let l=_(2);return R(l.onAddAnotherMetaTag())}),C(1,"i-feather",44),o()}}function xi(e,n){if(e&1){let t=E();a(0,"button",45),x("click",function(){D(t);let l=_().index,f=_();return R(f.onDeleteMetaTag(l))}),C(1,"i-feather",46),o()}}function Di(e,n){if(e&1){let t=E();a(0,"div",36),h(1,37),u(2,vi,3,3,"label",10),a(3,"div",6)(4,"div",38)(5,"input",39),x("change",function(l){let f=D(t).index,qe=_();return R(qe.onMetatagChange(l,f))}),o()(),a(6,"div",40),u(7,Si,2,0,"button",41)(8,xi,2,0,"button",42),o()(),g(),o()}if(e&2){let t=n.index;i(),s("formGroupName",t),i(),s("ngIf",t==0),i(5),s("ngIf",t==0),i(),s("ngIf",t!=0)}}var Kt=(()=>{class e extends re{get documentMetaTagsArray(){return this.documentForm.get("documentMetaTags")}constructor(t,r,l,f,qe,ei,ti,ii,ni,oi){super(),this.fb=t,this.cd=r,this.data=l,this.dialogRef=f,this.commonService=qe,this.securityService=ei,this.toastrService=ti,this.fileRequestDocumentService=ii,this.translationService=ni,this.mtDialog=oi,this.extension="",this.isS3Supported=!1,this.clientStore=v(wt),this.allowFileExtension=[],this.onSaveDocument=new He,this.categoryStore=v(Ot),this.documentStatusStore=v(At)}ngOnInit(){this.extension=this.data.url.split(".")[1],this.createDocumentForm(),this.getCompanyProfile(),this.getLangDir(),this.documentMetaTagsArray.push(this.buildDocumentMetaTag())}getLangDir(){this.sub$.sink=this.translationService.lanDir$.subscribe(t=>this.direction=t)}getCompanyProfile(){this.securityService.companyProfile.subscribe(t=>{t&&(this.isS3Supported=t.location=="s3")})}createDocumentForm(){this.documentForm=this.fb.group({name:[this.data.name,[L.required]],description:[""],categoryId:["",[L.required]],statusId:[""],storageSettingId:[""],clientId:[""],url:[this.data.url,[L.required]],extension:[this.extension,[L.required]],documentMetaTags:this.fb.array([])}),this.companyProfileSubscription()}companyProfileSubscription(){this.securityService.companyProfile.subscribe(t=>{t&&this.documentForm.get("storageSettingId").setValue(t.location??"local")})}buildDocumentMetaTag(){return this.fb.group({id:[""],documentId:[""],metatag:[""]})}onMetatagChange(t,r){if(!this.documentMetaTagsArray.at(r).get("metatag").value)return;let f=this.documentMetaTagsArray.at(r).get("metatag");f.setValidators([L.required]),f.updateValueAndValidity()}editDocmentMetaData(t){return this.fb.group({id:[t.id],documentId:[t.documentId],metatag:[t.metatag]})}saveDocument(){if(this.documentForm.valid){let t=this.buildDocumentObject();this.sub$.sink=this.fileRequestDocumentService.approveDocument(t).subscribe(()=>{this.toastrService.success(this.translationService.getValue("FILE_APPROVE_SUCCESSFULLY")),this.dialogRef.close(t.categoryId)})}else this.markFormGroupTouched(this.documentForm)}onAddAnotherMetaTag(){let t={id:"",documentId:this.document&&this.document.id?this.document.id:"",metatag:""};this.documentMetaTagsArray.insert(0,this.editDocmentMetaData(t))}onDeleteMetaTag(t){this.documentMetaTagsArray.removeAt(t)}closeDialog(){this.dialogRef.close()}addDocumentTrail(t){let r={documentId:t,operationName:ft.Created.toString()};this.sub$.sink=this.commonService.addDocumentAuditTrail(r).subscribe(l=>{this.dialogRef.close(!0)})}markFormGroupTouched(t){Object.values(t.controls).forEach(r=>{r.markAsTouched(),r.controls&&this.markFormGroupTouched(r)})}buildDocumentObject(){let t=this.documentMetaTagsArray.value;return{categoryId:this.documentForm.get("categoryId").value??"",statusId:this.documentForm.get("statusId").value??"",clientId:this.documentForm.get("clientId").value??"",storageSettingId:this.documentForm.get("storageSettingId").value??"",description:this.documentForm.get("description").value,name:this.documentForm.get("name").value,fileRequestId:this.data.fileRequestId,fileRequestDocumentId:this.data.id,url:this.data.url,documentMetaDatas:[...t],extension:this.data.url.split(".")[1]}}onAddCategory(){this.mtDialog.open(kt,{width:"400px"}).afterClosed().subscribe(r=>{r&&setTimeout(()=>{this.documentForm.get("categoryId").setValue(this.categoryStore.currentCategoryId())},1e3)})}static{this.\u0275fac=function(r){return new(r||e)(b(dt),b(ie),b(Ze),b(Ke),b(Ct),b(se),b(O),b(Fe),b(N),b(ne))}}static{this.\u0275cmp=T({type:e,selectors:[["app-approve-document"]],outputs:{onSaveDocument:"onSaveDocument"},standalone:!0,features:[X,F],decls:72,vars:52,consts:[[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],["code","ADD_DOCUMENT"],["mat-icon-button","",1,"ms-auto",3,"click"],["name","x",1,"close-icon","text-danger"],[3,"formGroup"],[1,"row"],[1,"col-md-4"],[1,"form-group"],["formControlName","name","type","text",1,"form-control"],[4,"ngIf"],[1,"input-group"],["formControlName","categoryId",1,"flex-grow-1",3,"placeholder","clearable"],[3,"value",4,"ngFor","ngForOf"],["class","input-group-append",4,"hasClaim"],["class","text-danger",4,"ngIf"],["formControlName","storageSettingId",3,"clearable"],[3,"value"],[3,"value",4,"ngIf"],[1,"col-md-4","mt-2"],["formControlName","statusId",3,"searchable","placeholder"],["formControlName","clientId",3,"placeholder"],["class","","formArrayName","documentMetaTags",4,"ngFor","ngForOf"],[1,"col-md-12","mt-2"],["formControlName","description",1,"form-control"],[1,"mt-2","col-md-12"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],[1,"text-danger"],[1,"country-item",3,"ngStyle"],[1,"input-group-append"],["type","button","aria-label","Add category",1,"btn","btn-primary","add-category-button",3,"click"],["name","plus",1,"small-icon"],[3,"ngStyle"],["formArrayName","documentMetaTags",1,""],[3,"formGroupName"],[1,"form-group","col-md","mb-1","col"],["formControlName","metatag","type","text",1,"form-control",3,"change"],[1,"form-group","col-md-auto","col-auto","mb-1","pl-3","ps-0"],["class","btn btn-success","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-danger","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],["name","plus-circle",1,"small-icon"],["type","button",1,"btn","btn-outline-danger",3,"click"],["name","trash-2",1,"small-icon"]],template:function(r,l){r&1&&(a(0,"div",0)(1,"span",1),m(2),p(3,"translate"),C(4,"app-page-help-text",2),o(),a(5,"button",3),x("click",function(){return l.closeDialog()}),C(6,"i-feather",4),o()(),a(7,"mat-dialog-content")(8,"form",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"label"),m(13),p(14,"translate"),o(),C(15,"input",9),u(16,pi,2,1,"div",10),o()(),a(17,"div",7)(18,"div",8)(19,"label"),m(20),p(21,"translate"),o(),a(22,"div",11)(23,"ng-select",12),p(24,"translate"),u(25,di,4,8,"ng-option",13),o(),u(26,fi,3,0,"div",14),o(),u(27,_i,3,3,"div",15),o()(),a(28,"div",7)(29,"div",8)(30,"label"),m(31),p(32,"translate"),o(),a(33,"ng-select",16)(34,"ng-option",17),m(35),p(36,"translate"),o(),u(37,Ci,3,4,"ng-option",18),o()()(),a(38,"div",19)(39,"label"),m(40),p(41,"translate"),o(),a(42,"ng-select",20),p(43,"translate"),u(44,hi,3,5,"ng-option",13),o()(),a(45,"div",19)(46,"div",8)(47,"label"),m(48),p(49,"translate"),o(),a(50,"ng-select",21),p(51,"translate"),u(52,gi,3,2,"ng-option",13),o()()(),a(53,"div",19),u(54,Di,9,4,"div",22),o(),a(55,"div",23)(56,"div",8)(57,"label"),m(58),p(59,"translate"),o(),a(60,"textarea",24),m(61,"            "),o()()()(),a(62,"div",6)(63,"div",25)(64,"button",26),x("click",function(){return l.saveDocument()}),C(65,"i-feather",27),m(66),p(67,"translate"),o(),a(68,"button",28),x("click",function(){return l.closeDialog()}),C(69,"i-feather",29),m(70),p(71,"translate"),o()()()()()),r&2&&(i(2),S(c(3,26,"APPROVE_ADD_DOCUMENT")),i(6),s("formGroup",l.documentForm),i(5),S(c(14,28,"NAME")),i(3),s("ngIf",l.documentForm.get("name").touched&&l.documentForm.get("name").errors),i(4),S(c(21,30,"CATEGORY")),i(3),I("placeholder",c(24,32,"CATEGORY")),s("clearable",!1),i(2),s("ngForOf",l.categoryStore.categories()),i(),s("hasClaim","DOCUMENT_CATEGORY_MANAGE_DOCUMENT_CATEGORY"),i(),s("ngIf",l.documentForm.get("categoryId").touched&&l.documentForm.get("categoryId").hasError("required")),i(4),S(c(32,34,"STORAGE")),i(2),s("clearable",!1),i(),s("value","local"),i(),S(c(36,36,"LOCAL")),i(2),s("ngIf",l.isS3Supported),i(3),S(c(41,38,"DOCUMENT_STATUS")),i(2),I("placeholder",c(43,40,"NONE")),s("searchable",!0),i(2),s("ngForOf",l.documentStatusStore.statusList()),i(4),S(c(49,42,"CLIENT")),i(2),I("placeholder",c(51,44,"CLIENT")),i(2),s("ngForOf",l.clientStore.clients()),i(2),s("ngForOf",l.documentMetaTagsArray.controls),i(4),S(c(59,46,"DESCRIPTION")),i(8),d(" ",c(67,48,"SAVE"),""),i(4),d(" ",c(71,50,"CANCEL"),""))},dependencies:[q,Ge,M,Ye,G,mt,at,rt,lt,st,ut,pt,ct,ce,P,B,Q,k,A,$t,z,it,et,tt,Tt,St,H,Lt,w,U,$,V,vt,j,Vt,jt,Bt,Pt,Nt,oe]})}}return e})();function bi(e,n){e&1&&(a(0,"th",22),m(1),p(2,"translate"),o()),e&2&&(i(),d("",c(2,1,"ACTION")," "))}function Ti(e,n){if(e&1){let t=E();a(0,"button",26),x("click",function(){D(t);let l=_(2).$implicit,f=_();return R(f.approveDocument(l))}),C(1,"i-feather",27),a(2,"span",28),m(3),p(4,"translate"),o()()}e&2&&(i(3),d(" ",c(4,1,"APPROVE"),""))}function Ii(e,n){if(e&1&&(h(0),u(1,Ti,5,3,"button",25),g()),e&2){let t=_().$implicit,r=_();i(),s("ngIf",t.fileRequestDocumentStatus===r.fileRequestDocumentStatus.PENDING)}}function Fi(e,n){if(e&1){let t=E();a(0,"button",30),x("click",function(){D(t);let l=_(2).$implicit,f=_();return R(f.rejectFileRequestDocument(l))}),C(1,"i-feather",31),a(2,"span",28),m(3),p(4,"translate"),o()()}e&2&&(i(3),d(" ",c(4,1,"REJECT"),""))}function yi(e,n){if(e&1&&(h(0),u(1,Fi,5,3,"button",29),g()),e&2){let t=_().$implicit,r=_();i(),s("ngIf",t.fileRequestDocumentStatus===r.fileRequestDocumentStatus.PENDING)}}function Mi(e,n){e&1&&(a(0,"td",23),u(1,Ii,2,1,"ng-container",24)(2,yi,2,1,"ng-container",24),o()),e&2&&(i(),s("hasClaim","FILE_REQUEST_APPROVE_FILE_REQUEST"),i(),s("hasClaim","FILE_REQUEST_REJECT_FILE_REQUEST"))}function qi(e,n){e&1&&(a(0,"th",32),m(1),p(2,"translate"),o()),e&2&&(i(),S(c(2,1,"FILE_NAME")))}function Li(e,n){if(e&1){let t=E();a(0,"td",23)(1,"a",33),x("click",function(){let l=D(t).$implicit,f=_();return R(f.onDocumentView(l))}),m(2),o()()}if(e&2){let t=n.$implicit;i(2),S(t.name)}}function wi(e,n){e&1&&(a(0,"th",32),m(1),p(2,"translate"),o()),e&2&&(i(),S(c(2,1,"DOCUMENT_STATUS")))}function Ai(e,n){if(e&1&&(a(0,"td",34),p(1,"fileRequestDocumentStatus"),m(2),p(3,"fileRequestDocumentStatus"),p(4,"translate"),o()),e&2){let t=n.$implicit;s("appStatusColor",c(1,2,t.fileRequestDocumentStatus)),i(2),d(" ",c(4,6,c(3,4,t.fileRequestDocumentStatus))," ")}}function Oi(e,n){e&1&&(a(0,"th",32),m(1),p(2,"translate"),o()),e&2&&(i(),S(c(2,1,"UPLOADED_DATE")))}function ki(e,n){if(e&1&&(a(0,"td",23),m(1),p(2,"utcToLocalTime"),o()),e&2){let t=n.$implicit;i(),S(J(2,1,t.createdDate,"full"))}}function Ni(e,n){e&1&&(a(0,"th",32),m(1),p(2,"translate"),o()),e&2&&(i(),S(c(2,1,"REASON")))}function Pi(e,n){if(e&1&&(a(0,"td",23),m(1),o()),e&2){let t=n.$implicit;i(),S(t.reason)}}function Bi(e,n){e&1&&(a(0,"tr")(1,"td",35)(2,"div",36)(3,"b"),m(4),p(5,"translate"),o()()()()),e&2&&(i(4),d(" ",c(5,1,"NO_DATA_FOUND"),""))}function Ui(e,n){e&1&&C(0,"tr",37)}function Vi(e,n){e&1&&C(0,"tr",38)}var Zt=(()=>{class e{constructor(){this.fileRequestDocuments=[],this.fileRequestDocumentStatus=Ft,this.displayedColumns=["action","fileUrl","status","createdDate","reason"],this.securityService=v(se),this.fileRequestDocumentService=v(Fe),this.overlay=v(_t),this.commonDialogService=v(be),this.translationService=v(N),this.toastrService=v(O),this.dialog=v(ne)}ngOnInit(){this.getFileRequestDocuments()}onDocumentView(t){let l=(t?.url.split("."))[1],f={documentId:t.id,name:t.name,extension:l,isVersion:!1,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1,isFromFileRequest:!0};this.overlay.open(ht,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:f})}getFileRequestDocuments(){let t=this.fileRequestInfo?.id;t&&this.fileRequestDocumentService.getFileRequestDocument(t).subscribe({next:r=>{Array.isArray(r)&&r.length>0&&(this.fileRequestDocuments=r)},error:r=>{}})}approveDocument(t){this.dialog.open(Kt,{data:t,maxWidth:"60vw",maxHeight:"80vh"}).afterClosed().subscribe(l=>{l&&this.getFileRequestDocuments()})}rejectFileRequestDocument(t){this.commonDialogService.deleteConfirmWithCommentDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_REJECT")} ${t.name} ?`).subscribe(r=>{r&&(t.reason=r.comment,this.fileRequestDocumentService.rejectFileRequestDocument(t).subscribe({next:l=>{l&&(this.toastrService.success(this.translationService.getValue("FILE_REJECTED_SUCCESSFULLY")),this.getFileRequestDocuments())}}))})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=T({type:e,selectors:[["app-file-request-document-list"]],inputs:{fileRequestInfo:"fileRequestInfo"},standalone:!0,features:[F],decls:31,vars:7,consts:[[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],["code","FILE_REQUEST_UPLOADED_DOCUMENTS"],[1,"card"],[1,"body"],[1,"table-responsive"],[1,"grid-height-large"],["mat-table","",3,"dataSource"],["matColumnDef","action"],["class","table-column-fix-300","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fileUrl"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-cell","",3,"appStatusColor",4,"matCellDef"],["matColumnDef","createdDate"],["matColumnDef","reason"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"table-column-fix-300"],["mat-cell",""],[4,"hasClaim"],["class","btn btn-success btn-sm me-2",3,"click",4,"ngIf"],[1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","check",1,"small-icon"],[1,"d-none","d-sm-inline"],["class","btn btn-danger btn-sm","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["name","x",1,"small-icon"],["mat-header-cell",""],[1,"doc-link",3,"click"],["mat-cell","",3,"appStatusColor"],["colspan","5"],[1,"m-2"],["mat-header-row",""],["mat-row",""]],template:function(r,l){r&1&&(a(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"span",3),m(5),p(6,"translate"),C(7,"app-page-help-text",4),o()()(),a(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"table",9),h(13,10),u(14,bi,3,3,"th",11)(15,Mi,3,2,"td",12),g(),h(16,13),u(17,qi,3,3,"th",14)(18,Li,3,1,"td",12),g(),h(19,15),u(20,wi,3,3,"th",14)(21,Ai,5,8,"td",16),g(),h(22,17),u(23,Oi,3,3,"th",14)(24,ki,3,4,"td",12),g(),h(25,18),u(26,Ni,3,3,"th",14)(27,Pi,2,1,"td",12),g(),u(28,Bi,6,3,"tr",19)(29,Ui,1,0,"tr",20)(30,Vi,1,0,"tr",21),o()()()()()()()),r&2&&(i(5),d(" ",c(6,5,"UPLOADED_DOCUMENTS")," "),i(7),s("dataSource",l.fileRequestDocuments),i(17),s("matHeaderRowDef",l.displayedColumns)("matHeaderRowDefSticky",!0),i(),s("matRowDefColumns",l.displayedColumns))},dependencies:[w,le,k,q,M,ae,$,A,me,P,V,Te,G,ue,fe,ge,_e,de,ve,Ce,he,Se,xe,De,B,Q,pe,j,U,yt,Ie,z,H]})}}return e})();var ye=class extends qt{constructor(){super(...arguments),this.id="",this.subject=""}};var Me=class{get count(){return this._count}constructor(n){this.fileRequestService=n,this.fileRequestSubject=new W([]),this.responseHeaderSubject=new W(null),this.loadingSubject=new W(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this.responseHeaderSubject.asObservable()}connect(){return this.fileRequestSubject.asObservable()}disconnect(){this.fileRequestSubject.complete(),this.loadingSubject.complete()}loadFileRequests(n){this.loadingSubject.next(!0),this.fileRequestService.getFileRequests(n).pipe(Be(()=>ke([])),$e(()=>this.loadingSubject.next(!1))).subscribe(t=>{let r=new Ut;r.pageSize=parseInt(t.headers.get("pageSize")),r.totalCount=parseInt(t.headers.get("totalCount")),r.skip=parseInt(t.headers.get("skip")),this.responseHeaderSubject.next(r);let l=[...t.body];this._count=l.length,this.fileRequestSubject.next(l)})}};var $i=["input"],ji=()=>["expandedDetail"],Hi=()=>["/file-request/manage"],zi=e=>["/file-request/manage",e],Qi=()=>[10,20,30];function Gi(e,n){e&1&&(a(0,"button",43),C(1,"i-feather",44),m(2),p(3,"translate"),o()),e&2&&(s("routerLink",te(4,Hi)),i(2),d(" ",c(3,2,"ADD_FILE_REQUEST")," "))}function Yi(e,n){e&1&&(a(0,"th",45),m(1),p(2,"translate"),o()),e&2&&(i(),d(" ",c(2,1,"ACTION")," "))}function Ji(e,n){e&1&&(a(0,"mat-icon"),m(1,"chevron_right"),o())}function Wi(e,n){e&1&&(a(0,"mat-icon"),m(1,"expand_more"),o())}function Xi(e,n){if(e&1&&(a(0,"button",43),C(1,"i-feather",55)(2,"span",54),o()),e&2){let t=_().$implicit;s("routerLink",y(1,zi,t.id))}}function Ki(e,n){if(e&1){let t=E();a(0,"button",56),x("click",function(){D(t);let l=_().$implicit,f=_();return R(f.deleteFileRequest(l))}),C(1,"i-feather",57)(2,"span",54),o()}}function Zi(e,n){if(e&1){let t=E();a(0,"td",46)(1,"div",47)(2,"button",48),x("click",function(){let l=D(t).$implicit,f=_();return R(f.toggleRow(l))}),u(3,Ji,2,0,"mat-icon",49)(4,Wi,2,0,"mat-icon",49),o(),u(5,Xi,3,3,"button",8)(6,Ki,3,0,"button",50),a(7,"div",51)(8,"button",52),x("click",function(){let l=D(t).$implicit,f=_();return R(f.copyToClipboard(l.id))}),C(9,"i-feather",53)(10,"span",54),o()()()()}if(e&2){let t=n.$implicit,r=_();i(3),s("ngIf",t!=r.expandedElement),i(),s("ngIf",t==r.expandedElement),i(),s("hasClaim","FILE_REQUEST_UPDATE_FILE_REQUEST"),i(),s("hasClaim","FILE_REQUEST_DELETE_FILE_REQUEST")}}function en(e,n){if(e&1&&(h(0),a(1,"div",59)(2,"div",60),C(3,"app-file-request-document-list",61),o()(),g()),e&2){let t=_().$implicit,r=_();i(),s("@detailExpand",t==r.expandedElement?"expanded":"collapsed"),i(2),s("fileRequestInfo",t)}}function tn(e,n){if(e&1&&(a(0,"td",58),u(1,en,4,2,"ng-container",49),o()),e&2){let t=n.$implicit,r=_();ze("colspan",r.displayedColumns.length),i(),s("ngIf",t==r.expandedElement)}}function nn(e,n){e&1&&(a(0,"th",62),m(1),p(2,"translate"),o()),e&2&&(i(),d(" ",c(2,1,"SUBJECT")," "))}function on(e,n){if(e&1&&(a(0,"td",58),m(1),o()),e&2){let t=n.$implicit;i(),d(" ",t.subject," ")}}function an(e,n){e&1&&(a(0,"th",62),m(1),p(2,"translate"),o()),e&2&&(i(),d(" ",c(2,1,"EMAIL")," "))}function rn(e,n){if(e&1&&(a(0,"td",58),m(1),o()),e&2){let t=n.$implicit;i(),d(" ",t.email," ")}}function ln(e,n){e&1&&(a(0,"th",62),m(1),p(2,"translate"),o()),e&2&&(i(),d(" ",c(2,1,"MAXIMUM_FILE_SIZE_UPLOAD")," "))}function mn(e,n){if(e&1&&C(0,"td",63),e&2){let t=n.$implicit;s("appFileSizeLabel",t.sizeInMb)}}function sn(e,n){e&1&&(a(0,"th",62),m(1),p(2,"translate"),o()),e&2&&(i(),d(" ",c(2,1,"MAXIMUM_DOCUMENT_UPLOAD")," "))}function pn(e,n){if(e&1&&(a(0,"td",58),m(1),o()),e&2){let t=n.$implicit;i(),d(" ",t.maxDocument," ")}}function cn(e,n){e&1&&(a(0,"th",62),m(1),p(2,"translate"),o()),e&2&&(i(),d(" ",c(2,1,"ALLOW_FILE_EXTENSION")," "))}function un(e,n){if(e&1&&(a(0,"td",58),m(1),o()),e&2){let t=n.$implicit;i(),d(" ",t.allowExtension," ")}}function dn(e,n){e&1&&(a(0,"th",62),m(1),p(2,"translate"),o()),e&2&&(i(),d(" ",c(2,1,"STATUS")," "))}function fn(e,n){if(e&1&&(a(0,"td",64),p(1,"fileRequestStatus"),m(2),p(3,"fileRequestStatus"),p(4,"translate"),o()),e&2){let t=n.$implicit;s("appStatusColor",c(1,2,t.fileRequestStatus)),i(2),d(" ",c(4,6,c(3,4,t.fileRequestStatus))," ")}}function _n(e,n){e&1&&(a(0,"th",62),m(1),p(2,"translate"),o()),e&2&&(i(),d(" ",c(2,1,"CREATED_BY")," "))}function Cn(e,n){if(e&1&&(a(0,"td",58),m(1),o()),e&2){let t=n.$implicit;i(),d(" ",t.createdByName," ")}}function hn(e,n){e&1&&(a(0,"th",62),m(1),p(2,"translate"),o()),e&2&&(i(),d(" ",c(2,1,"CREATED_DATE")," "))}function gn(e,n){if(e&1&&(a(0,"td",58),m(1),p(2,"utcToLocalTime"),o()),e&2){let t=n.$implicit;i(),d(" ",J(2,1,t.createdDate,"full")," ")}}function vn(e,n){e&1&&(a(0,"th",62),m(1),p(2,"translate"),o()),e&2&&(i(),d(" ",c(2,1,"LINK_EXPIRATION")," "))}function Sn(e,n){if(e&1&&(a(0,"td",58),m(1),p(2,"utcToLocalTime"),o()),e&2){let t=n.$implicit;i(),d(" ",J(2,1,t.linkExpiryTime,"full")," ")}}function xn(e,n){if(e&1&&(a(0,"td",65),C(1,"mat-paginator",66),o()),e&2){let t=_();i(),s("length",t.fileRequestResource.totalCount)("pageSize",t.fileRequestResource.pageSize)("pageSizeOptions",te(3,Qi))}}function Dn(e,n){e&1&&(a(0,"tr")(1,"td",67)(2,"div",68)(3,"b"),m(4),p(5,"translate"),o()()()()),e&2&&(i(4),d(" ",c(5,1,"NO_DATA_FOUND"),""))}function Rn(e,n){e&1&&C(0,"tr",69)}function En(e,n){if(e&1&&C(0,"tr",70),e&2){let t=n.$implicit;Qe("bg-warning1",t.status===1)}}function bn(e,n){e&1&&C(0,"tr",71)}function Tn(e,n){e&1&&C(0,"tr",72)}var Aa=(()=>{class e extends re{constructor(){super(),this.displayedColumns=["action","subject","email","sizeInMb","maxDocument","fileExtension","status","createdBy","createdDate","linkExpiryTime"],this.baseUrl=`${window.location.protocol}//${window.location.host}/file-requests/preview/`,this.footerToDisplayed=["footer"],this.fileRequestService=v(Mt),this.commonDialogService=v(be),this.translationService=v(N),this.toastrService=v(O),this.cd=v(ie),this.isExpanded=!1,this.isExpandedRow=(t,r)=>r===this.expandedElement,this.fileRequestResource=new ye,this.fileRequestResource.pageSize=10,this.fileRequestResource.orderBy="createdDate desc"}ngOnInit(){this.dataSource=new Me(this.fileRequestService),this.dataSource.loadFileRequests(this.fileRequestResource),this.getResourceParameter()}ngAfterViewInit(){this.sort&&this.paginator&&(this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=Pe(this.sort.sortChange,this.paginator.page).pipe(Le(()=>{this.fileRequestResource.pageSize=this.paginator.pageSize,this.fileRequestResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.fileRequestResource.pageSize=this.paginator.pageSize,this.fileRequestResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadFileRequests(this.fileRequestResource)})).subscribe(),this.sub$.sink=Ne(this.input.nativeElement,"keyup").pipe(Ue(1e3),Ve(),Le(()=>{this.paginator.pageIndex=0,this.fileRequestResource.skip=0,this.fileRequestResource.subject=this.input.nativeElement.value,this.dataSource.loadFileRequests(this.fileRequestResource)})).subscribe())}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(t=>{t&&(this.fileRequestResource.pageSize=t.pageSize,this.fileRequestResource.skip=t.skip,this.fileRequestResource.totalCount=t.totalCount)})}copyToClipboard(t){let r=`${this.baseUrl}${t}`;navigator.clipboard.writeText(r).then(()=>{this.toastrService.success(this.translationService.getValue("LINK_COPIED_TO_CLIPBOARD"))}).catch(()=>{this.toastrService.error(this.translationService.getValue("FAILED_TO_COPY_LINK"))})}deleteFileRequest(t){this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")} ${[t.subject]}`).subscribe(r=>{r&&this.fileRequestService.deleteFileRequest(t.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("FILE_REQUEST_DELETED_SUCCESSFULLY")),this.dataSource.loadFileRequests(this.fileRequestResource)})})}toggleRow(t){this.isExpanded=this.expandedElement!=t,this.expandedElement=this.expandedElement===t?null:t,this.cd.detectChanges()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=T({type:e,selectors:[["app-file-request-list"]],viewQuery:function(r,l){if(r&1&&(K(Ee,5),K(Re,5),K($i,5)),r&2){let f;Z(f=ee())&&(l.paginator=f.first),Z(f=ee())&&(l.sort=f.first),Z(f=ee())&&(l.input=f.first)}},standalone:!0,features:[X,F],decls:63,vars:15,consts:[["input",""],[1,"content"],[1,"content-block"],[1,"row","align-items-center"],[1,"col","mb-2"],[1,"mb-0","page-title"],["code","MANAGE_FILE_REQUEST"],[1,"col-auto","d-flex","justify-content-end","mb-2"],["class","btn btn-success btn-sm me-2",3,"routerLink",4,"hasClaim"],[1,"row"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body"],[1,"m-2","col-sm-5"],[1,"form-control",3,"placeholder"],[1,"col"],[1,"table-responsive"],[1,"grid-height-medium"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc","multiTemplateDataRows","",3,"dataSource"],["matColumnDef","action"],["class","table-column-fix-200","mat-header-cell","",4,"matHeaderCellDef"],["class","table-column-fix-200","mat-cell","",4,"matCellDef"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["matColumnDef","subject"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","email"],["matColumnDef","sizeInMb"],["mat-cell","",3,"appFileSizeLabel",4,"matCellDef"],["matColumnDef","maxDocument"],["matColumnDef","fileExtension"],["matColumnDef","status"],["mat-cell","",3,"appStatusColor",4,"matCellDef"],["matColumnDef","createdBy"],["matColumnDef","createdDate"],["matColumnDef","linkExpiryTime"],["matColumnDef","footer"],["mat-footer-cell","","colspan","11",4,"matFooterCellDef"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"bg-warning1",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],[1,"btn","btn-success","btn-sm","me-2",3,"routerLink"],["name","plus",1,"small-icon"],["mat-header-cell","",1,"table-column-fix-200"],["mat-cell","",1,"table-column-fix-200"],[1,"d-flex","align-items-center"],["mat-icon-button","",1,"me-3",3,"click"],[4,"ngIf"],["class","btn btn-danger btn-sm me-2","type","button",3,"click",4,"hasClaim"],["matTooltip","Copy","role","button",1,"input-group-append"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["name","copy",1,"small-icon"],[1,"d-none","d-sm-inline"],["name","edit",1,"small-icon"],["type","button",1,"btn","btn-danger","btn-sm","me-2",3,"click"],["name","trash",1,"small-icon"],["mat-cell",""],[1,"example-element-detail"],[1,"inner-table","mat-elevation-z8"],[3,"fileRequestInfo"],["mat-header-cell",""],["mat-cell","",3,"appFileSizeLabel"],["mat-cell","",3,"appStatusColor"],["mat-footer-cell","","colspan","11"],[3,"length","pageSize","pageSizeOptions"],["colspan","11"],[1,"m-2"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],["mat-row","",1,"example-detail-row"]],template:function(r,l){r&1&&(a(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"span",5),m(5),p(6,"translate"),C(7,"app-page-help-text",6),o()(),a(8,"div",7),u(9,Gi,4,5,"button",8),o()(),a(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",9)(15,"div",13),C(16,"input",14,0),p(18,"translate"),o()(),a(19,"div",9)(20,"div",15)(21,"div",16)(22,"div",17)(23,"table",18),h(24,19),u(25,Yi,3,3,"th",20)(26,Zi,11,4,"td",21),g(),h(27,22),u(28,tn,2,2,"td",23),g(),h(29,24),u(30,nn,3,3,"th",25)(31,on,2,1,"td",23),g(),h(32,26),u(33,an,3,3,"th",25)(34,rn,2,1,"td",23),g(),h(35,27),u(36,ln,3,3,"th",25)(37,mn,1,1,"td",28),g(),h(38,29),u(39,sn,3,3,"th",25)(40,pn,2,1,"td",23),g(),h(41,30),u(42,cn,3,3,"th",25)(43,un,2,1,"td",23),g(),h(44,31),u(45,dn,3,3,"th",25)(46,fn,5,8,"td",32),g(),h(47,33),u(48,_n,3,3,"th",25)(49,Cn,2,1,"td",23),g(),h(50,34),u(51,hn,3,3,"th",25)(52,gn,3,4,"td",23),g(),h(53,35),u(54,vn,3,3,"th",25)(55,Sn,3,4,"td",23),g(),h(56,36),u(57,xn,2,4,"td",37),g(),u(58,Dn,6,3,"tr",38)(59,Rn,1,0,"tr",39)(60,En,1,2,"tr",40)(61,bn,1,0,"tr",41)(62,Tn,1,0,"tr",42),o()()()()()()()()()()()),r&2&&(i(5),d(" ",c(6,10,"FILE_REQUEST")," "),i(4),s("hasClaim","FILE_REQUEST_CREATE_FILE_REQUEST"),i(7),I("placeholder",c(18,12,"SEARCH_BY_SUBJECT")),i(7),s("dataSource",l.dataSource),i(36),s("matHeaderRowDef",l.displayedColumns)("matHeaderRowDefSticky",!0),i(),s("matRowDefColumns",l.displayedColumns),i(),s("matFooterRowDef",l.footerToDisplayed)("matFooterRowDefSticky",!0),i(),s("matRowDefColumns",te(14,ji)))},dependencies:[w,le,k,q,M,ae,ot,$,ce,A,me,P,V,gt,Te,G,nt,ue,fe,ge,_e,de,ve,xt,Rt,Ce,he,Dt,Se,xe,Et,De,Re,Ee,B,Q,pe,Ht,j,Qt,zt,bt,U,oe,z,H,Ie,Zt,It],styles:["tr.example-detail-row[_ngcontent-%COMP%]{height:0!important}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.inner-table[_ngcontent-%COMP%]{margin:1em;padding:1em;width:100%!important}"],data:{animation:[Je("detailExpand",[Ae("collapsed",we({height:"0px",minHeight:"0"})),Ae("expanded",we({height:"*"})),Xe("expanded <=> collapsed",We("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}})}}return e})();export{Aa as FileRequestListComponent};
