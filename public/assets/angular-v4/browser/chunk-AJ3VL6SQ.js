import{a as Ne}from"./chunk-BCPCIHCF.js";import{e as ye}from"./chunk-BA7IEC3F.js";import{a as Le,b as Re}from"./chunk-MS6J53NI.js";import{d as Oe,l as Fe,m as Be}from"./chunk-BPDXJVZ2.js";import"./chunk-DDGV2SYP.js";import"./chunk-4PLUQBVO.js";import{A as ue,C as _e,H as we,I as he,J as ve,L as xe,M as Ce,O as ge,P as ke,R as Se,S as We,U as Ee,V as be,W as Te,c as pe,d as de,ea as Ie,ha as De,i as se,j as ce,ja as Me,k as A}from"./chunk-H5SZDBVN.js";import{c as re}from"./chunk-XE6VZSAJ.js";import{a as N,b as G}from"./chunk-KX634QZQ.js";import{C as q,D as z,F as J,G as Q,H as Z,J as ee}from"./chunk-3O3IKF6A.js";import{ia as ae,ja as me,ma as fe,na as V}from"./chunk-TR4MAYT5.js";import{t as F,u as B}from"./chunk-AWIVOLPG.js";import"./chunk-J2LIJEQH.js";import{c as le}from"./chunk-AGIEFCW2.js";import"./chunk-F5F27R7A.js";import{C as ne,D as oe}from"./chunk-6EN4EXPL.js";import{$b as _,Cb as f,Fa as v,Fb as D,Fc as d,Gb as c,Gc as s,Hb as U,Hc as X,Jc as L,Ka as T,Nd as te,Pd as ie,Qb as n,Rb as o,Sb as u,Ta as C,Tb as S,Ua as g,Ub as W,Va as I,Wb as E,Xa as H,Zb as b,a as P,cd as R,dd as x,mc as r,nc as h,ob as i,oc as p,pb as k,pc as $,pd as O,wc as j,xc as M,yc as y,zb as K,zc as Y}from"./chunk-SXJN2XK6.js";var He=()=>[1e3,300];function Ke(e,a){e&1&&(I(),n(0,"marker",20),u(1,"path",21),o())}function Ue(e,a){if(e&1&&(I(),n(0,"g",22),u(1,"rect"),n(2,"text",23),r(3),o()()),e&2){let t=a.$implicit;i(),D("width",(t.dimension==null?null:t.dimension.width)||100)("height",(t.dimension==null?null:t.dimension.height)||50)("fill",(t.data==null?null:t.data.color)||"#ccc"),i(),D("fill","#fff")("x",10)("y",((t.dimension==null?null:t.dimension.height)||50)/2),i(),p(" ",t.label," ")}}function je(e,a){if(e&1&&(I(),n(0,"g",25),u(1,"path",26),n(2,"text",27)(3,"textPath",28),r(4),o()()()),e&2){let t=_().$implicit;i(3),U("dominant-baseline",t.dominantBaseline),D("fill",t.status===1?"green":"black")("href","#"+t.id),i(),p(" ",t.label," ")}}function Ye(e,a){if(e&1&&f(0,je,5,5,"g",24),e&2){let t=a.$implicit;c("ngIf",t.source&&t.target)}}function Xe(e,a){if(e&1&&(n(0,"p",17)(1,"strong"),r(2),d(3,"translate"),o(),r(4),o()),e&2){let t=_();i(2),p("",s(3,2,"DESCRIPTION"),":"),i(2),p(" ",t.data.workflowDescription,"")}}function qe(e,a){if(e&1&&(n(0,"p",17),r(1),d(2,"translate"),o()),e&2){let t=_().$implicit;i(),$("",s(2,2,"ASSIGNED_TO_ROLES"),": ",t.assignRoles," ")}}function ze(e,a){if(e&1&&(n(0,"p",17),r(1),d(2,"translate"),o()),e&2){let t=_().$implicit;i(),$("",s(2,2,"ASSIGNED_TO_USERS"),": ",t.assignUsers," ")}}function Je(e,a){if(e&1&&(n(0,"div",12)(1,"div",30),u(2,"i-feather",31),n(3,"div")(4,"span",32),r(5),o()()(),n(6,"div",15)(7,"div",33)(8,"div",34)(9,"span",35),r(10),o()(),n(11,"div",34),u(12,"i-feather",36),o(),n(13,"div",37)(14,"span",35),r(15),o()()(),f(16,qe,3,4,"p",18)(17,ze,3,4,"p",18),o()()),e&2){let t=a.$implicit;i(5),h(t.name),i(5),h(t.fromStepName),i(5),h(t.toStepName),i(),c("ngIf",t==null?null:t.assignRoles),i(),c("ngIf",t==null?null:t.assignUsers)}}function Qe(e,a){if(e&1&&(n(0,"div",11)(1,"div",7)(2,"div",8)(3,"span",14),r(4),d(5,"translate"),o()()(),f(6,Je,18,5,"div",29),o()),e&2){let t=_();i(4),h(s(5,2,"TRANSITIONS")),i(2),c("ngForOf",t.data==null?null:t.data.pendingWorkflowTransitions)}}var Ge=(()=>{class e{constructor(t,m,l,w){this.dialogRef=t,this.data=m,this.clonerService=l,this.overlay=w,this.nodes=[],this.links=[],this.curve=Oe,this.customColors=[],this.nodes=this.clonerService.deepClone(m.nodes),this.links=this.clonerService.deepClone(m.links),this.customColors=this.clonerService.deepClone(m.customColors)}onDocumentCancel(){this.dialogRef.close()}static{this.\u0275fac=function(m){return new(m||e)(k(q),k(z),k(le),k(re))}}static{this.\u0275cmp=T({type:e,selectors:[["app-workflow-graph"]],standalone:!0,features:[j([R,x]),M],decls:35,vars:21,consts:[["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],["mat-icon-button","",1,"ms-auto",3,"click"],["color","warn",1,"close-icon"],[1,"row"],[1,"col"],[1,"graph-container",2,"width","100%"],[1,"ngx-graph-container",3,"nodes","links","view","autoCenter","customColors","curve","layout"],[1,"col-md-6"],[1,"card","shadow","mt-2"],[1,"card-header"],[1,"px-2","h5","font-weight-bold","mb-0"],[1,"card-body"],[1,"col-6"],[1,"h6"],["class","h6",4,"ngIf"],["class","col-md-6",4,"ngIf"],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],[1,"node"],["alignment-baseline","central"],["class","edge",4,"ngIf"],[1,"edge"],["stroke-width","2","marker-end","url(#arrow)",1,"line"],["text-anchor","middle",1,"edge-label"],["startOffset","50%",1,"text-path"],["class","card shadow  mt-2",4,"ngFor","ngForOf"],[1,"card-header","d-flex","align-items-center"],["name","clock",1,"text-primary"],[1,"px-2","h6","font-weight-bold","mb-0"],[1,"d-flex","align-items-center","justify-content-left","mb-2"],[1,"text-center","me-3"],[1,"h6","mb-1"],["name","arrow-right",1,"black"],[1,"text-center"]],template:function(m,l){if(m&1){let w=E();n(0,"div",3)(1,"span",4),r(2),d(3,"limitTo"),o(),n(4,"button",5),b("click",function(){return C(w),g(l.onDocumentCancel())}),n(5,"mat-icon",6),r(6,"close"),o()()(),n(7,"mat-dialog-content")(8,"div",7)(9,"div",8)(10,"div",9)(11,"ngx-graph",10),f(12,Ke,2,0,"ng-template",null,0,L)(14,Ue,4,7,"ng-template",null,1,L)(16,Ye,1,1,"ng-template",null,2,L),o()()()(),n(18,"div",7)(19,"div",11)(20,"div",12)(21,"div",13)(22,"span",14),r(23),d(24,"translate"),o()(),n(25,"div",15)(26,"div",7)(27,"div",16)(28,"p",17)(29,"strong"),r(30),d(31,"translate"),o(),r(32),o(),f(33,Xe,5,4,"p",18),o()()()()(),f(34,Qe,7,4,"div",19),o()()}m&2&&(i(2),p("",X(3,13,l.data.workflowName,"100")," "),i(9),c("nodes",l.nodes)("links",l.links)("view",y(20,He))("autoCenter",!0)("customColors",l.customColors)("curve",l.curve)("layout","dagreCluster"),i(12),h(s(24,16,"WORKFLOW_DETAILS")),i(7),p("",s(31,18,"NAME"),":"),i(2),p(" ",l.data.workflowName,""),i(),c("ngIf",l.data.workflowDescription),i(),c("ngIf",(l.data==null?null:l.data.pendingWorkflowTransitions.length)>0))},dependencies:[Be,Fe,V,fe,A,ce,ee,Q,Z,O,R,x,se,de,G,N,B,F]})}}return e})();var Ze=()=>["/workflow-settings/manage/add"],et=e=>["/workflow-settings/manage",e];function tt(e,a){e&1&&(n(0,"button",23),u(1,"i-feather",24),r(2),d(3,"translate"),o()),e&2&&(c("routerLink",y(4,Ze)),i(2),p(" ",s(3,2,"ADD_WORKFLOW")," "))}function it(e,a){e&1&&(n(0,"th",25),r(1),d(2,"translate"),o()),e&2&&(i(),p(" ",s(2,1,"ACTION")," "))}function nt(e,a){if(e&1&&(n(0,"button",23),u(1,"i-feather",29),n(2,"span",30),r(3),d(4,"translate"),o()()),e&2){let t=_().$implicit;c("routerLink",Y(4,et,t.id)),i(3),p(" ",s(4,2,"EDIT"),"")}}function ot(e,a){if(e&1){let t=E();n(0,"button",31),b("click",function(){C(t);let l=_().$implicit,w=_();return g(w.deleteWorkflow(l))}),u(1,"i-feather",32),n(2,"span",30),r(3),d(4,"translate"),o()()}e&2&&(i(3),p(" ",s(4,1,"DELETE"),""))}function at(e,a){if(e&1){let t=E();n(0,"button",33),b("click",function(){C(t);let l=_().$implicit,w=_();return g(w.viewVisualWorkflow(l))}),u(1,"i-feather",34),n(2,"span",30),r(3),d(4,"translate"),o()()}e&2&&(i(3),p(" ",s(4,1,"VIEW"),""))}function rt(e,a){if(e&1&&(n(0,"td",26),f(1,nt,5,6,"button",7)(2,ot,5,3,"button",27)(3,at,5,3,"button",28),o()),e&2){let t=a.$implicit;i(),c("hasClaim","WORKFLOW_UPDATE_WORKFLOW"),i(),c("hasClaim","WORKFLOW_DELETE_WORKFLOW"),i(),c("ngIf",t.isWorkflowSetup)}}function lt(e,a){e&1&&(n(0,"th",35),r(1),d(2,"translate"),o()),e&2&&(i(),p(" ",s(2,1,"NAME")," "))}function mt(e,a){if(e&1&&(n(0,"td",26),r(1),o()),e&2){let t=a.$implicit;i(),h(t.name)}}function pt(e,a){e&1&&(n(0,"th",35),r(1),d(2,"translate"),o()),e&2&&(i(),p(" ",s(2,1,"DESCRIPTION")," "))}function dt(e,a){if(e&1&&(n(0,"td",26),r(1),o()),e&2){let t=a.$implicit;i(),p(" ",t.description," ")}}function st(e,a){e&1&&(n(0,"th",35),r(1),d(2,"translate"),o()),e&2&&(i(),p(" ",s(2,1,"SETUP_STATUS")," "))}function ct(e,a){if(e&1&&(n(0,"td",26),r(1),d(2,"translate"),d(3,"translate"),o()),e&2){let t=a.$implicit;i(),p(" ",t.isWorkflowSetup?s(2,1,"COMPLETED"):s(3,3,"DRAFT")," ")}}function ft(e,a){e&1&&(n(0,"tr")(1,"td",36)(2,"div",37)(3,"b"),r(4),d(5,"translate"),o()()()()),e&2&&(i(4),p(" ",s(5,1,"NO_DATA_FOUND"),""))}function ut(e,a){e&1&&u(0,"tr",38)}function _t(e,a){e&1&&u(0,"tr",39)}var ri=(()=>{class e extends ae{constructor(){super(...arguments),this.workflows=[],this.displayedColumns=["action","name","description","setupStatus"],this.dialog=v(J),this.workflowStore=v(Re),this.commonDialogService=v(Ie),this.translationService=v(me),this.workflowService=v(Le)}ngOnInit(){this.getWorkflows()}getWorkflows(){this.workflowStore.loadWorkflows()}deleteWorkflow(t){this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")} ${t.name}`).subscribe(m=>{m&&this.workflowStore.deleteWorkflowById(t.id)})}viewVisualWorkflow(t){this.workflowService.getvisualWorkflow(t.id).subscribe({next:m=>{let w=(window.innerWidth<768,"90vw");this.dialog.open(Ge,{maxWidth:w,data:P({},m)})},error:m=>{console.error("Error loading workflow:",m)}})}static{this.\u0275fac=(()=>{let t;return function(l){return(t||(t=H(e)))(l||e)}})()}static{this.\u0275cmp=T({type:e,selectors:[["app-workflow-list"]],standalone:!0,features:[K,M],decls:30,vars:8,consts:[[1,"content"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],["code","MANAGE_WORKFLOW"],[1,"col-md-6","d-flex","justify-content-end","mb-2"],["class","btn btn-success btn-sm me-2",3,"routerLink",4,"hasClaim"],[1,"card"],[1,"body"],[1,"table-responsive"],[1,"grid-height-large"],["mat-table","",3,"dataSource"],["matColumnDef","action"],["class","table-column-fix-270","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","description"],["matColumnDef","setupStatus"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"btn","btn-success","btn-sm","me-2",3,"routerLink"],["name","plus",1,"small-icon"],["mat-header-cell","",1,"table-column-fix-270"],["mat-cell",""],["class","btn btn-danger btn-sm me-2","type","button",3,"click",4,"hasClaim"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["name","edit",1,"small-icon"],[1,"d-none","d-sm-inline"],["type","button",1,"btn","btn-danger","btn-sm","me-2",3,"click"],["name","trash",1,"small-icon"],[1,"btn","btn-sm","btn-primary",3,"click"],["name","eye",1,"small-icon"],["mat-header-cell",""],["colspan","5"],[1,"m-2"],["mat-header-row",""],["mat-row",""]],template:function(m,l){m&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),r(5),d(6,"translate"),u(7,"app-page-help-text",5),o()(),n(8,"div",6),f(9,tt,4,5,"button",7),o()(),n(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"table",12),S(15,13),f(16,it,3,3,"th",14)(17,rt,4,3,"td",15),W(),S(18,16),f(19,lt,3,3,"th",17)(20,mt,2,1,"td",15),W(),S(21,18),f(22,pt,3,3,"th",17)(23,dt,2,1,"td",15),W(),S(24,19),f(25,st,3,3,"th",17)(26,ct,4,5,"td",15),W(),f(27,ft,6,3,"tr",20)(28,ut,1,0,"tr",21)(29,_t,1,0,"tr",22),o()()()()()()()),m&2&&(i(5),p(" ",s(6,6,"WORKFLOW_SETTINGS")," "),i(4),c("hasClaim","WORKFLOW_ADD_WORKFLOW"),i(5),c("dataSource",l.workflowStore.workflows()),i(14),c("matHeaderRowDef",l.displayedColumns)("matHeaderRowDefSticky",!0),i(),c("matRowDefColumns",l.displayedColumns))},dependencies:[ne,B,F,O,x,ie,te,V,oe,G,N,A,ye,Me,we,ve,ke,xe,he,Se,Ce,ge,We,Ee,be,pe,De,Ne,ue,Te,_e]})}}return e})();export{ri as WorkflowListComponent};
