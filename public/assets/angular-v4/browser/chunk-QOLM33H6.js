import{a as Se,b as E}from"./chunk-TRK6XBCE.js";import{b as fe}from"./chunk-54YXYWWQ.js";import{b as ue}from"./chunk-JB4URTUB.js";import{b as ve}from"./chunk-SLA72EXZ.js";import"./chunk-PSHPNFJ6.js";import"./chunk-EST3G7IM.js";import{b as Ie}from"./chunk-TNLJ7CAF.js";import{a as ge,b as he,c as Ee}from"./chunk-UX7VFZY4.js";import"./chunk-5HUZTPPR.js";import{B as me,D as se,K as ce,j as ne,k as pe}from"./chunk-VNAU6AHI.js";import"./chunk-2GYG6N64.js";import"./chunk-YTVNRIZ3.js";import"./chunk-3XAX4OT5.js";import{ia as te,ja as ae,ka as le,na as de}from"./chunk-NF46UI75.js";import{p as ie,t as re,u as oe}from"./chunk-SIUWMJOE.js";import"./chunk-GTE6R5NX.js";import"./chunk-FGSJTZPD.js";import"./chunk-73F4PDV3.js";import{B as X,C as Z,D as ee,c as J,e as x,h as Y,i as z,o as H,r as K,u as W}from"./chunk-TMWBOQE5.js";import{$b as O,Ab as m,Ac as l,Bb as D,Ea as N,Ed as $,Fa as _,Gd as q,Hd as U,Jd as P,Kb as o,Lb as r,Mb as C,Na as R,Oa as A,Qb as w,Tb as M,Vb as y,Yb as h,Yc as V,Zc as G,a as b,ac as k,b as T,bc as j,gc as n,h as F,hc as g,ib as i,ic as s,jb as f,jd as Q,sc as L,tb as B,wa as I,wb as v,za as S,zc as p}from"./chunk-EOQA7B6X.js";var xe=()=>["/papers"];function be(e,c){e&1&&(o(0,"div",29),n(1),p(2,"translate"),r()),e&2&&(i(),s(" ",l(2,1,"NAME_IS_REQUIRED")," "))}function Te(e,c){if(e&1&&(o(0,"ng-option",30),n(1),r()),e&2){let t=c.$implicit;m("value",t.id),i(),s(" ",t.name," ")}}function Fe(e,c){e&1&&(o(0,"div",29),n(1),p(2,"translate"),r()),e&2&&(i(),s(" ",l(2,1,"CATEGORY_IS_REQUIRED")," "))}function Ne(e,c){if(e&1&&(o(0,"ng-option",30),n(1),r()),e&2){let t=c.$implicit;m("value",t.id),i(),s(" ",t.companyName," ")}}function Re(e,c){if(e&1&&(o(0,"ng-option",30)(1,"span"),n(2),r()()),e&2){let t=c.$implicit;m("value",t.id),i(),D("color",t.colorCode),i(),g(t.name)}}function Ae(e,c){if(e&1){let t=w();o(0,"app-paper-editor",31),M("onChange",function(a){R(t);let u=y();return A(u.onEditorChange(a))}),r()}if(e&2){let t=y();m("data",t.editorData)("paperId",t.paperId)}}var Ce=(()=>{class e extends te{constructor(t,d,a,u,ye,Pe){super(),this.fb=t,this.route=d,this.router=a,this.paperService=u,this.toastrService=ye,this.translationService=Pe,this.isEditMode=!1,this.categoryStore=S(ve),this.clientStore=S(ue),this.documentStatusStore=S(fe),this.createForm()}ngOnInit(){this.paperId=this.route.snapshot.params.id,this.paperId&&(this.isEditMode=!0,this.getPaper())}createForm(){this.paperForm=this.fb.group({name:["",[x.required]],categoryId:["",[x.required]],clientId:[""],statusId:[""],description:[""]})}getPaper(){this.sub$.sink=this.paperService.getPaper(this.paperId).subscribe(t=>{this.paperData=t,this.paperForm.patchValue(t),this.editorData=JSON.parse(t.contentJson)})}onEditorChange(t){this.editorData=t}savePaper(){return F(this,null,function*(){if(this.paperForm.invalid){this.paperForm.markAllAsTouched();return}let t=T(b({},this.paperForm.value),{contentJson:JSON.stringify(this.editorData)});this.isEditMode?this.sub$.sink=this.paperService.updatePaper(this.paperId,t).subscribe(()=>{this.toastrService.success("Paper updated successfully"),this.router.navigate(["/papers"])}):this.sub$.sink=this.paperService.addPaper(t).subscribe(()=>{this.toastrService.success("Paper created successfully"),this.router.navigate(["/papers"])})})}static{this.\u0275fac=function(d){return new(d||e)(f(X),f($),f(q),f(Se),f(ie),f(ae))}}static{this.\u0275cmp=N({type:e,selectors:[["app-paper-manage"]],viewQuery:function(d,a){if(d&1&&O(E,5),d&2){let u;k(u=j())&&(a.editor=u.first)}},features:[B],decls:69,vars:52,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"page-title"],[1,"col-6","text-right"],["mat-raised-button","","color","primary",1,"m-r-10",3,"click"],["mat-flat-button","","color","warn",3,"routerLink"],[1,"col-xl-3","col-lg-4","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[3,"formGroup"],[1,"col-12","m-b-10"],[1,"form-label"],["formControlName","name","type","text",1,"form-control",3,"placeholder"],["class","text-danger",4,"ngIf"],["formControlName","categoryId",3,"placeholder","clearable"],[3,"value",4,"ngFor","ngForOf"],["formControlName","clientId",3,"placeholder"],["formControlName","statusId",3,"placeholder"],[1,"col-12"],["formControlName","description","rows","4",1,"form-control",3,"placeholder"],[1,"col-xl-9","col-lg-8","col-md-12","col-sm-12"],[1,"card","shadow-sm"],[1,"body","bg-white","p-4",2,"min-height","80vh"],[3,"data","paperId","onChange",4,"ngIf"],[1,"text-danger"],[3,"value"],[3,"onChange","data","paperId"]],template:function(d,a){d&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),n(7),p(8,"translate"),r()(),o(9,"div",7)(10,"button",8),M("click",function(){return a.savePaper()}),o(11,"mat-icon"),n(12,"save"),r(),n(13),p(14,"translate"),r(),o(15,"button",9)(16,"mat-icon"),n(17,"close"),r(),n(18),p(19,"translate"),r()()()()(),o(20,"div",4)(21,"div",10)(22,"div",11)(23,"div",12)(24,"h2"),n(25),p(26,"translate"),r()(),o(27,"div",13)(28,"form",14)(29,"div",4)(30,"div",15)(31,"label",16),n(32),p(33,"translate"),r(),C(34,"input",17),p(35,"translate"),v(36,be,3,3,"div",18),r(),o(37,"div",15)(38,"label",16),n(39),p(40,"translate"),r(),o(41,"ng-select",19),p(42,"translate"),v(43,Te,2,2,"ng-option",20),r(),v(44,Fe,3,3,"div",18),r(),o(45,"div",15)(46,"label",16),n(47),p(48,"translate"),r(),o(49,"ng-select",21),p(50,"translate"),v(51,Ne,2,2,"ng-option",20),r()(),o(52,"div",15)(53,"label",16),n(54),p(55,"translate"),r(),o(56,"ng-select",22),p(57,"translate"),v(58,Re,3,4,"ng-option",20),r()(),o(59,"div",23)(60,"label",16),n(61),p(62,"translate"),r(),C(63,"textarea",24),p(64,"translate"),r()()()()()(),o(65,"div",25)(66,"div",26)(67,"div",27),v(68,Ae,1,2,"app-paper-editor",28),r()()()()()()),d&2&&(i(7),g(l(8,23,a.isEditMode?"EDIT_PAPER":"ADD_PAPER")),i(6),s(" ",l(14,25,"SAVE")," "),i(2),m("routerLink",L(51,xe)),i(3),s(" ",l(19,27,"CANCEL")," "),i(7),g(l(26,29,"METADATA")),i(3),m("formGroup",a.paperForm),i(4),s("",l(33,31,"NAME")," *"),i(2),h("placeholder",l(35,33,"ENTER_PAPER_NAME")),i(2),m("ngIf",a.paperForm.get("name").touched&&a.paperForm.get("name").hasError("required")),i(3),s("",l(40,35,"CATEGORY")," *"),i(2),h("placeholder",l(42,37,"SELECT_CATEGORY")),m("clearable",!1),i(2),m("ngForOf",a.categoryStore.categories()),i(),m("ngIf",a.paperForm.get("categoryId").touched&&a.paperForm.get("categoryId").hasError("required")),i(3),g(l(48,39,"CLIENT")),i(2),h("placeholder",l(50,41,"SELECT_CLIENT")),i(2),m("ngForOf",a.clientStore.clients()),i(3),g(l(55,43,"STATUS")),i(2),h("placeholder",l(57,45,"SELECT_STATUS")),i(2),m("ngForOf",a.documentStatusStore.statusList()),i(3),g(l(62,47,"DESCRIPTION")),i(2),h("placeholder",l(64,49,"BRIEF_DESCRIPTION")),i(5),m("ngIf",!a.isEditMode||a.isEditMode&&a.editorData))},dependencies:[V,G,U,H,J,Y,z,K,W,le,ne,he,ge,E,re]})}}return e})();var Be=[{path:"",component:Ce}],Me=(()=>{class e{static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275mod=_({type:e})}static{this.\u0275inj=I({imports:[P.forChild(Be),P]})}}return e})();var ht=(()=>{class e{static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275mod=_({type:e})}static{this.\u0275inj=I({imports:[Q,Me,ce,ee,Z,de,pe,Ie,me,se,Ee,oe,E]})}}return e})();export{ht as PaperManageModule};
