import{a as _}from"./chunk-YYQ4L2UO.js";import{a as me}from"./chunk-GRNAKYI3.js";import{e as pe}from"./chunk-HUQBVWNM.js";import{a as ce,b as de}from"./chunk-TNLJ7CAF.js";import{a as se}from"./chunk-DXCWD2WZ.js";import{J as re,K as ae,k as oe}from"./chunk-VNAU6AHI.js";import"./chunk-2GYG6N64.js";import{a as ie,b as ne}from"./chunk-YTVNRIZ3.js";import"./chunk-3XAX4OT5.js";import{ca as k,fa as B,ia as Z,ja as te,na as le}from"./chunk-NF46UI75.js";import{p as J,t as K,u as ee}from"./chunk-SIUWMJOE.js";import"./chunk-GTE6R5NX.js";import"./chunk-FGSJTZPD.js";import"./chunk-73F4PDV3.js";import{A as H,C as Q,D as z,c as G,e as F,h as P,i as X,o as U,r as Y,s as $,t as q,u as W}from"./chunk-TMWBOQE5.js";import{Ab as d,Ac as p,Ea as b,Ed as R,Gd as j,Hd as D,Jd as V,Kb as r,Lb as l,Mb as E,Na as I,Oa as S,Qb as A,Tb as v,Vb as y,Yb as h,Yc as C,Zc as O,gc as m,ib as n,ic as c,jb as f,jd as L,rc as N,sc as M,tb as T,va as g,wb as x,ya as w,zc as s}from"./chunk-EOQA7B6X.js";var _e=()=>["/allow-file-extension"];function he(t,u){if(t&1&&(r(0,"mat-option",26),m(1),s(2,"translate"),l()),t&2){let e=u.$implicit;d("value",e.value),n(),c(" ",p(2,2,e.key)," ")}}function ge(t,u){t&1&&(r(0,"div",27),m(1),s(2,"translate"),l()),t&2&&(n(),c(" ",p(2,1,"FILE_TYPE_IS_REQUIRED")," "))}function we(t,u){t&1&&(r(0,"div",27),m(1),s(2,"translate"),l()),t&2&&(n(),c(" ",p(2,1,"EXTENSION_IS_REQUIRED")," "))}function be(t,u){t&1&&(r(0,"div",27),m(1),s(2,"translate"),l()),t&2&&(n(),c(" ",p(2,1,"SPECIAL_CHARACTER_NOT_ALLOWED")," "))}function Ie(t,u){if(t&1){let e=A();r(0,"div",28)(1,"div",12)(2,"div",18)(3,"div",29),E(4,"input",30),s(5,"translate"),r(6,"button",31),v("click",function(){let o=I(e).index,a=y();return S(a.removeExtensionField(o))}),E(7,"i-feather",32),l()(),x(8,we,3,3,"div",17)(9,be,3,3,"div",17),l()()()}if(t&2){let e,i,o=u.$implicit,a=u.index;d("formGroupName",a),n(4),h("placeholder",p(5,4,"ENTER_EXTENSION")),n(4),d("ngIf",((e=o.get("extension"))==null?null:e.touched)&&((e=o.get("extension"))==null?null:e.hasError("required"))),n(),d("ngIf",((i=o.get("extension"))==null?null:i.touched)&&((i=o.get("extension"))==null?null:i.hasError("pattern")))}}var ue=(()=>{class t extends Z{get extensions(){return this.allowFileExtensionForm.get("extensions")}constructor(e,i,o,a,Ee,xe){super(),this.router=e,this.fb=i,this.activeRoute=o,this.allowFileExtensionService=a,this.toastrService=Ee,this.translationService=xe,this.fileTypes=[]}createAllowFileExtensionForm(){this.allowFileExtensionForm=this.fb.group({id:[],fileType:[{value:null,disabled:!1},[F.required]],extensions:this.fb.array([])})}ngOnInit(){this.fileTypes=this.getEnumValues(me),this.createAllowFileExtensionForm(),this.sub$.sink=this.activeRoute.data.subscribe(e=>{e.allowFileExtension?(this.allowFileExtensionForm.patchValue({id:e.allowFileExtension.id,fileType:e.allowFileExtension.fileType}),e.allowFileExtension.extensions&&e.allowFileExtension.extensions.length>0&&e.allowFileExtension.extensions.split(",").forEach(i=>{this.extensions.push(this.buildExtension(i))}),this.allowFileExtensionForm.get("fileType").disable()):this.extensions.push(this.buildExtension())})}addExtensionField(){this.extensions.push(this.buildExtension())}buildExtension(e){return this.fb.group({extension:[e||"",[F.required,F.pattern(/^[a-zA-Z0-9,]*$/)]]})}getEnumValues(e){return Object.keys(e).filter(i=>isNaN(Number(i))).map(i=>({key:i,value:e[i]}))}removeExtensionField(e){this.extensions.removeAt(e)}saveAllowFileExtension(){if(this.allowFileExtensionForm.valid){let e=this.createBuildObject();this.sub$.sink=this.allowFileExtensionService.updateAllowFileExtension(e).subscribe(()=>{this.toastrService.success(this.translationService.getValue("FILE_TYPE_EXTENSION_UPDATED_SUCCESSFULLY")),this.router.navigate(["/allow-file-extension"])})}else this.allowFileExtensionForm.markAllAsTouched()}createBuildObject(){let e=this.allowFileExtensionForm.get("id").value,i=this.extensions.controls.map(a=>a.get("extension").value);return{id:e,fileType:this.allowFileExtensionForm.get("fileType").value,extensions:i.join(",")}}static{this.\u0275fac=function(i){return new(i||t)(f(j),f(H),f(R),f(_),f(J),f(te))}}static{this.\u0275cmp=b({type:t,selectors:[["app-manage-allow-file-extension"]],standalone:!0,features:[T,N],decls:43,vars:27,consts:[[1,"content"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],["code","MANAGE_ALLOW_FILE_EXTENSION"],[1,"card"],[1,"body"],[3,"formGroup"],[1,"d-flex","justify-content-end","mb-2"],["type","button",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","plus",1,"medium-icon"],[1,"row"],[1,"col-md-3"],[1,"form-group"],["panelClass","mat-select-control","formControlName","fileType",1,"form-control",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"col-md-12"],["formArrayName","extensions",1,"mb-2"],["class","col-md-2 col-sm-3  col-xs-6 mb-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"m-top-10","col-md-12"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],["name","x-circle",1,"small-icon"],[3,"value"],[1,"text-danger"],[1,"col-md-2","col-sm-3","col-xs-6","mb-2",3,"formGroupName"],[1,"d-flex","justify-content-between"],["formControlName","extension","type","text",1,"form-control",3,"placeholder"],["type","button",1,"btn","btn-sm",3,"click"],["name","trash",1,"small-icon","text-danger"]],template:function(i,o){if(i&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),m(5),s(6,"translate"),E(7,"app-page-help-text",5),l()()(),r(8,"div",6)(9,"div",7)(10,"form",8)(11,"div",9)(12,"button",10),v("click",function(){return o.addExtensionField()}),E(13,"i-feather",11),m(14),s(15,"translate"),l()(),r(16,"div",12)(17,"div",13)(18,"div",14)(19,"label"),m(20),s(21,"translate"),l(),r(22,"mat-select",15),s(23,"translate"),x(24,he,3,4,"mat-option",16),l(),x(25,ge,3,3,"div",17),l()()(),r(26,"div",12)(27,"div",18)(28,"label"),m(29),s(30,"translate"),l(),r(31,"div",19)(32,"div",12),x(33,Ie,10,6,"div",20),l()()()(),r(34,"div",21)(35,"button",22),v("click",function(){return o.saveAllowFileExtension()}),E(36,"i-feather",23),m(37),s(38,"translate"),l(),r(39,"button",24),E(40,"i-feather",25),m(41),s(42,"translate"),l()()()()()()()),i&2){let a;n(5),c(" ",p(6,12,"EDIT_ALLOW_FILE_EXTENSIONS")," "),n(5),d("formGroup",o.allowFileExtensionForm),n(4),c(" ",p(15,14,"ADD_EXTENSION")," "),n(6),c(" ",p(21,16,"FILE_TYPE"),""),n(2),h("placeholder",p(23,18,"FILE_TYPE")),n(2),d("ngForOf",o.fileTypes),n(),d("ngIf",((a=o.allowFileExtensionForm.get("fileType"))==null?null:a.touched)&&((a=o.allowFileExtensionForm.get("fileType"))==null?null:a.hasError("required"))),n(4),c(" ",p(30,20,"EXTENSIONS"),""),n(4),d("ngForOf",o.extensions.controls),n(4),c(" ",p(38,22,"SAVE")," "),n(2),d("routerLink",M(26,_e)),n(2),c(" ",p(42,24,"CANCEL")," ")}},dependencies:[Q,U,G,P,X,ee,K,L,C,O,V,D,le,z,Y,W,$,q,de,ce,k,B,ne,ie,oe,pe,ae,re]})}}return t})();var fe=(()=>{class t{constructor(e){this.allowFileExtensionService=e}resolve(e,i){let o=e.paramMap.get("id");return this.allowFileExtensionService.getAllowFileExtension(o)}static{this.\u0275fac=function(i){return new(i||t)(w(_))}}static{this.\u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ke=[{path:":id",component:ue,resolve:{allowFileExtension:fe},canActivate:[se]}];export{Ke as ALLOW_FILE_EXTENSION_ROUTES};
