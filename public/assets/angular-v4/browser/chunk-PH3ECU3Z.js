import{a as x}from"./chunk-OP6M3LK7.js";import{ia as q,ja as Q,ka as J,na as Z}from"./chunk-TR4MAYT5.js";import{p as Y,t as H,u as K}from"./chunk-AWIVOLPG.js";import{a as X}from"./chunk-J2LIJEQH.js";import"./chunk-AGIEFCW2.js";import"./chunk-F5F27R7A.js";import{A as L,D as G,c as j,e as h,h as B,i as U,o as W,r as z,u as V}from"./chunk-6EN4EXPL.js";import{$b as v,Ba as I,Ca as _,Cb as g,Ea as R,Fb as E,Fc as c,Gb as s,Gc as d,Ka as y,Kd as D,La as P,Md as A,Pd as b,Qb as a,Rb as r,Sb as u,Zb as F,dd as N,lb as M,lc as T,mc as l,nc as w,ob as i,oc as f,pb as p,pd as k,zb as O}from"./chunk-SXJN2XK6.js";function ae(e,m){if(e&1&&u(0,"img",30),e&2){let t=v();s("src",t.logoImage,M)}}function se(e,m){e&1&&u(0,"img",31)}function le(e,m){e&1&&(a(0,"div",32),l(1),c(2,"translate"),r()),e&2&&(i(),f(" ",d(2,1,"PASSWORD_IS_REQUIRED")," "))}function ce(e,m){e&1&&(a(0,"div",32),l(1),c(2,"translate"),r()),e&2&&(i(),f(" ",d(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function de(e,m){if(e&1&&(a(0,"div"),g(1,le,3,3,"div",23)(2,ce,3,3,"div",23),r()),e&2){let t,o,n=v();i(),s("ngIf",(t=n.resetPasswordForm.get("password").errors)==null?null:t.required),i(),s("ngIf",(o=n.resetPasswordForm.get("password").errors)==null?null:o.minlength)}}function me(e,m){e&1&&(a(0,"div",32),l(1),c(2,"translate"),r()),e&2&&(i(),f(" ",d(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function pe(e,m){if(e&1&&(a(0,"div"),g(1,me,3,3,"div",23),r()),e&2){let t,o=v();i(),s("ngIf",(t=o.resetPasswordForm.get("confirmPassword").errors)==null?null:t.required)}}function ge(e,m){e&1&&(a(0,"div",32),l(1),c(2,"translate"),r()),e&2&&(i(),f(" ",d(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}function ue(e,m){if(e&1&&u(0,"div",33),e&2){let t=v();T("background-image: url(",t.bannerImage,");")}}function fe(e,m){e&1&&u(0,"div",34)}var $=(()=>{class e extends q{constructor(t,o,n,C,ie,oe,ne){super(),this.activeRoute=t,this.toastrService=o,this.fb=n,this.router=C,this.userService=ie,this.translationService=oe,this.securityService=ne,this.logoImage="",this.bannerImage="",this.companyProfileSubscription()}ngOnInit(){this.activeRoute.data.subscribe(t=>{t.user.email?(this.createResetPasswordForm(),this.resetPasswordForm.get("userName").setValue(t.user.email)):(this.toastrService.error(this.translationService.getValue("WORNG_LINK_OR_LINK_IS_EXPIRED")),this.router.navigate(["/login"]))},()=>this.router.navigate(["/login"]))}createResetPasswordForm(){this.resetPasswordForm=this.fb.group({userName:[{value:"",disabled:!0},[h.required]],password:["",[h.required,h.minLength(6)]],confirmPassword:["",[h.required]]},{validator:this.checkPasswords})}checkPasswords(t){let o=t.get("password").value,n=t.get("confirmPassword").value;return o===n?null:{notSame:!0}}resetPassword(){if(!this.resetPasswordForm.valid){this.resetPasswordForm.markAllAsTouched();return}let t=this.resetPasswordForm.getRawValue();this.userService.recoverPassword(t).subscribe(o=>{this.toastrService.success(this.translationService.getValue("SUCCESSFULLY_RESET_PASSWORD")),this.router.navigate(["/login"])})}companyProfileSubscription(){this.securityService.companyProfile.subscribe(t=>{t&&(this.logoImage=t.logoUrl,this.bannerImage=t.bannerUrl)})}static{this.\u0275fac=function(o){return new(o||e)(p(D),p(Y),p(L),p(A),p(x),p(Q),p(X))}}static{this.\u0275cmp=y({type:e,selectors:[["app-recover-password"]],features:[O],decls:51,vars:27,consts:[[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-lg-4"],[1,"auth-content","p-4","d-flex","align-items-center","min-vh-100"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"text-center"],[1,"logo-full"],["alt","logo-full",3,"src",4,"ngIf"],["src","assets/images/logo.png","alt","logo-full",4,"ngIf"],[1,"font-20","mt-4"],[1,"text-muted"],[1,"p-2","mt-5"],[1,"login100-form","validate-form",3,"formGroup"],[1,"col-md-12"],[1,"form-group","mb-3"],["formControlName","userName","type","email",1,"form-control","mt-2"],[1,"col-md-12","mb-3"],[1,"form-group"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control","mt-2"],[4,"ngIf"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control","mt-2"],["class","text-danger",4,"ngIf"],[1,"container-login100-form-btn","mt-4"],["mat-flat-button","","color","primary","type","submit",1,"login100-form-btn","btn-sm",3,"click"],[1,"col-lg-8"],[1,"auth-bg"],["class","bg-overlay",3,"style",4,"ngIf"],["class","bg-overlay","style",'background-image: url("assets/images/login-image.png");',4,"ngIf"],["alt","logo-full",3,"src"],["src","assets/images/logo.png","alt","logo-full"],[1,"text-danger"],[1,"bg-overlay"],[1,"bg-overlay",2,"background-image",'url("assets/images/login-image.png")']],template:function(o,n){o&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div")(8,"div",7)(9,"div")(10,"a",8),g(11,ae,1,1,"img",9),r(),a(12,"a",8),g(13,se,1,0,"img",10),r()(),a(14,"h4",11),l(15),c(16,"translate"),r(),a(17,"p",12),l(18),c(19,"translate"),r()(),a(20,"div",13)(21,"form",14)(22,"div",15)(23,"div",16)(24,"label"),l(25),c(26,"translate"),r(),u(27,"input",17),r()(),a(28,"div",18)(29,"div",19)(30,"label"),l(31),c(32,"translate"),r(),u(33,"input",20),g(34,de,3,2,"div",21),r()(),a(35,"div",15)(36,"div",19)(37,"label"),l(38),c(39,"translate"),r(),u(40,"input",22),g(41,pe,2,1,"div",21)(42,ge,3,3,"div",23),r()(),a(43,"div",24)(44,"button",25),F("click",function(){return n.resetPassword()}),l(45),c(46,"translate"),r()()()()()()()()()(),a(47,"div",26)(48,"div",27),g(49,ue,1,3,"div",28)(50,fe,1,0,"div",29),r()()()()),o&2&&(i(11),s("ngIf",n.logoImage),i(2),s("ngIf",!n.logoImage),i(2),f(" ",d(16,15,"RESET_PASSWORD"),""),i(3),f("",d(19,17,"ENTER_YOUR_PASSWORD_AND_CONFIRM_PASSWORD")," "),i(3),s("formGroup",n.resetPasswordForm),i(4),w(d(26,19,"EMAIL")),i(2),E("disabled",!0),i(4),w(d(32,21,"PASSWORD")),i(3),s("ngIf",n.resetPasswordForm.get("password").touched&&n.resetPasswordForm.get("password").errors),i(4),w(d(39,23,"CONFIRM_PASSWORD")),i(3),s("ngIf",n.resetPasswordForm.get("confirmPassword").touched&&n.resetPasswordForm.get("confirmPassword").errors),i(),s("ngIf",n.resetPasswordForm.get("confirmPassword").touched&&n.resetPasswordForm.hasError("notSame")),i(3),f(" ",d(46,25,"RESET_PASSWORD")," "),i(4),s("ngIf",n.bannerImage),i(),s("ngIf",!n.bannerImage))},dependencies:[N,W,j,B,U,z,V,J,H],styles:[".auth-bg[_ngcontent-%COMP%]{height:100vh;background-size:cover;background-position:center}.auth-bg[_ngcontent-%COMP%]   .bg-overlay[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;inset:0;z-index:-1;background-color:#292626;background-repeat:no-repeat;background-size:cover;background-position:center;position:relative}@media (max-width: 991px){.auth-bg[_ngcontent-%COMP%]{display:none}}.auth-content[_ngcontent-%COMP%]{height:100vh;display:flex;background-color:#fff}.auth-form-group[_ngcontent-%COMP%]{position:relative}.auth-form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:60px;padding-left:60px;border-radius:5px}.auth-form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:7px;left:60px}.auth-form-group[_ngcontent-%COMP%]   .auth-page-icon[_ngcontent-%COMP%]{position:absolute;top:30px;transform:translateY(-50%);left:19px;font-size:24px;color:#6c757d}.auth-control[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:14px;line-height:3}.home-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:25px;z-index:9}.auth-user-name[_ngcontent-%COMP%]{font-size:19px;color:#403866;line-height:1.2;text-align:center;display:block;font-weight:600}.social-icon[_ngcontent-%COMP%]{text-align:center}.social-icon[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3c4858;border:1px solid #3c4858;display:inline-block;height:32px;width:32px;line-height:32px;text-align:center;transition:all .4s ease;overflow:hidden;position:relative}.social-icon[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#2f55d4;border-color:#2f55d4!important;color:#fff!important}.container-login100-form-btn[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center}.login100-form-btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:0 20px;width:100%;border-radius:10px;font-family:Roboto,sans-serif;font-size:12px;color:#fff;line-height:1.2;letter-spacing:1px;cursor:pointer;transition:all .4s}.login100-form-btn[_ngcontent-%COMP%]:hover{background:#333}@media (max-width: 992px){.login100-form[_ngcontent-%COMP%]{width:100%;display:block;padding-left:30px;padding-right:30px}.login100-more[_ngcontent-%COMP%]{width:50%}.alert-validate[_ngcontent-%COMP%]:before{visibility:visible;opacity:1}}@media (max-width: 768px){.login100-form[_ngcontent-%COMP%]{width:100%;display:block}.login100-more[_ngcontent-%COMP%]{display:none}}@media (max-width: 576px){.login100-form[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;padding-top:70px}}"]})}}return e})();var ee=(()=>{class e{constructor(t){this.userService=t}resolve(t){let o=t.paramMap.get("id");return this.userService.getUserInfoFromResetToken(o)}static{this.\u0275fac=function(o){return new(o||e)(R(x))}}static{this.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ve=[{path:":id",component:$,resolve:{user:ee}}],te=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=P({type:e})}static{this.\u0275inj=_({imports:[b.forChild(ve),b]})}}return e})();var We=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=P({type:e})}static{this.\u0275inj=_({imports:[k,G,te,K,Z]})}}return e})();export{We as RecoverPasswordModule};
