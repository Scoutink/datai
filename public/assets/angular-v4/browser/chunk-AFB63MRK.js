import{a as y}from"./chunk-DWTLO2NW.js";import{a as Bt}from"./chunk-CZA53JXZ.js";import{a as kt}from"./chunk-EDFYBFRY.js";import{a as jt}from"./chunk-DL4SMTXP.js";import{C as ct,H as gt,I as ft,J as ht,K as St,L as _t,M as Ct,N as At,O as Lt,P as bt,Q as vt,R as xt,S as It,T as Tt,U as Et,V as Rt,W as yt,Y as E,Z as Dt,_ as wt,ba as R,c as pt,ca as Mt,f as dt,ha as Ht,i as ut,ja as Nt}from"./chunk-H5SZDBVN.js";import"./chunk-XE6VZSAJ.js";import{a as mt}from"./chunk-KX634QZQ.js";import{F as nt,J as ot}from"./chunk-3O3IKF6A.js";import{ia as at}from"./chunk-TR4MAYT5.js";import{t as st,u as lt}from"./chunk-AWIVOLPG.js";import"./chunk-J2LIJEQH.js";import{b as rt}from"./chunk-AGIEFCW2.js";import"./chunk-F5F27R7A.js";import"./chunk-6EN4EXPL.js";import{$ as F,$b as _,B,Ba as $,Ca as L,Cb as u,Ea as H,Fc as p,Gb as c,Gc as d,Hc as X,Ka as G,La as b,N as O,Pd as j,Q as P,Qb as a,Rb as r,Sb as g,Ta as Q,Tb as f,Ua as V,Ub as h,W as A,Wb as W,Zb as Y,cc as J,dd as Z,fa as z,fc as v,gc as x,ha as U,hc as I,mc as s,nc as T,ob as n,oc as m,p as C,pb as N,pd as tt,td as et,wa as M,xd as it,yc as K,zb as q}from"./chunk-SXJN2XK6.js";var D=class extends kt{constructor(){super(...arguments),this.id="",this.userName=""}};var w=class{get count(){return this._count}constructor(i){this.loginAuditService=i,this.loginAuditSubject=new C([]),this.responseHeaderSubject=new C(null),this.loadingSubject=new C(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this.responseHeaderSubject.asObservable()}connect(){return this.loginAuditSubject.asObservable()}disconnect(){this.loginAuditSubject.complete(),this.loadingSubject.complete()}loadLoginAudits(i){this.loadingSubject.next(!0),this.loginAuditService.getLoginAudits(i).pipe(A(()=>B([])),U(()=>this.loadingSubject.next(!1))).subscribe(e=>{let o=new Bt;o.pageSize=parseInt(e.headers.get("pageSize")),o.totalCount=parseInt(e.headers.get("totalCount")),o.skip=parseInt(e.headers.get("skip")),this.responseHeaderSubject.next(o);let l=[...e.body];this._count=l.length,this.loginAuditSubject.next(l)})}};var Ot=(()=>{class t{constructor(e,o){this.httpClient=e,this.commonHttpErrorService=o}getLoginAudits(e){let o="loginAudit",l=new et().set("fields",e.fields).set("orderBy",e.orderBy).set("pageSize",e.pageSize.toString()).set("skip",e.skip.toString()).set("searchQuery",e.searchQuery).set("id",e.id.toString()).set("userName",e.userName.toString());return this.httpClient.get(o,{params:l,observe:"response"}).pipe(A(this.commonHttpErrorService.handleError))}static{this.\u0275fac=function(o){return new(o||t)(H(it),H(rt))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ut=["input"],$t=()=>[10,20,30];function Gt(t,i){if(t&1){let e=W();a(0,"button",36),Y("click",function(){Q(e);let l=_();return V(l.manageLogsRetention())}),g(1,"i-feather",37),a(2,"span",38),s(3),p(4,"translate"),r()()}t&2&&(n(3),m(" ",d(4,1,"SETTINGS"),""))}function Qt(t,i){t&1&&(a(0,"th",39),s(1),p(2,"translate"),r()),t&2&&(n(),m(" ",d(2,1,"DATE_TIME")," "))}function Vt(t,i){if(t&1&&(a(0,"td",40),s(1),p(2,"utcToLocalTime"),r()),t&2){let e=i.$implicit;n(),m(" ",X(2,1,e==null?null:e.loginTime,"short")," ")}}function qt(t,i){t&1&&(a(0,"th",39),s(1),p(2,"translate"),r()),t&2&&(n(),m(" ",d(2,1,"EMAIL")," "))}function Wt(t,i){if(t&1&&(a(0,"td",40),s(1),r()),t&2){let e=i.$implicit;n(),m(" ",e.userName," ")}}function Yt(t,i){t&1&&(a(0,"th",39),s(1),p(2,"translate"),r()),t&2&&(n(),m(" ",d(2,1,"STATUS")," "))}function Jt(t,i){if(t&1&&(a(0,"span",43),s(1),p(2,"translate"),r()),t&2){let e=_().$implicit;n(),T(d(2,1,e==null?null:e.status.toUpperCase()))}}function Kt(t,i){if(t&1&&(a(0,"span",44),s(1),p(2,"translate"),r()),t&2){let e=_().$implicit;n(),T(d(2,1,e==null?null:e.status.toUpperCase()))}}function Xt(t,i){if(t&1&&(a(0,"td",40),u(1,Jt,3,3,"span",41)(2,Kt,3,3,"span",42),r()),t&2){let e=i.$implicit;n(),c("ngIf",(e==null?null:e.status)=="Success"),n(),c("ngIf",(e==null?null:e.status)=="Error")}}function Zt(t,i){t&1&&(a(0,"th",39),s(1),p(2,"translate"),r()),t&2&&(n(),m(" ",d(2,1,"IP_ADDRESS")," "))}function te(t,i){if(t&1&&(a(0,"td",40),s(1),r()),t&2){let e=i.$implicit;n(),m(" ",e.remoteIP," ")}}function ee(t,i){t&1&&(a(0,"th",45),s(1),p(2,"translate"),r()),t&2&&(n(),m("",d(2,1,"LATITUDE")," "))}function ie(t,i){if(t&1&&(a(0,"td",40),s(1),r()),t&2){let e=i.$implicit;n(),m(" ",e.latitude," ")}}function ne(t,i){t&1&&(a(0,"th",45),s(1),p(2,"translate"),r()),t&2&&(n(),m(" ",d(2,1,"LONGITUDE")," "))}function oe(t,i){if(t&1&&(a(0,"td",40),s(1),r()),t&2){let e=i.$implicit;n(),m(" ",e.longitude," ")}}function ae(t,i){if(t&1&&(a(0,"td",46),g(1,"mat-paginator",47),r()),t&2){let e=_();n(),c("length",e.loginAuditResource.totalCount)("pageSize",e.loginAuditResource.pageSize)("pageSizeOptions",K(3,$t))}}function re(t,i){t&1&&g(0,"tr",48)}function se(t,i){t&1&&g(0,"tr",49)}function le(t,i){t&1&&g(0,"tr",50)}function me(t,i){t&1&&(a(0,"tr")(1,"td")(2,"div",51)(3,"b"),s(4),p(5,"translate"),r()()()()),t&2&&(n(4),m(" ",d(5,1,"NO_DATA_FOUND"),""))}var Pt=(()=>{class t extends at{constructor(e,o){super(),this.loginAuditService=e,this.dialog=o,this.loginAudits=[],this.displayedColumns=["loginTime","userName","remoteIP","status","latitude","longitude"],this.footerToDisplayed=["footer"],this.loginAuditResource=new D,this.loginAuditResource.pageSize=10,this.loginAuditResource.orderBy="loginTime desc"}ngOnInit(){this.dataSource=new w(this.loginAuditService),this.dataSource.loadLoginAudits(this.loginAuditResource),this.getResourceParameter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=P(this.sort.sortChange,this.paginator.page).pipe(M(()=>{this.loginAuditResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.loginAuditResource.pageSize=this.paginator.pageSize,this.loginAuditResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadLoginAudits(this.loginAuditResource)})).subscribe(),this.sub$.sink=O(this.input.nativeElement,"keyup").pipe(F(1e3),z(),M(()=>{this.paginator.pageIndex=0,this.loginAuditResource.skip=0,this.loginAuditResource.userName=this.input.nativeElement.value,this.dataSource.loadLoginAudits(this.loginAuditResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(e=>{e&&(this.loginAuditResource.pageSize=e.pageSize,this.loginAuditResource.skip=e.skip,this.loginAuditResource.totalCount=e.totalCount)})}manageLogsRetention(){this.dialog.open(y,{width:"35vw",maxHeight:"70vh",data:{type:"login-audit-log-setting"}})}static{this.\u0275fac=function(o){return new(o||t)(N(Ot),N(nt))}}static{this.\u0275cmp=G({type:t,selectors:[["app-login-audit-list"]],viewQuery:function(o,l){if(o&1&&(v(R,5),v(E,5),v(Ut,5)),o&2){let S;x(S=I())&&(l.paginator=S.first),x(S=I())&&(l.sort=S.first),x(S=I())&&(l.input=S.first)}},features:[q],decls:48,vars:14,consts:[["input",""],[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col","mb-2"],[1,"mb-0","page-title"],[3,"code"],[1,"col-auto"],[1,"breadcrumb-list"],[1,"breadcrumb-item","bcrumb-1"],["class","btn btn-primary btn-sm",3,"click",4,"hasClaim"],[1,"card"],[1,"header"],[1,"m-2","col-sm-5"],[1,"form-control",3,"placeholder"],[1,"body"],[1,"table-responsive"],[1,"grid-height-medium"],["mat-table","","matSort","","matSortActive","loginTime","matSortDirection","desc",3,"dataSource"],["matColumnDef","loginTime"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userName"],["matColumnDef","status"],["matColumnDef","remoteIP"],["matColumnDef","latitude"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","longitude"],["matColumnDef","footer"],["mat-footer-cell","","colspan","6",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[4,"matNoDataRow"],[1,"btn","btn-primary","btn-sm",3,"click"],["name","settings",1,"small-icon","me-1"],[1,"d-none","d-sm-inline"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge bg-success",4,"ngIf"],["class","badge bg-warning",4,"ngIf"],[1,"badge","bg-success"],[1,"badge","bg-warning"],["mat-header-cell",""],["mat-footer-cell","","colspan","6"],[3,"length","pageSize","pageSizeOptions"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],[1,"m-2"]],template:function(o,l){o&1&&(a(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"span",7),s(7),p(8,"translate"),r(),g(9,"app-page-help-text",8),r(),a(10,"div",9)(11,"ul",10)(12,"li",11),u(13,Gt,5,3,"button",12),r()()()()()(),a(14,"div",13)(15,"div",14)(16,"div",15),g(17,"input",16,0),p(19,"translate"),r()(),a(20,"div",17)(21,"div",18)(22,"div",19)(23,"table",20),f(24,21),u(25,Qt,3,3,"th",22)(26,Vt,3,4,"td",23),h(),f(27,24),u(28,qt,3,3,"th",22)(29,Wt,2,1,"td",23),h(),f(30,25),u(31,Yt,3,3,"th",22)(32,Xt,3,2,"td",23),h(),f(33,26),u(34,Zt,3,3,"th",22)(35,te,2,1,"td",23),h(),f(36,27),u(37,ee,3,3,"th",28)(38,ie,2,1,"td",23),h(),f(39,29),u(40,ne,3,3,"th",28)(41,oe,2,1,"td",23),h(),f(42,30),u(43,ae,2,4,"td",31),h(),u(44,re,1,0,"tr",32)(45,se,1,0,"tr",33)(46,le,1,0,"tr",34)(47,me,6,3,"tr",35),r()()()()()()()),o&2&&(n(7),T(d(8,10,"LOGIN_AUDIT_LOGS")),n(2),c("code","LOGIN_AUDIT_LOGS"),n(4),c("hasClaim","LOGIN_AUDIT_SET_RETENTION_PERIOD"),n(4),J("placeholder",d(19,12,"SEARCH_BY_USERNAME")),n(6),c("dataSource",l.dataSource),n(21),c("matHeaderRowDef",l.displayedColumns)("matHeaderRowDefSticky",!0),n(),c("matRowDefColumns",l.displayedColumns),n(),c("matFooterRowDef",l.footerToDisplayed)("matFooterRowDefSticky",!0))},dependencies:[Z,gt,ht,bt,_t,ft,xt,St,vt,Ct,Lt,At,It,Et,Tt,Rt,E,Dt,R,mt,pt,Ht,st,dt],styles:[".badge[_ngcontent-%COMP%]{font-weight:400;padding:.5em .6em}"]})}}return t})();var pe=[{path:"",component:Pt,data:{claimType:"LOGIN_AUDIT_VIEW_LOGIN_AUDIT_LOGS"},canActivate:[jt]}],Ft=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=b({type:t})}static{this.\u0275inj=L({imports:[j.forChild(pe),j]})}}return t})();var ni=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=b({type:t})}static{this.\u0275inj=L({imports:[tt,yt,wt,Mt,ct,Ft,lt,ut,Nt,y,ot]})}}return t})();export{ni as LoginAuditModule};
