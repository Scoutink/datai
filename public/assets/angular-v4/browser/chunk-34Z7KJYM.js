import{a as J,b as K,c as X}from"./chunk-DL7A26HC.js";import{a as z}from"./chunk-3NG6G7DU.js";import{a as Z,b as ee}from"./chunk-WGGER5HX.js";import{j as Q,w as Y}from"./chunk-H5SZDBVN.js";import{a as $}from"./chunk-KX634QZQ.js";import{C as b,D as w,G as M,H as O,I as N}from"./chunk-3O3IKF6A.js";import{ia as j,ja as q,ma as W}from"./chunk-TR4MAYT5.js";import{p as H,t as G}from"./chunk-AWIVOLPG.js";import{b as se}from"./chunk-AGIEFCW2.js";import{B as L,c as y,e as C,h as U,i as k,m as I,r as B,u as V}from"./chunk-6EN4EXPL.js";import{$b as A,Ba as oe,Cb as g,Ea as re,Fc as m,Gb as p,Gc as l,Ka as F,Qb as n,Rb as a,Sb as d,W as _,Zb as v,cc as E,cd as R,dd as x,kc as T,mc as s,nc as S,ob as o,oc as u,pb as c,pc as ne,xd as ae,zb as P}from"./chunk-SXJN2XK6.js";var te=(()=>{class t{constructor(e,r){this.httpClient=e,this.commonHttpErrorService=r}getDoucmentPermission(e){let r=`DocumentRolePermission/${e}`;return this.httpClient.get(r).pipe(_(this.commonHttpErrorService.handleError))}deleteDocumentUserPermission(e){let r=`documentUserPermission/${e}`;return this.httpClient.delete(r).pipe(_(this.commonHttpErrorService.handleError))}deleteDocumentRolePermission(e){let r=`documentRolePermission/${e}`;return this.httpClient.delete(r).pipe(_(this.commonHttpErrorService.handleError))}addDocumentUserPermission(e){return this.httpClient.post("documentUserPermission",{documentUserPermissions:e}).pipe(_(this.commonHttpErrorService.handleError))}addDocumentRolePermission(e){return this.httpClient.post("documentRolePermission",{documentRolePermissions:e}).pipe(_(this.commonHttpErrorService.handleError))}multipleDocumentsToUsersAndRoles(e){return this.httpClient.post("documentRolePermission/multiple",e).pipe(_(this.commonHttpErrorService.handleError))}static{this.\u0275fac=function(r){return new(r||t)(re(ae),re(se))}}static{this.\u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Ce(t,h){if(t&1&&(n(0,"ng-option",20),s(1),a()),t&2){let e=h.$implicit;p("value",e),o(),S(e.name)}}function Ie(t,h){t&1&&(n(0,"mat-error"),s(1),m(2,"translate"),a()),t&2&&(o(),u(" ",l(2,1,"START_DATE_IS_REQURED")," "))}function Fe(t,h){t&1&&(n(0,"mat-error"),s(1),m(2,"translate"),a()),t&2&&(o(),u(" ",l(2,1,"END_DATE_IS_REQURED")," "))}function Pe(t,h){if(t&1&&(n(0,"div",7)(1,"div",21),d(2,"input",22),m(3,"translate"),d(4,"owl-date-time",null,0),n(6,"div",7)(7,"div",23),g(8,Ie,3,3,"mat-error",24),a()()(),n(9,"div",21),d(10,"input",25),m(11,"translate"),d(12,"owl-date-time",null,1),n(14,"div",7)(15,"div",23),g(16,Fe,3,3,"mat-error",24),a()()()()),t&2){let e=T(5),r=T(13),i=A();o(2),E("placeholder",l(3,10,"CHOOSE_A_START_DATE")),p("min",i.minDate)("owlDateTimeTrigger",e)("owlDateTime",e),o(6),p("ngIf",i.permissionForm.get("startDate").touched&&i.permissionForm.get("startDate").hasError("required")),o(2),E("placeholder",l(11,12,"CHOOSE_A_END_DATE")),p("min",i.permissionForm.get("startDate").value)("owlDateTimeTrigger",r)("owlDateTime",r),o(6),p("ngIf",i.permissionForm.get("startDate").touched&&i.permissionForm.get("endDate").hasError("required"))}}var ke=(()=>{class t extends j{constructor(e,r,i,f,D,ie){super(),this.documentPermissionService=e,this.toastrService=r,this.data=i,this.dialogRef=f,this.fb=D,this.translationService=ie,this.minDate=new Date}ngOnInit(){this.createUserPermissionForm()}closeDialog(){this.dialogRef.close()}createUserPermissionForm(){this.permissionForm=this.fb.group({isTimeBound:new I(!1),startDate:[""],endDate:[""],isAllowDownload:new I(!1),selectedRoles:[]})}timeBoundChange(e){e.checked?(this.permissionForm.get("startDate").setValidators([C.required]),this.permissionForm.get("endDate").setValidators([C.required])):(this.permissionForm.get("startDate").clearValidators(),this.permissionForm.get("startDate").updateValueAndValidity(),this.permissionForm.get("endDate").clearValidators(),this.permissionForm.get("endDate").updateValueAndValidity())}saveDocumentRolePermission(){if(!this.permissionForm.valid){this.permissionForm.markAllAsTouched();return}let e=this.permissionForm.get("selectedRoles").value??[];if(e?.length==0){this.toastrService.error(this.translationService.getValue("PLEASE_SELECT_ATLEAST_ONE_ROLE"));return}let r=e.map(i=>Object.assign({},{id:"",documentId:this.data.documentId,roleId:i.id},this.permissionForm.value));this.sub$.sink=this.documentPermissionService.addDocumentRolePermission(r).subscribe(()=>{this.toastrService.success(this.translationService.getValue("PERMISSION_ADDED_SUCCESSFULLY")),this.dialogRef.close(!0)})}onNoClick(){this.dialogRef.close()}static{this.\u0275fac=function(r){return new(r||t)(c(te),c(H),c(w),c(b),c(L),c(q))}}static{this.\u0275cmp=F({type:t,selectors:[["app-manage-role-permission"]],features:[P],decls:33,vars:22,consts:[["date1",""],["date2",""],[1,"d-flex"],["mat-dialog-title","",1,"page-title"],["mat-icon-button","",1,"close-button","ms-auto",3,"click"],["color","warn",1,"close-icon"],["mat-dialog-content","",3,"formGroup"],[1,"row"],[1,"col-md-12"],["formControlName","selectedRoles",3,"multiple"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12","row"],["color","primary","formControlName","isTimeBound",3,"change"],["class","row",4,"ngIf"],["color","primary","formControlName","isAllowDownload"],["mat-dialog-actions",""],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],["name","save",1,"small-icon"],[1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],[3,"value"],[1,"col-md-6"],["formControlName","startDate",1,"form-control",3,"min","placeholder","owlDateTimeTrigger","owlDateTime"],[1,"col-md-12","m-t-10","m-b-10"],[4,"ngIf"],["formControlName","endDate",1,"form-control",3,"min","placeholder","owlDateTimeTrigger","owlDateTime"]],template:function(r,i){r&1&&(n(0,"div",2)(1,"span",3),s(2),m(3,"translate"),a(),n(4,"button",4),v("click",function(){return i.closeDialog()}),n(5,"mat-icon",5),s(6,"close"),a()()(),n(7,"div",6)(8,"div",7)(9,"div",8)(10,"label"),s(11),m(12,"translate"),a(),n(13,"ng-select",9),g(14,Ce,2,2,"ng-option",10),a()()(),n(15,"div",11)(16,"mat-checkbox",12),v("change",function(D){return i.timeBoundChange(D)}),s(17),m(18,"translate"),a()(),g(19,Pe,17,14,"div",13),n(20,"div",11)(21,"mat-checkbox",14),s(22),m(23,"translate"),a()()(),n(24,"div",15)(25,"button",16),v("click",function(){return i.saveDocumentRolePermission()}),d(26,"i-feather",17),s(27),m(28,"translate"),a(),n(29,"button",18),v("click",function(){return i.onNoClick()}),d(30,"i-feather",19),s(31),m(32,"translate"),a()()),r&2&&(o(2),u("",l(3,10,"ROLE_PERMISSION")," "),o(5),p("formGroup",i.permissionForm),o(4),S(l(12,12,"ROLES")),o(2),p("multiple",!0),o(),p("ngForOf",i.data.roles),o(3),u(" ",l(18,14,"SPACIFY_THE_PERIOD"),""),o(2),p("ngIf",i.permissionForm.get("isTimeBound").value),o(3),S(l(23,16,"ALLOW_DOWNLOAD")),o(5),u(" ",l(28,18,"SAVE")," "),o(4),u(" ",l(32,20,"CANCEL")," "))},dependencies:[y,U,k,R,x,B,V,W,Y,Q,$,M,N,O,z,J,X,K,ee,Z,G]})}}return t})();function Ae(t,h){if(t&1&&(n(0,"ng-option",20),s(1),a()),t&2){let e=h.$implicit;p("value",e),o(),ne("",e.firstName," ",e.lastName,"")}}function Re(t,h){t&1&&(n(0,"mat-error"),s(1),m(2,"translate"),a()),t&2&&(o(),u(" ",l(2,1,"START_DATE_IS_REQURED")," "))}function xe(t,h){t&1&&(n(0,"mat-error"),s(1),m(2,"translate"),a()),t&2&&(o(),u(" ",l(2,1,"END_DATE_IS_REQURED")," "))}function be(t,h){if(t&1&&(n(0,"div",7)(1,"div",21),d(2,"input",22),m(3,"translate"),d(4,"owl-date-time",null,0),n(6,"div",7)(7,"div",23),g(8,Re,3,3,"mat-error",24),a()()(),n(9,"div",21),d(10,"input",25),m(11,"translate"),d(12,"owl-date-time",null,1),n(14,"div",7)(15,"div",23),g(16,xe,3,3,"mat-error",24),a()()()()),t&2){let e=T(5),r=T(13),i=A();o(2),E("placeholder",l(3,10,"CHOOSE_A_START_DATE")),p("min",i.minDate)("owlDateTimeTrigger",e)("owlDateTime",e),o(6),p("ngIf",i.permissionForm.get("startDate").touched&&i.permissionForm.get("startDate").hasError("required")),o(2),E("placeholder",l(11,12,"CHOOSE_A_END_DATE")),p("min",i.permissionForm.get("startDate").value)("owlDateTimeTrigger",r)("owlDateTime",r),o(6),p("ngIf",i.permissionForm.get("startDate").touched&&i.permissionForm.get("endDate").hasError("required"))}}var He=(()=>{class t extends j{constructor(e,r,i,f,D,ie){super(),this.documentPermissionService=e,this.toastrService=r,this.data=i,this.dialogRef=f,this.fb=D,this.translationService=ie,this.minDate=new Date}ngOnInit(){this.createUserPermissionForm()}closeDialog(){this.dialogRef.close()}createUserPermissionForm(){this.permissionForm=this.fb.group({isTimeBound:new I(!1),startDate:[""],endDate:[""],isAllowDownload:new I(!1),selectedUsers:[]})}timeBoundChange(e){e.checked?(this.permissionForm.get("startDate").setValidators([C.required]),this.permissionForm.get("endDate").setValidators([C.required])):(this.permissionForm.get("startDate").clearValidators(),this.permissionForm.get("startDate").updateValueAndValidity(),this.permissionForm.get("endDate").clearValidators(),this.permissionForm.get("endDate").updateValueAndValidity())}saveDocumentUserPermission(){if(!this.permissionForm.valid){this.permissionForm.markAllAsTouched();return}let e=this.permissionForm.get("selectedUsers").value??[];if(e?.length==0){this.toastrService.error(this.translationService.getValue("PLEASE_SELECT_ATLEAST_ONE_USER"));return}let r=e.map(i=>Object.assign({},{id:"",documentId:this.data.documentId,userId:i.id},this.permissionForm.value));this.sub$.sink=this.documentPermissionService.addDocumentUserPermission(r).subscribe(()=>{this.toastrService.success(this.translationService.getValue("PERMISSION_ADDED_SUCCESSFULLY")),this.dialogRef.close(!0)})}onNoClick(){this.dialogRef.close()}static{this.\u0275fac=function(r){return new(r||t)(c(te),c(H),c(w),c(b),c(L),c(q))}}static{this.\u0275cmp=F({type:t,selectors:[["app-manage-user-permission"]],features:[P],decls:33,vars:22,consts:[["date1",""],["date2",""],[1,"d-flex"],["mat-dialog-title","",1,"page-title"],["mat-icon-button","",1,"close-button","ms-auto",3,"click"],["color","warn",1,"close-icon"],["mat-dialog-content","",3,"formGroup"],[1,"row"],[1,"form-group","col-md-12"],["formControlName","selectedUsers",3,"multiple"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12","row"],["color","primary","formControlName","isTimeBound",3,"change"],["class","row",4,"ngIf"],["color","primary","formControlName","isAllowDownload"],["mat-dialog-actions","",1,"m-r-10"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],["name","save",1,"small-icon"],[1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],[3,"value"],[1,"col-md-6"],["formControlName","startDate",1,"form-control",3,"min","placeholder","owlDateTimeTrigger","owlDateTime"],[1,"col-md-12","m-t-10","m-b-10"],[4,"ngIf"],["formControlName","endDate",1,"form-control",3,"min","placeholder","owlDateTimeTrigger","owlDateTime"]],template:function(r,i){r&1&&(n(0,"div",2)(1,"span",3),s(2),m(3,"translate"),a(),n(4,"button",4),v("click",function(){return i.closeDialog()}),n(5,"mat-icon",5),s(6,"close"),a()()(),n(7,"div",6)(8,"div",7)(9,"div",8)(10,"label"),s(11),m(12,"translate"),a(),n(13,"ng-select",9),g(14,Ae,2,3,"ng-option",10),a()()(),n(15,"div",11)(16,"mat-checkbox",12),v("change",function(D){return i.timeBoundChange(D)}),s(17),m(18,"translate"),a()(),g(19,be,17,14,"div",13),n(20,"div",11)(21,"mat-checkbox",14),s(22),m(23,"translate"),a()()(),n(24,"div",15)(25,"button",16),v("click",function(){return i.saveDocumentUserPermission()}),d(26,"i-feather",17),s(27),m(28,"translate"),a(),n(29,"button",18),v("click",function(){return i.onNoClick()}),d(30,"i-feather",19),s(31),m(32,"translate"),a()()),r&2&&(o(2),u("",l(3,10,"USER_PERMISSION")," "),o(5),p("formGroup",i.permissionForm),o(4),S(l(12,12,"USERS")),o(2),p("multiple",!0),o(),p("ngForOf",i.data.users),o(3),u(" ",l(18,14,"SPACIFY_THE_PERIOD"),""),o(2),p("ngIf",i.permissionForm.get("isTimeBound").value),o(3),S(l(23,16,"ALLOW_DOWNLOAD")),o(5),u(" ",l(28,18,"SAVE"),""),o(4),u(" ",l(32,20,"CANCEL"),""))},dependencies:[y,U,k,R,x,B,V,W,Y,Q,$,M,N,O,z,J,X,K,ee,Z,G]})}}return t})();export{te as a,ke as b,He as c};
