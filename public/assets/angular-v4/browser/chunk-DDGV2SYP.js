import{D as h,Fa as f,Ra as I,Uc as w,Vc as M,W as x,Za as d,_a as l,ha as y,k as b,o as m,v as j,wa as g,wb as p}from"./chunk-SXJN2XK6.js";function P(t,c,o){let e=typeof t=="function"?{next:t,error:c,complete:o}:t;return n=>n.pipe(g({next:e.next,complete:e.complete}),x(r=>(e.error(r),j)),e.finalize?y(e.finalize):r=>r)}function z(t,c){c?.injector||I(z);let o=c?.injector??f(d),e=new m,n=t(e).subscribe();o.get(l).onDestroy(()=>n.unsubscribe());let r=(i,v)=>{if(A(i))return e.next(i),{destroy:b};let D=F(),a=v?.injector??D??o;if(p(i)){let s=M(()=>{let S=i();w(()=>e.next(S))},{injector:a});return n.add({unsubscribe:()=>s.destroy()}),s}let u=i.subscribe(s=>e.next(s));return n.add(u),a!==o&&a.get(l).onDestroy(()=>u.unsubscribe()),{destroy:()=>u.unsubscribe()}};return r.destroy=n.unsubscribe.bind(n),r}function A(t){return!p(t)&&!h(t)}function F(){try{return f(d)}catch{return}}export{P as a,z as b};
